(function(){return function(e,t,r){var a,n,i=Scanner.fromMessage(e);i.setLocale(t);var o,p=[],s=[];a=(o=i.getSpan()).innerCapture(regExpFormatted(/\1(.+)/,r.reservationId),1);for(var h=[],d=i.getSpan().next(r.firstName).parentAnyTag("table").allInnerTags("tr3"),g=1;g<d.length;g++){var l=d[g].allInnerTagsFiltered("td3");h.push(l[0]+" "+l[1]+" "+l[2])}if(r.flightCheck.test(e.plain)){var m=i.getSpan().next(r.flightCheck).parentAnyTag("table"),c=m.allInnerTags("tr4"),u=m.allInnerTagsFiltered("th4");for(p=[],g=0;g<c.length/2;g++){var v,C=c[2*g].allInnerTagsFiltered("td4"),f=c[2*g+1].allInnerTagsFiltered("td4"),D=(v=u[g].innerCapture(/($<airlineCode>[A-Z]{2,3})($<flightNumber>\d+)/)).$airlineCode,T=v.$flightNumber,y=f[0],S=C[1],F=C[2].innerDate(),A=C[3].innerDate(),x=combineDateAndTime(F,A),k=f[1],b=C[4],I=C[5].innerDate(),E=C[6].innerDate(),N=combineDateAndTime(I,E);ASSERT(x,N,S,b)&&p.push({departureTime:x,arrivalTime:N,departureAirport:y,arrivalAirport:k,departureCode:S,arrivalCode:b,airlineCode:D,flightNumber:T})}for(g=0;g<p.length;g++){C=p[g];for(var z=0;z<h.length;z++){s.push(w={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:C.airlineCode,flightNumber:C.flightNumber,departureAirportFuzzy:C.departureAirport,departureAirportCode:C.departureCode,departureTime:C.departureTime,arrivalAirportFuzzy:C.arrivalAirport,arrivalAirportCode:C.arrivalCode,arrivalTime:C.arrivalTime},underName:{"@type":"http://schema.org/Person",name:h[z]},checkinUrl:n,reservationId:a,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:null,priceCurrency:null})}}}if(r.hotelCheck.test(e.plain)){var R=o.next(r.hotelCheck).nextDate().parentAnyTag("td").tagContents(),P=R.innerCapture(/(.*?)\n/,1).toString().split(",")[0],L=R.firstDate().innerCapture(regExpFormatted(/\1\s(.+?)\s\2\s(.+)/,r.from,r.to)),$=i.getDetachedSpan(unSpanDate_(L[1])).innerDate(),_=i.getDetachedSpan(unSpanDate_(L[2])).innerDate(),j=R.innerCapture(regExpFormatted(/\1\s+?\n?(.+)/,r.phone),1),O=(O=R.innerCapture(regExpFormatted(/\1\s+?\n?([\w\n\-\s\.]+)/,r.address),1).trim()).replace(/\n/g,", "),w={"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:h[0]},checkinDate:unSpanDate_($),checkoutDate:unSpanDate_(_),reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:a,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:P,telephone:j,address:O}};s.push(w)}if(r.carCheck.test(e.plain)){var B=o.next(r.carCheck).nextDate().parentAnyTag("td").tagContents(),M=B.innerCapture(/(.*?)\n/,1),U=(L=B.innerDate().innerCapture(regExpFormatted(/\1\s(.+?)\s\2\s(.+)/,r.from,r.to)))[1].split(" "),Z=U[2].toString(),q=U[1].split("/").reverse().join("-"),G=(G=combineDateAndTime(q,i.getDetachedSpan(Z))).replace(/\//g,"-"),H=L[2].split(" "),J=H[2].toString(),K=H[1].split("/").reverse().join("-"),Q=combineDateAndTime(K,i.getDetachedSpan(J)),V=B.innerCapture(regExpFormatted(/\1\s(.+)/,r.pickup),1),W=B.innerCapture(regExpFormatted(/\1\s(.+)/,r.dropoff),1);w={"@type":"http://schema.org/RentalCarReservation","@context":"http://schema.org",provider:{name:i.getSpan().next(r.carCheck).parentAnyTag("td").innerCapture(regExpFormatted(/\1\s(.+)/,r.supplied),1),"@type":"http://schema.org/Organization"},underName:{name:h[0],"@type":"http://schema.org/Person"},pickupTime:G,dropoffTime:Q,reservationId:a,pickupLocation:{name:V.trim(),"@type":"http://schema.org/Place",address:V.trim()},reservationFor:{"@type":"http://schema.org/Car",brand:{name:M,"@type":"http://schema.org/Organization"}},dropoffLocation:{name:W.trim(),"@type":"http://schema.org/Place",address:W.trim()},reservationStatus:"http://schema.org/ReservationConfirmed"};s.push(w)}if(s.length)return s}}).call();