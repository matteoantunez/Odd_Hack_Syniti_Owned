(function(){return function(e,r,t){var a,i=Scanner.fromMessage(e),n=i.getSpan();i.setLocale(r);var o=[],p=[],s=[];return a=n.nextText(t.reservationIdPrefix).nextAnyTag("td").tagContents(),n.nextText(t.passengersPrefix).parentAnyTag("td").tagContents().split("\n").slice(1).forEach(function(e){if(e.toString().length>0){var r=e.innerCapture(/(.+):\s(\d+)/);o.push({name:r[1],ticketNumber:r[2]})}}),n.allInnerTags("table5").forEach(function(e){var r,a,n,o,s,g,l,u,d,m,h,c=e.nextText(t.flightNumberPrefix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/(.+)\s\1\s(\D{2})\s(\d{1,4})/,t.flightNumberPrefix));r=c[1],a=c[2],n=c[3];var v=e.nextText(t.departureAirportPrefix).nextAnyTag("td").tagContents().split("\n");l=v[1];var T=(o=v[0]).innerCapture(/(\D{3})\s(.+)/);s=T[1],o=T[2];var f=e.nextText(t.arrivalAirportPrefix).nextAnyTag("td").tagContents().split("\n");h=f[1];var x=(u=f[0]).innerCapture(/(\D{3})\s(.+)/);d=x[1],u=x[2];var A=e.nextText(t.flightNumberPrefix).nextAnyTag("td").tagContents();/\s-\s/.test(A)?(g=A.toString().split("-")[0],m=A.toString().split("-")[1]):(g=A,m=A),p.push({airlineName:r,airlineCode:a,flightNumber:n,departureAirport:o,departureAirportCode:s,departureDateTime:i.getDetachedSpan(g.toString()+" "+l.toString()).innerDate(),arrivalAirport:u,arrivalAirportCode:d,arrivalDateTime:i.getDetachedSpan(m.toString()+" "+h.toString()).innerDate()})}),o.forEach(function(e){p.forEach(function(r){ASSERT(e.name,r.airlineName||r.airlineCode,r.departureAirport||r.departureAirportCode,r.departureDateTime,r.arrivalAirport||r.arrivalAirportCode,r.arrivalDateTime)&&s.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:r.airlineName,airlineCode:r.airlineCode,flightNumber:r.flightNumber,departureAirportFuzzy:r.departureAirport,departureAirportCode:r.departureAirportCode,departureTime:r.departureDateTime,arrivalAirportFuzzy:r.arrivalAirport,arrivalAirportCode:r.arrivalAirportCode,arrivalTime:r.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:e.name},reservationId:a,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:e.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:r.seatNumber,seatingType:r.seatingType}}})})}),s.length>0?s:CONTINUE}}).call();