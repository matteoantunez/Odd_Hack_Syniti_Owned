(function(){return function(e,r){var n=Scanner.fromMessage(e);n.setLocale("en_US");for(var t=n.getSpan(),o=[],a=[],p=[],i=e.plain.split(/Pick-Up/i).length-1,c=(e.plain.slice(),0);c<i;c++)(t=t.next(/(^Car Rental[\s\S]*?)(?:^Flight [A-Z]|^Hotel$|^Car Rental$|^Plan)/gm)).isNullSpan_||p.push(t.toString());return 0===p.length?CONTINUE:(p.forEach(function(e){var t,o,p,i,c,s,l,d,h,f,m,u,g,v,k,T,y,N,U="Confirmed",C=n.getDetachedSpan(e),R=e.slice();e=e.split("\n");(y=/Company.*\n.*\n(.*)\n/.exec(R))&&2===y.length&&(y=y[1]),(c=/Pick-Up At.*\n.*\n(.*)\n/.exec(R))&&2===c.length&&(c=y+", "+c[1]),h=(h=/Drop-off At.*\n.*\n([^0-9]*\(.+\))\n/.exec(R))&&2===h.length?y+", "+h[1]:c,o=C.nextDate(),s=C.nextDate().nextDate(),(t=/Confirmation #.*\n.*\n(.*)\n/.exec(R))&&2===t.length&&(t=t[1]),(N=/Vehicle Type.*\n.*\n(.*)\n/.exec(R))&&2===N.length&&(N=N[1]),(f=/Rate.*\n.*\n([\d,.]+)\s*([A-Z]{2,3})/.exec(R))&&3===f.length&&(m=f[1],u=f[2]),a.push({reservationId:t,pickupTime:o,pickupName:p,pickupTelephone:i,pickupAddress:c,dropoffTime:s,dropoffName:l,dropoffTelephone:d,dropoffAddress:h,totalPrice:m,priceCurrency:u,reservationStatus:U,checkinUrl:g,modifyReservationUrl:v,cancelReservationUrl:k,underName:T,brand:N,provider:y,underPersonName:r.underName})}),a.forEach(function(e){ASSERT(e.pickupTime,e.pickupAddress,e.dropoffTime,e.dropoffAddress),o.push({"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",reservationId:e.reservationId,totalPrice:e.totalPrice,priceCurrency:e.priceCurrency,reservationStatus:"http://schema.org/"+e.reservationStatus,checkinUrl:e.checkinUrl,modifyReservationUrl:e.modifyReservationUrl,cancelReservationUrl:e.cancelReservationUrl,underName:{"@type":"http://schema.org/Person",name:e.underName},provider:{"@type":"http://schema.org/Organization",name:e.provider},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:e.brand},license:"",color:""},pickupTime:e.pickupTime,pickupLocation:{"@type":"http://schema.org/Place",name:e.pickupName,telephone:e.pickupTelephone,address:e.pickupAddress},dropoffTime:e.dropoffTime,dropoffLocation:{"@type":"http://schema.org/Place",name:e.dropoffName,telephone:e.dropoffTelephone,address:e.dropoffAddress}})}),o.length>=1?o:CONTINUE)}}).call();