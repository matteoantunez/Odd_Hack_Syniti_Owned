(function(){return function(t,e,r){function a(){ASSERT(C.airlineName,C.flightNumber,C.departureAirportCode,C.departureDateTime,C.arrivalAirportCode,C.arrivalDateTime)&&l.push(C)}var n=Scanner.fromMessage(t);n.setLocale(e);var i=n.getSpan().next(r.passengerNamePrefix).parentTag("table3"),g=i.nextText(r.passengerNamePrefix).nextTag("tr3").nextTag("td3").tagContents().trim(),o=n.getSpan().tagContents().innerCapture(regExpFormatted(/\1 ([0-9]+)/),1).trim(),p=i.nextText(r.ticketNumberPrefix).nextTag("tr3").nextTag("td3").nextTag("td3").tagContents().trim(),m=i.nextText(r.frequentFlyerPrefix).nextTag("tr3").nextTag("td3").nextTag("td3").nextTag("td3").tagContents().innerCapture(regExpFormatted(/(.*) \|/),1).trim(),d=n.getSpan().next(r.pricePrefix).nextTag("td3").tagContents(),x=d.innerCapture(/([0-9,\.]+)/,1).trim(),u=d.innerCapture(/(\D)[0-9]+/,1).trim();u||(u=d.innerCapture(/[0-9]+(\D)/,1).trim());for(var T,s=n.getSpan().next(r.tripSummaryHeader).parentTag("table2").allInnerTags("table3").filter(function(t){return t.tagContents().toString().length}),l=[],C={},h=0;h<s.length;h++)C={},/Flight/.test(T=s[h])&&T.innerText(r.flightSummaryHeader).exists()&&(C.flightNumber=T.nextTag("td3").tagContents().innerCapture(regExpFormatted(/\1 ([0-9]+)/,r.flightNumberPrefix),1).trim(),C.departureAirportCode=T.nextTag("td3").nextTag("td3").tagContents().innerCapture(regExpFormatted(/\(([A-Z]{3})\)/),1).trim(),C.departureDateTime=T.nextTag("td3").nextTag("td3").tagContents().innerDate(),C.departureAirportName=T.nextTag("td3").nextTag("td3").tagContents().innerCapture(regExpFormatted(/\1 (.*)\(/,r.fromPrefix),1).trim(),C.arrivalAirportCode=T.nextTag("td3").nextTag("td3").nextTag("td3").tagContents().innerCapture(regExpFormatted(/\(([A-Z]{3})\)/),1).trim(),C.arrivalDateTime=T.nextTag("td3").nextTag("td3").nextTag("td3").tagContents().innerDate(),C.arrivalAirportName=T.nextTag("td3").nextTag("td3").nextTag("td3").tagContents().innerCapture(regExpFormatted(/\1 (.*)\(/,r.toPrefix),1).trim(),C.airlineName=T.nextTag("td3").nextTag("td3").nextTag("td3").nextTag("td3").nextTag("td3").tagContents().innerCapture(regExpFormatted(/(.*)/),1).trim(),a());for(var c=[],f=0;f<l.length;f++){var v=l[f];c.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:v.airlineName,airlineCode:v.airlineCode,flightNumber:v.flightNumber,departureAirportFuzzy:v.departureAirportName,departureAirportCode:v.departureAirportCode,departureTime:v.departureDateTime,arrivalAirportFuzzy:v.arrivalAirportName,arrivalAirportCode:v.arrivalAirportCode,arrivalTime:v.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:g},programMembershipUsed:{"@type":"http://schema.org/ProgramMembership",membershipNumber:m,programName:"Frequent Flyer"},reservationId:o,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:x,priceCurrency:u,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:p,ticketedSeat:{"@type":"http://schema.org/Seat"}}})}return c}}).call();