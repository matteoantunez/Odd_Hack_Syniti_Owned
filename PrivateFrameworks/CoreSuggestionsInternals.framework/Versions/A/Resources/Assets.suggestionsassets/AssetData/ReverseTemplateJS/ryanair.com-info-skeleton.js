(function(){return function(e,r,a){function t(r){if(r.test(e.plain)){var a=new RegExp(/From\s+($<departureFuzzy>.*)\(($<departureCode>.+?)\)\s+/.source+/to\s+($<arrivalFuzzy>.*)\(($<arrivalCode>.+?)\)\n/.source+/($<date>.+)\s+Flight\s+($<flightNumber>\d+)\s+Depart.+?at\s+/.source+/($<departureHour>[\d]{2})($<departureMinute>[\d]{2})\s+/.source+/and arrive.*at\s+($<arrivalHour>[\d]{2})($<arrivalMinute>[\d]{2})/.source);d=z.getSpan().innerCapture(regExpFormatted(/\1\n+\2/,r,a)),g=d.$departureFuzzy,c=d.$departureCode,h=d.$arrivalFuzzy,$=d.$arrivalCode,s="FR",p=d.$flightNumber,l=z.getDetachedSpan(d.$date+" "+d.$departureHour+":"+d.$departureMinute).innerDate(),v=z.getDetachedSpan(d.$date+" "+d.$arrivalHour+":"+d.$arrivalMinute).innerDate(),ASSERT(p,l,g,v,h)&&N.push({airlineCode:s,flightNumber:p,departureAirport:g,departureCode:c,departureTime:l,arrivalAirport:h,arrivalCode:$,arrivalTime:v,passengers:T})}}var i,n,p,o,u,d,s,l,g,c,m,v,h,$,C,F,f,y,z=Scanner.fromMessage(e);z.setLocale(r);var S=[],N=[];C=z.getSpan().innerCapture(regExpFormatted(/\1\s+(.*)/,a.reservationId),1);var T=z.getSpan().innerCapture(regExpFormatted(/\1\n(.*)/,a.passengers),1).allInnerCapture(/\d\.\s+([\D]+)/,1);if(!T||!T.length){var A=z.getSpan().innerCapture(regExpFormatted(/\1\s+(.+)/,a.passengers),1).rstrip(":");T=[A]}for(t(a.goingOut),t(a.comingBack),F=0;F<N.length;F++){m=N[F];for(var b=0;b<T.length;b++){S.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:m.airlineName,airlineCode:m.airlineCode,flightNumber:m.flightNumber,departureAirportFuzzy:m.departureAirport,departureAirportCode:m.departureCode,departureTime:m.departureTime,arrivalAirportFuzzy:m.arrivalAirport,arrivalAirportCode:m.arrivalCode,arrivalTime:m.arrivalTime},underName:{"@type":"http://schema.org/Person",name:T[b]},checkinUrl:f,reservationId:C,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:o,priceCurrency:u,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:y,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:i,seatingType:n}}})}}if(S.length)return S}}).call();