(function(){return function(e){var t=loadHelper("generic_common.js")(e,"restaurant");if(!t||t===STOP)return STOP;var r,a,s,n,i,o,d,l,p,g=t[0],c=t[1],m=t[2],u=t[3],v=t[4],h=t[5];if(s=loadHelper("name.js")(e.subject,c,m,e),a=loadHelper("starttime.js")(c,m,e,s),r=loadHelper("reservationid.js")(c,m,e.subject,e.url),"Cancelled"!==g||a.exists()?ASSERT({sg_validate:a,sg_description:"startTime"},{sg_validate:s,sg_description:"name"},OR({sg_validate:r,sg_description:"reservationId"},{sg_validate:v,sg_description:"isConfirmed"},{sg_validate:h,sg_description:"isCancelled"})):ASSERT({sg_validate:r,sg_description:"reservationId"},{sg_validate:s,sg_description:"name"})){var _=m.getSpan(),S=_.allAddresses(),f=loadHelper("getCandidates.js");return(n=loadHelper("address.js")(c,m,e,s))&&n.exists()||(n=f([c.addressPrefix],_,function(e){return S.filter(function(t){return t.getStart()>=e.getStart()})},function(e,t){return e.getStart()>=t.getStart()})),c.addressPrefix.pop(),i=loadHelper("undername.js")(e.to,c,m),o=loadHelper("partysize.js")(u,c,m),l=loadHelper("agentname.js")(e.from),d=loadHelper("phone.js")(c,m,r,n,s,e),[{"@context":"http://schema.org","@type":"http://schema.org/FoodEstablishmentReservation",reservationId:r,reservationStatus:"http://schema.org/Reservation"+g,url:p,underName:{"@type":"http://schema.org/Person",name:i},broker:{"@type":"http://schema.org/Organization",name:l},startTime:a,partySize:o,reservationFor:{"@type":"http://schema.org/FoodEstablishment",name:s.trim(),telephone:d,address:n}}]}}}).call();