(function(){return function(e,t,r){var a,n,i,o=Scanner.fromMessage(e);o.setLocale(t);var g,s,p,l,m,d,u,h,c,C,T,y,v,x,b,A,N=[],f={};m="Eastar Jet",n=(l=o.getSpan()).next(r.reservationId_prefix).nextTag("td1").tagContents(),g=(s=l.next(r.passenger)).nextTag("td1").tagContents(),(v=(s=l.next(r.flightExit)).nextTag("td1").tagContents())&&(v=v.innerCapture(r.totalPrice_prefix))&&3===v.length&&(x=v[2],v=v[1]),ASSERT(g)&&(f[g.toString()]={name:g,seats:{},seatingType:null,ticketNumber:null,totalPrice:v,priceCurrency:x}),s=l.next(r.flightSummary).nextAnyTag("tr");do{if(""===(p=s.innerTag("td1")).trim().toString())break;p=s.allInnerTags("td1"),p=(b=(A=s.nextAnyTag("td").nextAnyTag("td")).tagContents().innerCapture(/($<airlineCode>\w+)\s*($<flightNumber>\d+)/)).$flightNumber,d=b.$airlineCode,u=(A=A.nextAnyTag("td")).tagContents(),h=(A=A.nextAnyTag("td")).tagContents(),C=(A=A.nextAnyTag("td")).tagContents(),T=(A=A.nextAnyTag("td")).tagContents(),c=null,y=null,ASSERT(p,h,u,T,C)&&N.push({reservationId:n,airlineName:m,airlineCode:d,flightNumber:p,departureAirport:h,departureCode:c,departureTime:u,arrivalAirport:T,arrivalCode:y,arrivalTime:C,passengers:f}),s=s.nextAnyTag("tr")}while(null!==s.nextAnyTag("td").tagContents().innerCapture(r.oneFlight));for(var S=[],k=0;k<N.length;k++)for(var F=N[k],z=Object.keys(F.passengers),P=0;P<z.length;P++){var I=F.passengers[z[P]],E={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:F.airlineName,airlineCode:F.airlineCode,flightNumber:F.flightNumber,departureAirportFuzzy:F.departureAirport,departureAirportCode:F.departureCode,departureTime:F.departureTime,arrivalAirportFuzzy:F.arrivalAirport,arrivalAirportCode:F.arrivalCode,arrivalTime:F.arrivalTime},underName:{"@type":"http://schema.org/Person",name:I.name},checkinUrl:i,reservationId:F.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:I.totalPrice,priceCurrency:I.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:a,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:I.seats[F.flightNumber],seatingType:I.seatingType}}};valid(I.membershipNumber,I.programName)&&(E.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:I.membershipNumber,programName:I.programName}),S.push(E)}if(S.length)return S}}).call();