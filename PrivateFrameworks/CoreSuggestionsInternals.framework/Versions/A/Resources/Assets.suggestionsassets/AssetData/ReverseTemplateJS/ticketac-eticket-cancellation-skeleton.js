(function(){return function(t,e,n){var a=Scanner.fromMessage(t);a.setLocale(e);var r,i,o,s,c,p,g,h,m,u=[];r=a.getSpan().innerCapture(n.reservationIdRegExp,1).trim(),n.nameRegExp&&(i=a.getSpan().innerCapture(n.nameRegExp,1).trim()),(o=a.getSpan().next(n.pricePrefix).nextTag("td1").tagContents())&&o.exists()&&(s=o.innerCapture(/([\d,.]+)/,1),c=o.innerCapture(/([^\d,.]+)/,1).trim()),a.getDetachedSpan(a.getSpan().next(n.ticketDetailsPrefix).withEnd(a.getSpan().next(n.ticketDetailsPrefix).next(n.ticketDetailsSuffix).getStart()).toString()).allInnerTags("tr1").forEach(function(t){if(6!==(m=t.allInnerTags("td1")).length)return CONTINUE;if(!/^\d+$/.test(m[0].tagContents().trim()))return CONTINUE;(g=m[1].tagContents(),h=m[2].innerDate(),ASSERT(h))&&u.push({startDate:h,eventName:g,eventLocation:p})});var v=[];if(u.forEach(function(t){ASSERT(r)&&v.push({"@context":"http://schema.org","@type":"http://schema.org/EventReservation",name:i,totalPrice:s,priceCurrency:c,reservationStatus:"http://schema.org/Reservation"+(n.reservationStatus||"Confirmed"),reservationId:r,reservedTicket:{"@type":"http://schema.org/Ticket",ticketedSeat:{"@type":"http://schema.org/Seat"}},reservationFor:{"@type":"http://schema.org/Event",eventStatus:"http://schema.org/EventConfirmed",name:t.eventName,startDate:t.startDate,location:{"@type":"http://schema.org/Place",name:t.eventLocation}}})}),v.length)return v}}).call();