(function(){return function(e,t,n){function r(e){return e=e.replace(/[^\d\sa-zA-z:\u6642\u5206]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/"),e=getFuzzyDate(T.getDetachedSpan(e))}var a,i,p,o,c,s,g,l,u,m,h,S,d,C,f,v,y,R,k,P,T=Scanner.fromMessage(e);T.setLocale(t);var U="Skyrent";if(p=T.getSpan().innerCapture(n.reservationId,1),a=T.getSpan().innerCapture(n.guestName,1),i=T.getSpan().innerCapture(n.guestEmail,1),g=s=T.getSpan().innerCapture(n.modifyUrl,1).toString(),l=(N=T.getSpan().innerCapture(n.price,1)).innerCapture(/([\d,.]+)/,1),u=N.innerCapture(/([^\d,.]+)/,1).trim(),P=r(P=T.getSpan().innerCapture(n.pickup,1).toString()),R=T.getSpan().innerCapture(n.pickup,2).toString(),v=r(v=T.getSpan().innerCapture(n.dropoff,1).toString()),C=T.getSpan().innerCapture(n.dropoff,2).toString(),m=T.getSpan().innerCapture(n.car,1).toString(),n.confirmSubject.test(e.subject)&&(k=T.getSpan().innerCapture(n.pickupTelephone,2).toString(),!ASSERT(a,p,P,v,OR(R,y),OR(C,d))))return CONTINUE;if(n.cancellationSubject.test(e.subject)){var N;if(p=T.getSpan().innerCapture(n.cancellationReservationId,1),a=T.getSpan().innerCapture(n.cancellationGuestName,1),i=T.getSpan().innerCapture(n.cancellationGuestEmail,1),P=r(P=T.getSpan().innerCapture(n.cancellationPickup,1).toString()),v=r(v=T.getSpan().innerCapture(n.cancellationDropoff,1).toString()),l=(N=T.getSpan().innerCapture(n.cancellationPrice,1)).innerCapture(/([\d,.]+)/,1),u=N.innerCapture(/([^\d,.]+)/,1).trim(),!ASSERT(a,p,P,v))return CONTINUE;o="Cancelled"}return 0===m.toString().length||null===m?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:l,priceCurrency:u,reservationId:p,reservationStatus:"http://schema.org/Reservation"+(o||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:a,email:i},provider:{"@type":"http://schema.org/Organization",name:U},pickupTime:P,pickupLocation:{"@type":"http://schema.org/Place",name:y,telephone:k,address:R},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:d,telephone:f,address:C}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:l,priceCurrency:u,reservationId:p,reservationStatus:"http://schema.org/Reservation"+(o||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:a,email:i},provider:{"@type":"http://schema.org/Organization",name:U},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:m},license:h,color:S},pickupTime:P,pickupLocation:{"@type":"http://schema.org/Place",name:y,telephone:k,address:R},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:d,telephone:f,address:C}}]}}).call();