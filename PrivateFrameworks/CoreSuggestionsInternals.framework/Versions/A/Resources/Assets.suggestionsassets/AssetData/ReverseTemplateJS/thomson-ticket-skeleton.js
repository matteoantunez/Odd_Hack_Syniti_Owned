(function(){return function(e,t,r){e.plain=e.plain.replace(regExpFormatted(/\1[\s\S]+/,r.endOfMessage),"");var a=Scanner.fromMessage(e);a.setLocale(t);var n,i,g,l,p,o,s,h,f,u,d,m,c,x,S,T,v,D,C,y,I=a.getSpan(),N=[],P=[],b=[];for(i=I.innerCapture(regExpFormatted(/\1\s*(.+)/,r.reservationIdPrefix),1),(g=I.next(r.priceInfoPrefix).next(/\d+[.,]\d+/).parentTag("td1").tagContents()).exists()&&(g.innerCapture(/([\d,.]+)/,1),g.innerCapture(/([^\d,.]+)/,1).trim()),v=I.next(r.passengerPrefix1).next(r.passengerPrefix2).nextTag("table1"),p=I.withInterval(v.getStart(),v.next(r.passengerSuffix).getStart()).allInnerTags("table1"),y=0;y<p.length;y++)(D=p[y].allInnerTags("td1")).length<2||(l=D[1].tagContents().rstrip("*")).getLength()&&N.push({underPersonName:l});for(v=I.next(r.flightPrefix1).next(r.flightPrefix2).nextTag("table1").nextTag("table1"),o=I.withInterval(v.getStart(),v.next(r.flightSuffix).getStart()).allInnerTags("table1"),y=0;y<o.length;y++)5===(D=o[y].allInnerTags("td1")).length&&((C=D[2].innerCapture(r.flightRegExp))&&7===C.length&&(u=C[1],d=C[2],s=C[4],f=C[6],"TOM"===(h=C[5]).toString()&&(h="BY")),(C=D[4].innerCapture(r.flightTimeRegExp))&&4===C.length&&(c=C[2],x=C[3],S=a.getDetachedSpan((m=C[1]).toString()+" "+c.toString()).innerDate(),T=a.getDetachedSpan(m.toString()+" "+x.toString()).innerDate(),Date.parse(a.getDateDD(T).iso8601)<Date.parse(a.getDateDD(S).iso8601)&&(T=modifyDate(T,1))),ASSERT(h,f)&&P.push({departureAirport:u,arrivalAirport:d,airlineName:s,airlineCode:h,flightNumber:f,departureDateTime:S,arrivalDateTime:T}));if(N.forEach(function(e){P.forEach(function(t){b.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:t.airlineName,airlineCode:t.airlineCode,flightNumber:t.flightNumber,departureAirportFuzzy:t.departureAirport,departureTime:t.departureDateTime,arrivalAirportFuzzy:t.arrivalAirport,arrivalTime:t.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:e.underPersonName},checkinUrl:n,reservationId:i,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketedSeat:{"@type":"http://schema.org/Seat"}}})})}),b.length>=1)return b}}).call();