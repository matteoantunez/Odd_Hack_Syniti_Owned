(function(){return function(e,t,n){function r(e){return e=e.replace(/[^\d\sa-zA-z:\u6642\u5206]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/"),e=getFuzzyDate(k.getDetachedSpan(e))}var a,o,p,i,c,s,g,u,m,h,l,d,C,f,S,v,R,x,y,E,k=Scanner.fromMessage(e);k.setLocale(t),a=k.getSpan().nextRegExp(n.guestName).tagContents().innerCapture(n.guestName,1),p=k.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),E=r(E=k.getSpan().nextRegExp(n.pickupDate).tagContents().innerCapture(n.pickupDate,1).toString()),v=r(v=k.getSpan().nextRegExp(n.dropoffDate).tagContents().innerCapture(n.dropoffDate,1).toString());var L=k.getSpan().nextRegExp(n.pickupLoc).tagContents().innerCapture(n.pickupLoc,1);x=L.innerCapture(/(.+)\(/,1).toString(),y=L.innerCapture(/.+\((.+)\)/,1).toString();var N=k.getSpan().nextRegExp(n.dropoffLoc).tagContents().innerCapture(n.dropoffLoc,1);f=N.innerCapture(/(.+)\(/,1).toString(),S=N.innerCapture(/.+\((.+)\)/,1).toString(),h=k.getSpan().nextRegExp(n.car).tagContents().innerCapture(n.car,1);var P=k.getSpan().nextRegExp(n.price).tagContents().innerCapture(n.price,1);if(u=P.innerCapture(/([\d,.]+)/,1),m=P.innerCapture(/([^\d,.]+)/,1),n.confirmSubject.test(e.subject)){if(!ASSERT(a,p,E,v,x,f))return CONTINUE;i="Confirmed"}if(n.cancellationSubject.test(e.subject)){if(x=k.getSpan().innerCapture(n.cancelPickupLoc,1),f=k.getSpan().innerCapture(n.cancelDropoffLoc,1),!ASSERT(a,p,E,v,x,f))return CONTINUE;i="Cancelled"}return 0===h.toString().length||null===h?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:m,reservationId:p,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:a,email:o},provider:{"@type":"http://schema.org/Organization",name:"Nippon"},pickupTime:E,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:y,address:x},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:C,telephone:S,address:f}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:u,priceCurrency:m,reservationId:p,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:a,email:o},provider:{"@type":"http://schema.org/Organization",name:"Nippon"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:h},license:l,color:d},pickupTime:E,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:y,address:x},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:C,telephone:S,address:f}}]}}).call();