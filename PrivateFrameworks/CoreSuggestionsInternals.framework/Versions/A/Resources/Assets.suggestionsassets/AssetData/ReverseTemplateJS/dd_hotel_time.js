(function(){return function(e,t){var n=e.getSpan(),i=n.allDates(),r=loadHelper("getCandidates.js"),a=r([t.checkInDateTimePrefix],n,function(e){return i.filter(function(t){return t.getStart()>=e.getEnd()})},function(t){var n=e.getDateDD(t);return/[\d\uff10-\uff19]{1,2}/i.test(t.toString())&&n&&n.is(["Date","DateTime","DateDuration"])},undefined,undefined,function(n){var i,r=t.buildRegExp("incorrectTime",n.toString());for(i=0;i<r.length;i++)if(e.getSpan().next(r[i]).exists())return!1;return!0}),o=r([t.checkOutDateTimePrefix],n,function(t){return i.filter(function(n){if(n.getStart()<t.getEnd())return!1;var i=e.getDateDD(n);return dateTimeSpanToEpoch(i&&i.is(["DateDuration"])?i.endIso8601:i.iso8601)>dateTimeSpanToEpoch(a)})},function(t){var n=e.getDateDD(t);return/[\d\uff10-\uff19]{1,2}/i.test(t.toString())&&n&&n.is(["Date","DateTime","DateDuration"])},function(t){var n=e.getDateDD(t);return n&&n.is(["DateDuration"])?e.getDetachedSpan(n.endIso8601):t});if(a.exists()&&!o.exists()){var u=loadHelper("stayLength.js")(t,e);if(u>0){o=modifyDate(a,u);var D=e.getDateDD(o);D&&D.hasTime()&&(o=e.getDetachedSpan(D.getDateComponent()))}}if(!o.exists()&&isDateTimeDuration(a)){var c=e.getDetachedSpan(e.getDateDD(a).endIso8601);dateTimeSpanToEpoch(a)<=dateTimeSpanToEpoch(c)&&(o=c)}var f=e.getDateDD(a);if(a.exists()&&(!f||!f.hasTime())){var g=r([t.checkInTimePrefix],n,function(e){return i.filter(function(t){return t.getStart()>=e.getEnd()})},function(t){var n=e.getDateDD(t);return/[\d\uff10-\uff19]{1,2}/i.test(t.toString())&&n&&n.is(["Time","TimeDuration"])},undefined,undefined,function(n){var i,r=t.buildRegExp("incorrectCheckinTime",n.toString());for(i=0;i<r.length;i++)if(e.getSpan().next(r[i]).exists())return!1;return!0});a=combineDateAndTime(a,g)}var s=e.getDateDD(o);if(o.exists()&&(!s||!s.hasTime())){var d=r([t.checkOutTimePrefix],n,function(e){return i.filter(function(t){return t.getStart()>=e.getEnd()})},function(t){var n=e.getDateDD(t);return/[\d\uff10-\uff19]{1,2}/i.test(t.toString())&&n&&n.is(["Time","TimeDuration"])},function(t){var n=e.getDateDD(t);return n&&n.is(["TimeDuration"])?e.getDetachedSpan(n.endIso8601):t},undefined,function(n){var i,r,a=t.buildRegExp("incorrectTime",n.toString()),o=t.buildRegExp("incorrectCheckoutTime",n.toString());for(i=0;i<a.length;i++)if(e.getSpan().next(a[i]).exists())return!1;for(r=0;r<o.length;r++)if(e.getSpan().next(o[r]).exists())return!1;return!0});o=combineDateAndTime(o,d)}return[a,o]}}).call();