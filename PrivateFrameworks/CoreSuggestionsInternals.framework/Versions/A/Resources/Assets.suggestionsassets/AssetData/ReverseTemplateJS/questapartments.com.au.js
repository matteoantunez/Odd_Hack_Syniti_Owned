(function(){return function(e,t,n){var a,g,r,i,s,o,p,x,c,m,u,l,d,C,h,S,R,T,E=Scanner.fromMessage(e);if(E.setLocale(t),!n.emailTitelConfirmation.test(e.subject)&&!n.emailTitelCancelConfirmation.test(e.subject))return CONTINUE;s=E.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),a=E.getSpan().nextRegExp(n.guestFirstName).nextAnyTag("td").tagContents()+" "+E.getSpan().nextRegExp(n.guestLastName).nextAnyTag("td").tagContents(),g=E.getSpan().nextRegExp(n.guestLastName).nextLink(),x=E.getSpan().nextRegExp(n.checkInDate).nextDate(),u=E.getSpan().nextRegExp(n.checkOutDate).nextDate(),p=E.getSpan().nextRegExp(n.checkInTime).nextDate(),m=E.getSpan().nextRegExp(n.checkOutTime).nextDate(),c=getFuzzyDate(E.getDetachedSpan(x+" "+p).innerDate()),l=getFuzzyDate(E.getDetachedSpan(u+" "+m).innerDate());var f=E.getSpan().nextRegExp(n.price).nextAnyTag("td").tagContents();if(r=f.innerCapture(/([\d,.]+)/,1),i=f.innerCapture(/([^\d,.]+)/,1).trim(),C=E.getSpan().nextRegExp(n.hotelName).nextAnyTag("td").tagContents(),S=E.getSpan().nextRegExp(n.hotelAddress).nextAnyTag("td").tagContents(),h=E.getSpan().nextRegExp(n.hotelPhone).nextAnyTag("td").tagContents(),n.emailTitelConfirmation.test(e.subject)){if(!ASSERT(a,s,c,l,S))return CONTINUE;o="Confirmed"}if(n.emailTitelCancelConfirmation.test(e.subject)){if(s=E.getSpan().nextRegExp(n.cancelReservationId).nextAnyTag("td").tagContents(),a=E.getSpan().nextRegExp(n.cancelGuestName).nextAnyTag("td").tagContents(),g=E.getSpan().nextRegExp(n.cancelGuestName).nextLink(),!ASSERT(a,s,c,l,S))return CONTINUE;o="Cancelled"}return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:g},totalPrice:r,priceCurrency:i,checkinTime:c,checkoutTime:l,modifyReservationUrl:R,cancelReservationUrl:T,reservationStatus:"http://schema.org/Reservation"+(o||"Confirmed"),reservationId:s,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:C,url:d,telephone:h,address:S}}]}}).call();