(function(){return function(e,t,n){var a,r,o,i,s,c,g,p,d,m,h,u,x,D,l,S,T,y=Scanner.fromMessage(e);if(y.setLocale(t),D=y.getSpan().next(n.underName).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,n.underName),1),a=y.getSpan().next(n.reservationId).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,n.reservationId),1),n.cancellation.test(e.subject)?(u="Cancelled",T=y.getSpan().next(n.dates).nextDate(),c=y.getDateDD(T).iso8601,g=y.getDateDD(T).endIso8601):(r=(i=y.getSpan().next(n.checkInDate).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+.*?,(.*)/,n.checkInDate),1)).next(n.checkInTime).nextDate(),c=combineDateAndTime(y.getDetachedSpan(i.toString()).innerDate(),r),o=(s=y.getSpan().next(n.checkOutDate).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+.*?,(.*)/,n.checkOutDate),1)).next(n.checkOutTime).nextDate(),g=combineDateAndTime(y.getDetachedSpan(s.toString()).innerDate(),o),d=(p=o.nextAddress()).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,n.hotelPhone),1)),x=/(.+?)\s+-/.exec(e.subject)[1],l=y.getSpan().next(n.modifyReservationUrl).parentAnyTag("td").innerLink(),S=y.getSpan().next(n.hotelUrl).parentAnyTag("td").innerLink(),ASSERT(D,c,g))return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:D},totalPrice:m,priceCurrency:h,checkinTime:c,checkoutTime:g,modifyReservationUrl:l,reservationStatus:"http://schema.org/Reservation"+(u||"Confirmed"),reservationId:a,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:x,url:S,telephone:d,address:p}}]}}).call();