(function(){return function(e,t,n){var r,a,o,p,i,c,s,g,m,h,u,d,l,f,C,x,v,S,R,y,L=Scanner.fromMessage(e);if(L.setLocale(t),n.confirmSubject.test(e.subject)){r=L.getSpan().nextRegExp(n.guestName).tagContents().innerCapture(n.guestName,1),o=L.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),y=L.getSpan().nextRegExp(n.dates).nextDate(),x=L.getDetachedSpan(y.next(n.dropoffDate).innerCapture(n.dropoffDate,1).toString()).innerDate(),S=L.getSpan().nextRegExp(n.pickupLoc).tagContents().innerCapture(n.pickupLoc,1),f=L.getSpan().nextRegExp(n.dropoffLoc).tagContents().innerCapture(n.dropoffLoc,1),R=L.getSpan().next(n.pickupLoc).nextPhoneNumber().innerCapture(/[^\d\+]*(.*)/,1),C=L.getSpan().next(n.dropoffLoc).nextPhoneNumber().innerCapture(/[^\d\+]*(.*)/,1),h=L.getSpan().nextRegExp(n.car).tagContents().innerCapture(n.car,1),s=c=L.getSpan().innerLink();var E=L.getSpan().nextRegExp(n.price).tagContents().innerCapture(n.price,1);if(g=E.innerCapture(/([\d,.]+)/,1),m=E.innerCapture(/([^\d,.]+)/,1).trim(),!ASSERT(r,o,y,x,S,f))return CONTINUE}if(n.cancellationSubject.test(e.subject)){if(!ASSERT(r,o))return CONTINUE;p="Cancelled"}return h?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:g,priceCurrency:m,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:i,modifyReservationUrl:c,cancelReservationUrl:s,underName:{"@type":"http://schema.org/Person",name:r,email:a},provider:{"@type":"http://schema.org/Organization",name:"Avis"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:h},license:u,color:d},pickupTime:y,pickupLocation:{"@type":"http://schema.org/Place",name:v,telephone:R,address:S},dropoffTime:x,dropoffLocation:{"@type":"http://schema.org/Place",name:l,telephone:C,address:f}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:g,priceCurrency:m,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:i,modifyReservationUrl:c,cancelReservationUrl:s,underName:{"@type":"http://schema.org/Person",name:r,email:a},provider:{"@type":"http://schema.org/Organization",name:"Avis"},pickupTime:y,pickupLocation:{"@type":"http://schema.org/Place",name:v,telephone:R,address:S},dropoffTime:x,dropoffLocation:{"@type":"http://schema.org/Place",name:l,telephone:C,address:f}}]}}).call();