(function(){return function(e,t,r){var a=Scanner.fromMessage(e);a.setLocale(t);var n=a.getSpan().next(regExpFormatted(/\1\s(\d+)/,r.reservationIdPrefix),1),i=[],o=[];if(n.nextTag("table5").allInnerTagsFiltered("td5").some(function(e){return r.hasFlightPrefix.test(e.getString())})){i=parseMicrodata(e.html);for(var s=0;s<i.length;s++){var g=i[s],l=g.reservationFor,p=g.ticketNumber;if(Array.isArray(l))for(var h=0;h<l.length;h++){var m=l[h];o.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",bookingAgent:g.bookingAgent,reservationFor:{"@type":"http://schema.org/Flight",airline:m.airline,flightNumber:m.flightNumber,departureAirportFuzzy:m.departureAirport,departureTime:m.departureTime,arrivalAirportFuzzy:m.arrivalAirport,arrivalTime:m.arrivalTime,operatedBy:m.operatedBy,arrivalTerminal:m.arrivalTerminal,departureTerminal:m.departureTerminal},underName:g.underName,reservationId:g.reservationNumber,reservationStatus:g.reservationStatus,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:g.ticketNumber[h]}})}else if(Array.isArray(p)){o.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",bookingAgent:g.bookingAgent,reservationFor:g.reservationFor,underName:g.underName,reservationId:g.reservationNumber,reservationStatus:g.reservationStatus,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:p[s]}})}else o.push(g)}}var c=n.next(r.travelers).nextTag("table5").nextTag("td5").tagContents();c=c.replace(/\s\+\s\d.+/,""),n=n.next(r.travelers).nextAnyTag("table").nextAnyTag("table");var u=a.getSpan().withInterval(n.next(r.hotel).nextTag("table4").getStart(),n.next(r.neccessary).parentTag("table4").getStart());if(!u.exists()&&u.isNullSpan_)return o;var v=u.next(r.hotelConfirmation).next(/\d[\d -\.]+/).trim(),d=u.nextTag("td4").tagContents(),x=d.nextTag("table5"),T=a.getSpan().withInterval(d.getStart(),x.getStart()).replace(/\[td4\]/,"");T=T.replace(/\n/g,"").trim();var b=u.nextTag("td5").nextTag("td5").tagContents().innerCapture(/([^<]+)/,1).trim(),y=null,S=u.next(r.checkin).nextDate(),f=u.next(r.checkout).nextDate();return ASSERT(c,v,S,f,b)?(o.push({"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:c},checkinTime:S,checkoutTime:f,reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:v,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:T,telephone:y,address:b}}),o):void 0}}).call();