(function(){return function(e,t,n){var a,r,i,s,o,g,c,p,d,m,u,l,x,T,h,C=Scanner.fromMessage(e);if(C.setLocale(t),n.cancellation.test(e.subject)&&(c="Cancelled"),g=C.getSpan().nextText(n.reservationId).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1 (.*)/,n.reservationId),1),u=(h=(i=C.getSpan().nextText(n.reservationDetails).nextTag("table5")).innerTag("td5").tagContents().innerCapture(/($<name>.*)\n($<address>[^]+)$/))?h.$name.trim():null,x=h?h.$address.trim():null,p=i.innerText(n.checkIn).nextDate(),d=i.innerText(n.checkOut).nextDate(),a=(i=C.getSpan().nextText(n.guestDetails).nextTag("table5")).innerText(n.underName).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)$/,n.underName),1),r=i.innerText(n.email).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)$/,n.email),1),s=(T=C.getSpan().nextText(n.price).nextAnyTag("td").tagContents()).innerCapture(/([\d,.]+)/,1),o=T.innerCapture(/([^\d,.]+)/,1),ASSERT(a,p,d,x))return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:r},totalPrice:s,priceCurrency:o,checkinTime:p,checkoutTime:d,reservationStatus:"http://schema.org/Reservation"+(c||"Confirmed"),reservationId:g,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:u,url:m,telephone:l,address:x}}]}}).call();