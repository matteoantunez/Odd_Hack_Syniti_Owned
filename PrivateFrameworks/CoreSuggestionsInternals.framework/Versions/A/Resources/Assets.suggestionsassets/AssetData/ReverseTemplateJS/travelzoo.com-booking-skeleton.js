(function(){return function(e,t,n){var r=Scanner.fromMessage(e);r.setLocale(t);var a,o,s,i,d,m,c,g=r.getSpan(),p="Confirmed";if(/Travelzoo\sCancellation/i.test(e.subject)&&(p="Cancelled"),(a=g.next(n.underPersonNamePrefix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s(.*)/,n.underPersonNamePrefix),1)).isNullSpan_&&(a=g.next(n.underPersonNamePrefix).nextAnyTag("td").nextAnyTag("td").tagContents()),d=g.innerCapture(regExpFormatted(/\1\s(\d+\-\d+\-\d+)\s/,n.reservationIdPrefix),1),s=(i=(o="Cancelled"===p?g.next(n.hotelNameCancelled).parentAnyTag("td").innerCapture(regExpFormatted(/\1\s(.+)\shas been cancelled/,n.hotelNameCancelled),1):g.next(n.hotelNameConfirmed).parentAnyTag("td").innerCapture(regExpFormatted(/\1\s(.+)\sis confirmed/,n.hotelNameConfirmed),1)).nextAddress()).nextPhoneNumber(),m=i.next(/\].{14,16}\-.{14,16}[\s\[]/).innerDate().toString().split(" - ")[0],c=i.next(/\].{14,16}\-.{14,16}[\s\[]/).innerDate().toString().split(" - ")[1],m=r.getDetachedSpan(m).innerDate(),c=r.getDetachedSpan(c).innerDate(),ASSERT(a,o,m))return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a},checkinTime:m,checkoutTime:c,reservationStatus:"http://schema.org/Reservation"+p,reservationId:d,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:o,telephone:s,address:i}}]}}).call();