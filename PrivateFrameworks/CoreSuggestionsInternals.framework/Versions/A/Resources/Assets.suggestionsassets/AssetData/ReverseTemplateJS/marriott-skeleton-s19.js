(function(){return function(e,t,n){var a,r,g,p,o,i,x,s,l,c,d,m,S,u,C,T,h,R=Scanner.fromMessage(e);(R.setLocale(t),i="Confirmed",(o=R.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1))===R.getNullSpan()&&(o=R.getSpan().nextRegExp(n.cancelReservationId).nextAnyTag("td").tagContents()),o===R.getNullSpan()&&(o=R.getSpan().nextRegExp(n.reminderReservationId).nextAnyTag("td").tagContents()),a=R.getSpan().nextRegExp(n.guestName).tagContents().innerCapture(n.guestName,1).trim(),s=R.getSpan().nextRegExp(n.checkInDate).nextAnyTag("td").tagContents(),x=R.getSpan().nextRegExp(n.checkInTime).nextAnyTag("td").tagContents(),d=R.getSpan().nextRegExp(n.checkOutDate).nextAnyTag("td").tagContents(),c=R.getSpan().nextRegExp(n.checkOutTime).nextAnyTag("td").tagContents(),l=getFuzzyDate(R.getDetachedSpan(s+" "+x).innerDate()),m=getFuzzyDate(R.getDetachedSpan(d+" "+c).innerDate()),R.getSpan().nextRegExp(n.modifyUrl).nextLink(),R.getSpan().nextRegExp(n.cancelUrl).nextLink(),g=(h=R.getSpan().nextRegExp(n.price).nextAnyTag("td").tagContents()).innerCapture(/([\d,.]+)/,1),p=h.innerCapture(/([^\d,.]+)/,1).trim(),!(u=R.getSpan().nextRegExp(n.hotelInfo).parentTag("table2").nextTag("table3").nextTag("table3").tagContents()).toString()&&n.reminderHotelName&&(u=R.getSpan().innerCapture(n.reminderHotelName,1)),!u.toString()&&n.reminderHotelName_2)&&(u=R.getDetachedSpan(e.subject).innerCapture(n.reminderHotelName_2,1));(!u.toString()&&n.reminderHotelName_3&&(u=R.getSpan().innerCapture(regExpFormatted(/\1.*\n(.*)\n/,n.reminderHotelName_3),1)),(T=R.getSpan().nextRegExp(n.hotelInfo).parentTag("table2").nextTag("table3").nextTag("table3").nextTag("table3").tagContents())===R.getNullSpan()&&(T=R.getSpan().nextRegExp(n.hotelAddress).parentTag("table4").nextTag("table4").nextTag("table4").tagContents()),T=T.toString().split("[")[0],C=R.getSpan().firstPhoneNumber(),n.emailTitelCancelConfirmation.test(e.subject))&&(g=(h=R.getSpan().nextRegExp(n.cancelPrice).nextTag("td7").nextTag("td7").tagContents()).innerCapture(/([\d,.]+)/,1),p=h.innerCapture(/([^\d,.]+)/,1).trim(),i="Cancelled");return ASSERT(o,u,l,m),[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:r},totalPrice:g,priceCurrency:p,checkinTime:l,checkoutTime:m,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),reservationId:o,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:u,url:S,telephone:C,address:T}}]}}).call();