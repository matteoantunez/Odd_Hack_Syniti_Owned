(function(){return function(e,t,n){var a,r,o,p,i,g,s,c,d,l,T,x,h,m,u,C,S,f,y,v,b,F=Scanner.fromMessage(e);if(F.setLocale(t),regExpFormatted(/\1$/,n.cancelled).test(e.subject)&&(o="Cancelled"),a=(l=F.getSpan().nextText(n.name).nextTag("table4").lastInnerTag("tr4")).innerTag("td4").tagContents(),l.lastInnerTag("td4").tagContents(),r=F.getSpan().innerCapture(regExpFormatted(/\1 (\w+)\s/,n.reservationId),1),p=(b=F.getSpan().nextText(n.price).nextTag("td3").nextTag("td3").tagContents()).innerCapture(/([\d,.]+)/,1),i=b.innerCapture(/([^\d,.]+)/,1),g=F.getSpan().nextText(n.pickup).previousTag("table4").nextTag("td4").nextTag("td4").nextTag("td4").tagContents(),F.getSpan().nextText(n.cancelReservationUrl).nextLink(),v=(C=F.getSpan().nextText(n.pickup).parentAnyTag("table")).innerDate(),(l=C.innerTag("table5").allInnerTagsFiltered("td5").map(function(e){return e.toString()})).length>=2&&(S=l[0],f=F.getDetachedSpan(l.slice(1).join("-"))),y=C.innerText("Phone:").parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1 (.*)/,n.phone),1),u=(T=F.getSpan().nextText(n.dropoff).parentAnyTag("table")).innerDate(),(l=T.innerTag("table5").allInnerTagsFiltered("td5").map(function(e){return e.toString()})).length>=2?(x=l[0],h=F.getDetachedSpan(l.slice(1).join("-")),m=C.innerText(n.phone).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1 (.*)/,n.phone),1)):T.innerText(n.sameLocationAsPickup).exists()&&(x=S,h=f,m=y),d=F.getSpan().nextText(n.provider).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/(.*)\s+\1/,n.provider),1),not(d)&&(d=S),ASSERT(d,a,g,f,v))return[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:p,priceCurrency:i,reservationId:r,reservationStatus:"http://schema.org/Reservation"+(o||"Confirmed"),underName:{"@type":"http://schema.org/Person",name:a},provider:{"@type":"http://schema.org/Organization",name:d},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:g},license:s,color:c},pickupTime:v,pickupLocation:{"@type":"http://schema.org/Place",name:S,telephone:y,address:f},dropoffTime:u,dropoffLocation:{"@type":"http://schema.org/Place",name:x,telephone:m,address:h}}]}}).call();