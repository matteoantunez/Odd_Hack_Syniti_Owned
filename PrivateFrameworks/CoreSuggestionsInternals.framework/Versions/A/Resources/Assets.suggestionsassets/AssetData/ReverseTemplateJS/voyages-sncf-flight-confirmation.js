(function(){return function(e,t,r){var a,n,i,p,s,o,l,g,u,c,h=Scanner.fromMessage(e);h.setLocale(t);var m=[],d=[];r=r.typeOne;var f=h.getSpan().next(r.flightPrefix);f.next(r.confirm).nextTag("td6").nextTag("td6").tagContents();for(var v=f.next(r.passengerPrefix).nextTag("table7").allInnerTagsFiltered("td7"),T=0;T<v.length;){var x="";if(T+2<v.length){var C=v[T+2].innerCapture(r.ticketNumber);x=null!=C?C[1]:""}if(!r.altPassenger.test(v[T+1]))break;d.push({name:v[T].split("\n")[0],ticketNumber:x}),T+=3}if([r.depart,r["return"]].forEach(function(e){for(var t=f.next(e).nextTag("table7").allInnerTagsFiltered("td7"),h=f.next(e).parentTag("td6").nextDate(),v=0;v<t.length;){if(o=t[v],u=t[v+1],l=t[v+3].innerCapture(/(\w+)/,1),s=t[v+3].innerCapture(/(\d{1,2}\s*h?\s*\d{1,2})/,1),s=combineDateAndTime(h,s),c=t[v+4].innerCapture(/(\w+)/,1),g=t[v+4].innerCapture(/(\d{1,2}\s*h?\s*\d{1,2})/,1),g=combineDateAndTime(h,g),p=t[v+5].innerCapture(/(\d+)/,1),"Air France"==(n=t[v+5].innerCapture(/(\w+\s\w+)/,1))&&(i="AF"),a=r.classPrefix.test(t[v+6].getString())?t[v+6].innerCapture(/\S+\s(\S+)/i,1):"",ASSERT(p,s,c))for(var T=0;T<d.length;T++)m.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:n,airlineCode:i,flightNumber:p,departureAirportFuzzy:o,departureAirportCode:l,departureTime:s,arrivalAirportFuzzy:u,arrivalAirportCode:c,arrivalTime:g},underName:{"@type":"http://schema.org/Person",name:d[T].name},reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:d[T].ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatingType:a}}});v+=8}}),m.length)return m}}).call();