(function(){return function(e,t,n){var a,r,i,o,p,s,c,g,x,l,m,u,d,T,f,h,E,S,C,b,v,y=Scanner.fromMessage(e);if(y.setLocale(t),!y.getSpan().nextText(n.rentalReservedText).exists()&&!y.getSpan().nextText(n.reservationCancelledText).exists()&&!y.getSpan().nextText(n.resverationModified).exists())return CONTINUE;if(y.getSpan().nextTag("table1").exists()){if((i=y.getSpan().nextText(n.confirmationNumberPrefix).parentAnyTag("td").tagContents().innerCapture(new RegExp(regExpEscape(n.confirmationNumberPrefix)+"\\s+(\\w+)\\.?"),1)).exists()||(i=y.getSpan().nextText(n.confirmationNumberAlternatePrefix).parentAnyTag("td").tagContents().innerCapture(new RegExp(regExpEscape(n.confirmationNumberAlternatePrefix)+"\\s+(\\w+)\\.?"),1)),n.confirmationEmailSubjectRegExp.test(e.subject)||n.modifiedEmailSubjectRegExp.test(e.subject)){a=(d=y.getSpan().nextText(n.personalInformationHeader).parentAnyTag("td").tagContents().innerCapture(new RegExp(regExpEscape(n.personalInformationHeader)+"\\s+($<name>.*)\\s+($<email>.*)\\s")))?d.$name.trim():null,r=d?d.$email:null,s=y.getSpan().nextText(n.changeReservationText+" <").nextLink(),c=y.getSpan().nextText(n.cancelReservationText+" <").nextLink();var R=y.getSpan().innerCapture(new RegExp(regExpEscape(n.pricingPrefix)+"\\:? ($<totalPrice>[\\d,.]+) ($<priceCurrency>[A-Z]{3})"));g=R?R.$totalPrice:null,x=R?R.$priceCurrency:null}else n.cancellationEmailSubjectRegExp.test(e.subject)&&(a=y.getSpan().innerCapture(new RegExp("\\b(.*),\\s+"+regExpEscape(n.nameSuffix)+"\\."),1).trim(),o="Cancelled");var P=y.getSpan().nextText(n.pickupHeader).nextAnyTag("td").tagContents();v=P.innerDate(),C=P.withStart(v.getEnd()).trim(),b=P.parentAnyTag("table").innerPhoneNumber();var A=P.nextText(n.returnHeader).nextAnyTag("td").tagContents();E=A.innerDate(),f=A.withStart(E.getEnd()).trim(),h=A.parentAnyTag("table").innerPhoneNumber(),not(f)&&(f=C),not(h)&&(h=b),A.nextTag("table6").innerText(n.carHeader).exists()&&(l=A.nextTag("table6").nextTag("td6").nextTag("td6").tagContents())}return ASSERT(i,a,l,C,v)?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:g,priceCurrency:x,reservationId:i,reservationStatus:"http://schema.org/Reservation"+(o||"Confirmed"),checkinUrl:p,modifyReservationUrl:s,cancelReservationUrl:c,underName:{"@type":"http://schema.org/Person",name:a,email:r},provider:{"@type":"http://schema.org/Organization",name:"Budget"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:l},license:m,color:u},pickupTime:v,pickupLocation:{"@type":"http://schema.org/Place",name:S,telephone:b,address:C},dropoffTime:E,dropoffLocation:{"@type":"http://schema.org/Place",name:T,telephone:h,address:f}}]:void 0}}).call();