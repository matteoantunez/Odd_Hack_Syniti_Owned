(function(){return function(e,t,r){function n(e){return e=e.replace(/[^\d\sa-zA-z:\u6642\u5206]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/"),e=getFuzzyDate(U.getDetachedSpan(e))}var a,o,i,p,c,s,m,g,h,u,l,d,f,C,S,v,y,R,T,k,P,U=Scanner.fromMessage(e);U.setLocale(t),a=U.getSpan().innerCapture(r.guestName,1),i=U.getSpan().innerCapture(r.reservationId,1),u=U.getSpan().innerCapture(r.car,1),k=n((P=U.getSpan().innerCapture(r.dates)).$pickupTime.toString()),v=n(P.$dropoffTime.toString());var z=U.getSpan().innerCapture(r.pickup,1);R=z.innerCapture(/(.+)\uff08/,1).toString(),T=z.innerCapture(/TEL\uff1a(.+)/,1).toString();var E=U.getSpan().innerCapture(r.dropoff,1);C=E.innerCapture(/(.+)\uff08/,1).toString(),S=E.innerCapture(/TEL\uff1a(.+)/,1).toString();var L=U.getSpan().nextRegExp(r.price).tagContents().innerCapture(r.price,1);if(g=L.innerCapture(/([\d,.]+)/,1),h=L.innerCapture(/([^\d,.]+)\uff08/,1).trim(),r.confirmSubject.test(e.subject)&&!ASSERT(a,i,k,v,R))return CONTINUE;if(r.cancellationSubject.test(e.subject)){if(!ASSERT(a,i,k,v,R))return CONTINUE;p="Cancelled"}return 0===u.toString().length||null===u?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:g,priceCurrency:h,reservationId:i,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:m,underName:{"@type":"http://schema.org/Person",name:a,email:o},provider:{"@type":"http://schema.org/Organization",name:"Orix"},pickupTime:k,pickupLocation:{"@type":"http://schema.org/Place",name:y,telephone:T,address:R},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:f,telephone:S,address:C}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:g,priceCurrency:h,reservationId:i,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:m,underName:{"@type":"http://schema.org/Person",name:a,email:o},provider:{"@type":"http://schema.org/Organization",name:"Orix"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:u},license:l,color:d},pickupTime:k,pickupLocation:{"@type":"http://schema.org/Place",name:y,telephone:T,address:R},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:f,telephone:S,address:C}}]}}).call();