(function(){return function(e,t,a){var n=Scanner.fromMessage(e);n.setLocale(t);var r,s,o,i,p,g,d,c,m,l,u,h,S,x,v,$,C,T,D,f=loadHelper("eventbrite.com-microdata-parser.js")(e);a.reminder.test(e.subject)&&(m=regExpFormatted(/\1 (.*)/,a.reminder).exec(e.subject)[1],v=n.getSpan().nextDate().parentAnyTag("td").tagContents().innerCapture(a.details));for(var F=0;F<a.confirmations.length;F++)if(a.confirmations[F].test(e.subject)){v=n.getSpan().innerCapture(regExpFormatted(/\1/,a.details));break}if(m=v?v.$eventName:m,f?(s=f[0].name,m||(m=f[0].reservationFor.name)):v&&(s=v.$name),n.getSpan().next(a.seat).exists()){var b=n.getSpan().next(a.seat).parentAnyTag("td").tagContents();c=b.innerCapture(regExpFormatted(/\1:\s+(\w+),?/,a.section),1),d=b.innerCapture(regExpFormatted(/\1:\s+(\w+),?/,a.row),1),g=b.innerCapture(regExpFormatted(/\1:\s+(\w+),?/,a.seat),1)}if(p=n.getSpan().innerCapture(regExpFormatted(/\1\s+(\w+)/,a.ticketNumber),1),o=n.getSpan().nextText(a.orderSummary).nextText(a.total).nextTag("td3").tagContents().innerCapture(/([\d,.]+)/,1),$=(v=n.getSpan().nextText(a.aboutThisEvent).nextAnyTag("table")).getTagNumber(),(v=v.allInnerTagsFiltered("td"+$)).length>1){if(v[0].allInnerDates().length>0){var E=v[0].innerCapture(a.dates);E||(E=v[0].innerCapture(a.datesRange)),E||(f?l=f[0].reservationFor.startDate:E=v[0].innerCapture(a.startDate)),E&&(T=E.$timezone,C=E.$start,u=E.$end,E.$startTime&&(C=E.$start+" "+E.$startTime,u=E.$start+" "+E.$endTime)),l||(l=n.getDetachedSpan(C+" "+T.toString()).innerDate()),u&&(u=n.getDetachedSpan(u+" "+T.toString()).innerDate())}x=v[1].innerAddress(),(v=v[1].innerCapture(/^($<place>.*)\n($<address>[\s\S]+)/))&&(x&&v.$address&&v.$address.getLength()>x.getLength()?(x=v.$address,S=v.$place):f&&!/[$&%]/.test(f[0].reservationFor.location.name)?S=f[0].reservationFor.location.name:/:/.test(v.$place)||(S=v.$place))}else l=n.getSpan().next(a.name).nextDate(),(D=n.getDateDD(l))&&D.endIso8601&&(u=D.endIso8601),2===n.getSpan().allInnerAddresses().length&&(x=n.getSpan().allInnerAddresses()[0]);if(ASSERT(l,m))return[{"@context":"http://schema.org","@type":"http://schema.org/EventReservation",name:s,totalPrice:o,priceCurrency:i,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:p,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:g,seatRow:d,seatSection:c}},reservationFor:{"@type":"http://schema.org/Event",eventStatus:"http://schema.org/Event"+(r||"Confirmed"),name:m,startDate:l,endDate:u,location:{"@type":"http://schema.org/Place",name:S,telephone:h,address:x}}}]}}).call();