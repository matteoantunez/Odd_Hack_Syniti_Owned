(function(){return function(e,t,n){function r(e){return e=e.replace(/[^\d\sa-zA-z:]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/"),e=getFuzzyDate(f.getDetachedSpan(e))}var a,i,o,c,s,p,u,g,l,m,C,h,S,d,f=Scanner.fromMessage(e);if(f.setLocale(t),!n.emailTitelConfirmation.test(e.subject)&&!n.emailTitelCancelConfirmation.test(e.subject))return CONTINUE;s=f.getSpan().innerCapture(n.reservationId,1),a=f.getSpan().innerCapture(n.guestName,1);var T=f.getSpan().innerCapture(n.price,1);if(o=T.innerCapture(/([\d,.]+)/,1),c=T.innerCapture(/([^\d,.]+)/,1),u=r(u=f.getSpan().innerCapture(n.checkInDate,1).toString()+" "+f.getSpan().innerCapture(n.checkInTime,1).toString()),g=r(g=f.getSpan().innerCapture(n.checkOutDate,1).toString()+" "+f.getSpan().innerCapture(n.checkOutTime,1).toString()),m=f.getSpan().innerCapture(n.hotelName,1),C=f.getSpan().innerCapture(n.hotelPhone,1),h=f.getSpan().innerCapture(n.hotelAddress,1),n.emailTitelConfirmation.test(e.subject)){if(!ASSERT(a,s,u,m))return CONTINUE;p="Confirmed"}if(n.emailTitelCancelConfirmation.test(e.subject)){if(!ASSERT(a,s,u,m))return CONTINUE;p="Cancelled"}return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:i},totalPrice:o,priceCurrency:c,checkinTime:u,checkoutTime:g,modifyReservationUrl:S,cancelReservationUrl:d,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),reservationId:s,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:m,url:l,telephone:C,address:h}}]}}).call();