(function(){return function(e,t,n){function a(e){return e=e.replace(/[^\d\sa-zA-z:]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/"),e=getFuzzyDate(h.getDetachedSpan(e))}var r,i,o,s,g,p,c,u,C,l,m,x,d,h=Scanner.fromMessage(e);if(h.setLocale(t),!n.emailTitelConfirmation.test(e.subject)&&!n.emailTitelCancelConfirmation.test(e.subject))return CONTINUE;g=h.getSpan().nextRegExp(n.reservationId).next(/([A-Za-z\d]+?)\s/).tagContents(),r=h.getSpan().nextRegExp(n.guestName).next(/[\uff1a\]].{3,}?[\n\[]/).innerCapture(/[\uff1a\]](.{3,}?)[\n\[]/,1).tagContents();var S=h.getSpan().nextRegExp(n.price).nextAnyTag("td").tagContents();if(o=S.innerCapture(/([\d,.]+)/,1),s=S.innerCapture(/([^\d,.]+)/,1),c=a(c=h.getSpan().nextRegExp(n.checkInDate).next(/[\uff1a\]].{6,}?[\n\[]/).innerCapture(/[\uff1a\]](.{6,}?)[\n\[]/,1).tagContents().toString()),u=a(u=h.getSpan().nextRegExp(n.checkOutDate).next(/[\uff1a\]].{6,}?[\n\[]/).innerCapture(/[\uff1a\]](.{6,}?)[\n\[]/,1).tagContents().toString()),C=h.getSpan().nextRegExp(n.hotelName).next(/[\uff1a\]].{3,}?[\n\[]/).innerCapture(/[\uff1a\]](.{3,}?)[\n\[]/,1).tagContents().innerCapture(regExpFormatted(/(.+)\s</),1),m=h.getSpan().nextRegExp(n.hotelAddress).next(/[\uff1a\]].{6,}?[\n\[]/).innerCapture(/[\uff1a\]](.{6,}?)[\n\[]/,1).tagContents(),l=h.getSpan().nextRegExp(n.hotelPhone).next(/[\uff1a\]].{4,}?[\n\[]/).innerCapture(/[\uff1a\]](.{4,}?)[\n\[]/,1).tagContents(),n.emailTitelConfirmation.test(e.subject)){if(!ASSERT(r,g,c,u,C))return CONTINUE;p="Confirmed"}return n.emailTitelCancelConfirmation.test(e.subject)&&(p="Cancelled"),[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:i},totalPrice:o,priceCurrency:s,checkinTime:c,checkoutTime:u,modifyReservationUrl:x,cancelReservationUrl:d,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),reservationId:g,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:C,telephone:l,address:m}}]}}).call();