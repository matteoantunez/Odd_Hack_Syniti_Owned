(function(){return function(e,t,n){var a,r,i,o,g,s,c,p,d,l,x,m,C,T,u,S,h,v,f=Scanner.fromMessage(e);if(f.setLocale(t),!(n.emailTitelConfirmation.test(e.subject)||n.emailTitelCancelConfirmation.test(e.subject)||n.emailTitelModifyConfirmation.test(e.subject)))return CONTINUE;var y=f.getSpan().nextText(n.hotelInfo).nextTag("table1").tagContents();return T=y.innerCapture(/(.+)\n/,1),u=y.innerPhoneNumber(),S=y.innerAddress(),S=y=(y=y.toString().replace(T.toString()+"\n","")).toString().replace(u.toString(),""),g=f.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),a=f.getSpan().nextText(n.guestName).nextTag("td1").tagContents(),p=f.getSpan().nextText(n.arrivalDate).nextTag("td1").tagContents().innerDate(),x=f.getSpan().nextText(n.departureDate).nextTag("td1").tagContents().innerDate(),c=f.getSpan().nextText(n.checkInPolicy).nextTag("td1").tagContents().innerDate(),(l=f.getSpan().nextText(n.checkOutPolicy).nextTag("td1").tagContents()).toString()===n.noon?l="T12:00:00":m=l.innerDate(),d=combineDateAndTime(p,c),m=combineDateAndTime(x,l),i=f.getSpan().nextText(n.price).nextTag("td1").tagContents().innerCapture(/([\d,.]+)/,1),o=f.getSpan().nextText(n.price).nextTag("td1").tagContents().innerCapture(/([^\d,.]+)/,1).trim(),v=h=f.getSpan().nextText(n.modifyUrl).nextTag("td1").tagContents().innerLink(),s="Confirmed",n.emailTitelCancelConfirmation.test(e.subject)&&(g=f.getSpan().nextRegExp(n.reservationIdCancel).tagContents().innerCapture(n.reservationIdCancel,1),s="Cancelled"),ASSERT(d,m,S)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:r},totalPrice:i,priceCurrency:o,checkinTime:d,checkoutTime:m,modifyReservationUrl:h,cancelReservationUrl:v,reservationStatus:"http://schema.org/Reservation"+(s||"Confirmed"),reservationId:g,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:T,url:C,telephone:u,address:S}}]:void 0}}).call();