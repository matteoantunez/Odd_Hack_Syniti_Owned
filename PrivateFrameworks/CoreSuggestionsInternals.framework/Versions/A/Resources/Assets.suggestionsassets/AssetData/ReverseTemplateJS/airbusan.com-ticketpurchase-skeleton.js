(function(){return function(e,t,r){var a,n,s,i=Scanner.fromMessage(e);i.setLocale(t);var g,p,o,l,d,m,u,h,T,y,A,c,v,x,C,b,N=[],f={};d="air busan",n=(p=(l=i.getSpan()).next(r.reservationId_prefix).nextAnyTag("td")).tagContents(),(p=l.next(r.fromPerson).nextAnyTag("tr").nextAnyTag("tr").nextAnyTag("tr")).nextAnyTag("td").tagContents(),p=l.next(r.payMethod).nextAnyTag("td"),p=l.next(r.flightSummary).nextAnyTag("tr");do{g=p.nextAnyTag("td").tagContents().innerCapture(/([\d-]+)\s*(\(.*\))/,1),h=(c=(h=p.nextAnyTag("td").nextAnyTag("td").tagContents()).innerCapture(/\s*(.*)\s.*\s(.*)/))[1],T=null,A=c[2],c=null,u=g+" "+(b=(b=(p=p.nextAnyTag("td").nextAnyTag("td").nextAnyTag("td")).tagContents()).innerCapture(/(\d+\:\d+)\s*.*?\s*(\d+\:\d+)/))[1],u=getFuzzyDate(i.getDetachedSpan(u).firstDate()),y=i.getDetachedSpan(y=g+" "+b[2]).innerDate(),m=(o=p.nextAnyTag("td").tagContents()).innerCapture(/\s*([A-z]+)\s?(\d+)/,1),o=o.innerCapture(/\s*([A-z]+)\s?(\d+)/,2),ASSERT(m,o,h,u,A,y)&&N.push({reservationId:n,airlineName:d,airlineCode:m,flightNumber:o,departureAirport:h,departureCode:T,departureTime:u,arrivalAirport:A,arrivalCode:c,arrivalTime:y,passengers:f}),p=p.nextAnyTag("tr")}while(p.firstTag("td4").tagContents().innerCapture(/^(\d+)\s*/,1)!==i.getNullSpan());var S=l.next(r.passenger).parentAnyTag("table").allInnerTags("td4"),z=l.next(r.passenger).parentAnyTag("table").allInnerTags("th4").length;/\uc5d0\uc5b4\ubd80\uc0b0 \uc5ec\uc815\uc548\ub0b4\uc11c/.test(e.subject)&&(S=l.next(r.passenger).next(r.passenger).parentAnyTag("table").allInnerTags("td4"),z=l.next(r.passenger).next(r.passenger).parentAnyTag("table").allInnerTags("th4").length);for(var I=0;I<S.length/z;I++){var k=S[z*I].tagContents();ASSERT(k)&&(f[k.toString()]={name:k,seats:{},seatingType:C,ticketNumber:null,totalPrice:v,priceCurrency:x})}var F=[];for(I=0;I<N.length;I++)for(var D=N[I],M=Object.keys(D.passengers),P=0;P<M.length;P++){var R=D.passengers[M[P]],j={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:D.airlineName,airlineCode:D.airlineCode,flightNumber:D.flightNumber,departureAirportFuzzy:D.departureAirport,departureAirportCode:D.departureCode,departureTime:D.departureTime,arrivalAirportFuzzy:D.arrivalAirport,arrivalAirportCode:D.arrivalCode,arrivalTime:D.arrivalTime},underName:{"@type":"http://schema.org/Person",name:R.name},checkinUrl:s,reservationId:D.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:a,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:R.seats[D.flightNumber],seatingType:R.seatingType}}};valid(R.membershipNumber,R.programName)&&(j.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:R.membershipNumber,programName:R.programName}),F.push(j)}if(F.length)return F}}).call();