(function(){return function(e,t,n){var a,r,i,g,o,s,p,c,d,m,x,u,C,l,T,h,E,S,y=Scanner.fromMessage(e);if(y.setLocale(t),!n.emailTitelConfirmation.test(e.subject)&&!n.emailTitelCancelConfirmation.test(e.subject))return CONTINUE;o=y.getSpan().nextRegExp(n.reservationId).parentAnyTag("td").tagContents().innerCapture(n.reservationIdRegExp,1),a=y.getSpan().nextRegExp(n.guestName).nextAnyTag("td").tagContents(),r=y.getSpan().nextRegExp(n.guestEmail).nextAnyTag("td").tagContents(),c=y.getSpan().nextRegExp(n.checkInDate).nextAnyTag("td").tagContents(),x=y.getSpan().nextRegExp(n.checkOutDate).nextAnyTag("td").tagContents(),p=y.getSpan().nextRegExp(n.checkInTime).nextAnyTag("td").tagContents().innerDate(),m=y.getSpan().nextRegExp(n.checkOutTime).nextAnyTag("td").tagContents().innerDate(),d=getFuzzyDate(y.getDetachedSpan(c+" "+p).innerDate()),u=getFuzzyDate(y.getDetachedSpan(x+" "+m).innerDate());var R=y.getSpan().nextRegExp(n.price).nextAnyTag("td").tagContents();i=R.innerCapture(/([\d,.]+)/,1),g=R.innerCapture(/([^\d,.]+)/,1).trim();var f=y.getSpan().nextRegExp(n.reservationId).parentTag("table3").nextTag("td3").tagContents();if(l=f.innerCapture(regExpFormatted(/(.+)</),1),C=f.innerLink(),T=f.innerPhoneNumber(),h=f.lastInnerAddress(),E=y.getSpan().nextRegExp(n.modifyUrl).parentAnyTag("td").tagContents().innerLink(),n.emailTitelConfirmation.test(e.subject)){if(!ASSERT(a,o,d,u,h))return CONTINUE;s="Confirmed"}if(n.emailTitelCancelConfirmation.test(e.subject)){if(!ASSERT(a,o,d,u,h))return CONTINUE;s="Cancelled"}return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:r},totalPrice:i,priceCurrency:g,checkinTime:d,checkoutTime:u,modifyReservationUrl:E,cancelReservationUrl:S,reservationStatus:"http://schema.org/Reservation"+(s||"Confirmed"),reservationId:o,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:l,url:C,telephone:T,address:h}}]}}).call();