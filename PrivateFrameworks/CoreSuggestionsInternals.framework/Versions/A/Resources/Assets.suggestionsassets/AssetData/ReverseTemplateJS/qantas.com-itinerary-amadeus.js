(function(){return function(e,r,t){var a,i,n,p=Scanner.fromMessage(e);p.setLocale(r);var o,s,g,m,u,l,d,h,v,c,S,$,C,N,b,y,f,T=[],F={};if(i=p.getSpan().innerCapture(regExpFormatted(/\1\s+(.*)/,t.reservationId),1),a=p.getSpan().innerCapture(regExpFormatted(/\1\s+(.*)/,t.ticketNumber),1),(s=p.getSpan().allInnerCapture(regExpFormatted(/\1\s+(.*)/,t.name),1)).length)for(var A=0;A<s.length;A++)F[o=s[A]]={name:o,seats:{},seatingType:{}};if(!Object.keys(F).length)return CONTINUE;for((g=p.getSpan().allInnerCapture(regExpFormatted(/(.*\S+\s+\1[\s\S]+?\2)/,t.depart,t.duration),1)).length<1&&(g=p.getSpan().allInnerCapture(regExpFormatted(/(.*\S+\s+\1[\s\S]+?\2)/,t.depart,t.kilo),1)),C=0;C<g.length;C++)(b=(N=g[C]).innerCapture(/($<airline>.+?)\s{2,}($<airlineCode>\D+)($<flightNumber>\d+)\s{2,}($<seatingType>.+?)\s{2,}/)).$airline,u=b.$airlineCode,m=b.$flightNumber,$=b.$seatingType,h=(l=N.innerCapture(regExpFormatted(/\1\s+($<departureDate>.+?)\s+($<departureAirport>.+?)\s{2,}($<departureHour>\d{2})($<departureMinute>\d{2})/,t.depart))).$departureAirport,d=p.getDetachedSpan(l.$departureDate.toString()+" "+l.$departureHour.toString()+":"+l.$departureMinute.toString()).innerDate(),S=(v=N.innerCapture(regExpFormatted(/\1\s+($<arrivalDate>.+?)\s+($<arrivalAirport>.+?)\s{2,}($<arrivalHour>\d{2})($<arrivalMinute>\d{2})/,t.arrival))).$arrivalAirport,c=p.getDetachedSpan(v.$arrivalDate.toString()+" "+v.$arrivalHour.toString()+":"+v.$arrivalMinute.toString()).innerDate(),ASSERT(u,m,d,h,c,S)&&T.push({airlineCode:u,flightNumber:m,departureAirport:h,departureTime:d,arrivalAirport:S,arrivalTime:c,passengers:F,seatingType:$});(y=p.getSpan().innerCapture(regExpFormatted(/\1\s+(.*?)\s+([\d.]+)/,t.price)))&&(f=y[1],y=y[2]);var E=[];for(C=0;C<T.length;C++)for(var k=T[C],x=Object.keys(k.passengers),D=0;D<x.length;D++){var M=k.passengers[x[D]],z={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:k.airlineName,airlineCode:k.airlineCode,flightNumber:k.flightNumber,departureAirportFuzzy:k.departureAirport,departureAirportCode:k.departureCode,departureTime:k.departureTime,arrivalAirportFuzzy:k.arrivalAirport,arrivalAirportCode:k.arrivalCode,arrivalTime:k.arrivalTime},underName:{"@type":"http://schema.org/Person",name:M.name},checkinUrl:n,reservationId:i,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:y,priceCurrency:f,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:a,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:M.seats[k.airlineCode.toString()+k.flightNumber.toString()],seatingType:k.seatingType}}};valid(M.membershipNumber,M.programName)&&(z.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:M.membershipNumber,programName:M.programName}),E.push(z)}return E.length?E:void 0}}).call();