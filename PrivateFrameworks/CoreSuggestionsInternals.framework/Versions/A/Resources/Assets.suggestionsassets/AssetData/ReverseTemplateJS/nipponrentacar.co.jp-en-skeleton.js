(function(){return function(e,t,n){var r,a,o,p,i,s,c,g,m,u,h,l,d,C,f,v,R,S,x,y,E=Scanner.fromMessage(e);if(E.setLocale(t),n.confirmSubject.test(e.subject)){r=E.getSpan().nextRegExp(n.guestName).tagContents().innerCapture(n.guestName,1)+" "+E.getSpan().nextRegExp(n.guestName).tagContents().innerCapture(n.guestName,2),a=E.getSpan().nextRegExp(n.guestEmail).tagContents().innerCapture(n.guestEmail,1),o=E.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1);var N=E.getSpan().nextRegExp(n.pickup).tagContents().innerCapture(n.pickup,1);y=N.innerDate(),S=N.innerCapture(/.+?\s.+?\s.+?\s.+?\s(.+)/,1).toString().trim();var k=E.getSpan().nextRegExp(n.dropoff).tagContents().innerCapture(n.dropoff,1);v=k.innerDate(),C=k.innerCapture(/.+?\s.+?\s.+?\s.+?\s(.+)/,1).toString().trim(),u=E.getSpan().nextRegExp(n.car).tagContents().innerCapture(n.car,1);var P=E.getSpan().nextRegExp(n.price).tagContents().innerCapture(n.price,1);if(g=P.innerCapture(/([\d,.]+)/,1),m=P.innerCapture(/([^\d,.]+)/,1).trim(),!ASSERT(r,o,y,v,S,C))return CONTINUE}if(n.cancellationSubject.test(e.subject)){if(!ASSERT(r,o))return CONTINUE;p="Cancelled"}return 0===u.toString().length||null===u?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:g,priceCurrency:m,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:i,modifyReservationUrl:s,cancelReservationUrl:c,underName:{"@type":"http://schema.org/Person",name:r,email:a},provider:{"@type":"http://schema.org/Organization",name:"Nippon"},pickupTime:y,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:x,address:S},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:d,telephone:f,address:C}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:g,priceCurrency:m,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:i,modifyReservationUrl:s,cancelReservationUrl:c,underName:{"@type":"http://schema.org/Person",name:r,email:a},provider:{"@type":"http://schema.org/Organization",name:"Nippon"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:u},license:h,color:l},pickupTime:y,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:x,address:S},dropoffTime:v,dropoffLocation:{"@type":"http://schema.org/Place",name:d,telephone:f,address:C}}]}}).call();