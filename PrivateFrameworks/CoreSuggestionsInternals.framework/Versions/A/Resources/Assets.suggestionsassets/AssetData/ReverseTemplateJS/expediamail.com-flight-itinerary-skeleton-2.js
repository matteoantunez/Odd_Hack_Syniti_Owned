(function(){return function(e,r,t){if(!e||!r||!t||/not yet confirmed/.test(e.plain))return CONTINUE;e.plain=e.plain.replace(/(?:mar|jue|mi\xe9|vie)[^\d]{0,5}(\d{1,2}) de (\w{2,4})/g,"$2 $1"),e.plain=e.plain.replace(/ago (\d{2})/,"aug $1");var a,n,i,p,o,l,u,d,s,g=Scanner.fromMessage(e);g.setLocale(r);var v=[],m=[],h=/\s\((\w{3})\)/;for(a=g.getSpan().next(t.reservationId).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(\d+)/,t.reservationId),1),n=g.getSpan().allInnerCapture(t.cabin,1),y=0;y<n.length;y++){var c;l={};var C=(d=n[y]).previous(t.date).nextAbsoluteDate();C===s&&unSpanDate_(c)>unSpanDate_(C)&&(C=c),p=d.previousDate(),/\d?\d\s?[:h\.]\s?\d{2}(?:AM|PM)?/i.test(p)||(p=p.previousDate()),l.arrivalCode=p.previousAnyTag("tr").innerCapture(h,1),l.arrivalCode.isNullSpan_&&(l.arrivalCode=p.previousAnyTag("tr").previousAnyTag("tr").previousAnyTag("tr").innerCapture(h,1)),i=l.arrivalCode.previousDate(),l.departureCode=i.previousAnyTag("td").innerCapture(h,1),l.departureCode.isNullSpan_&&(l.departureCode=i.previousAnyTag("td").previousAnyTag("td").innerCapture(h,1)),u=l.departureCode.previousAnyTag("td").tagContents().innerCapture(/($<airline>.*)\s($<flightNumber>\d+)/),l.airlineName=u?u.$airline:null,l.flightNumber=u?u.$flightNumber:null,l.departureTime=combineDateAndTime(C,i),/\+\d day/.test(d.previousAnyTag("table"))&&(c=C=p.nextDate()),l.arrivalTime=combineDateAndTime(C,p),l.seatingType=g.getSpan().next(t.cabin).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1 (.+)/,t.cabin),2),ASSERT(l.departureCode,l.arrivalCode,l.airlineName,l.flightNumber,l.arrivalTime,l.departureTime)&&v.push(l),n[y+1]&&(s=n[y+1].previous(t.date).nextAbsoluteDate())}if((o=g.getSpan().next(t.passengers).collapseToEnd().withEnd(g.getSpan().next(t.passengerEnd).getStart()).allInnerTags("td6")).length)for(y=0;y<o.length;y++)f=o[y].tagContents().innerCapture(/(.*)/,1),m.push(f);for(var T=[],y=0;y<v.length;y++){l=v[y];for(var A=0;A<m.length;A++){var f;T.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:l.airlineName,airlineCode:l.airlineCode,flightNumber:l.flightNumber,departureAirportFuzzy:l.departureAirport,departureAirportCode:l.departureCode,departureTime:l.departureTime,arrivalAirportFuzzy:l.arrivalAirport,arrivalAirportCode:l.arrivalCode,arrivalTime:l.arrivalTime},underName:{"@type":"http://schema.org/Person",name:f=m[A]},checkinUrl:l.checkinUrl,reservationId:a,reservationStatus:"http://schema.org/Reservation"+(l.reservationStatus||"Confirmed"),totalPrice:null,priceCurrency:null,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:null,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:null,seatingType:l.seatingType}}})}}return T.length?T:void 0}}).call();