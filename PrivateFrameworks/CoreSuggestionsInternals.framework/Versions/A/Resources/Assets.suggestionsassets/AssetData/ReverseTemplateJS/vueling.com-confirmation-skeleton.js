(function(){return function(e,t,r){var n=Scanner.fromMessage(e),a=n.getSpan();n.setLocale(t);var i,l,o,s,g,p,u=[],c={},d=[],h=a.nextText(r.contactDetailsPrefix).nextAnyTag("table").nextAnyTag("tr").allInnerTags("td8"),C=a.next(r.passengerDetailsPrefix).next(r.underPersonNamePrefix).parentAnyTag("table").allInnerTags("tr7"),m=[];if(C.length<1){C=a.next(r.passengerDetailsPrefix).nextTag("table7").allInnerTagsFiltered("tr8");for(var T=0;T<C.length;T++)c[(g=C[T]).toString()]={name:g,seats:m,seatingType:{},ticketNumber:null,totalPrice:null,priceCurrency:null}}else for(T=1;T<C.length;T++){g=C[T].nextTag("td8").tagContents().trim(),p=C[T].allInnerTags("td7"),m=[];for(var f=1;f<p.length;f++)for(var v=p[f].tagContents().split("/"),x=0;x<v.length;x++)m.push(v[x].trim());c[g.toString()]={name:g,seats:m,seatingType:{},ticketNumber:null,totalPrice:null,priceCurrency:null}}h[2].tagContents(),h[4]&&h[4].tagContents(),i=a.nextText(r.reservationIdPrefix).nextAnyTag("td").tagContents(),a.nextText(r.flightBlock).parentTag("table8").allInnerTags("table9").forEach(function(e){for(var t=e.allInnerTags("tr9").filter(function(e){var t=e.tagContents().toString();return 0!==e.tagContents().toString().length&&-1===t.indexOf(r.flightBlock)&&-1===t.indexOf(r.flightBlock_2)}),a=t.length,i=0;i<a;i+=3){var o,s,g,p,d,h,C,m,T=t[i+2].allInnerTags("td10");o=t[i+1].tagContents().innerCapture(/.*?\s(\D{2})(\d+)/)[1],s=t[i+1].tagContents().innerCapture(/.*?\s(\D{2})(\d+)/)[2];var f=t[i].tagContents().toString();g=n.getDetachedSpan(f+" "+T[2].tagContents().toString()).innerDate(),p=T[0].tagContents().innerCapture(/(.*)?\s\((\D{3})\)/)[1],d=T[0].tagContents().innerCapture(/(.*)?\s\((\D{3})\)/)[2],h=n.getDetachedSpan(f+" "+T[5].tagContents().toString()).innerDate(),C=T[3].tagContents().innerCapture(/(.*)?\s\((\D{3})\)/)[1],m=T[3].tagContents().innerCapture(/(.*)?\s\((\D{3})\)/)[2],unSpanDate_(g)>unSpanDate_(h)&&(h=modifyDate(h,1)),ASSERT(c,o,p||d,g,C||m,h)&&u.push({airlineName:null,airlineCode:o,flightNumber:s,departureDateTime:g,departureAirport:p,departureAirportCode:d,arrivalDateTime:h,arrivalAirport:C,arrivalAirportCode:m,seatNumber:l,seatType:null})}});for(f=0;f<u.length;f++){var y=u[f],D=Object.keys(c);for(T=0;T<D.length;T++)d.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:y.airlineName,airlineCode:y.airlineCode,flightNumber:y.flightNumber,departureAirportFuzzy:y.departureAirport,departureAirportCode:y.departureAirportCode,departureTime:y.departureDateTime,arrivalAirportFuzzy:y.arrivalAirport,arrivalAirportCode:y.arrivalAirportCode,arrivalTime:y.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:D[T]},checkinUrl:s,reservationId:i,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:o,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:c[D[T]].seats[f],seatingType:y.seatingType}}})}return d.length>=1?d:CONTINUE}}).call();