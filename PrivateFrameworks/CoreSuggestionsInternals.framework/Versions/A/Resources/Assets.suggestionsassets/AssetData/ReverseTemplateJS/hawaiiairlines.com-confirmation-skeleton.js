(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var n,i,p,o,d,g,l,u,s,m,T,y,c,h,A,C=[],v=[];for(n=a.getSpan().next(t.reservationId).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s+(.*)/,t.reservationId),1),i=a.getSpan().next(t.itinerary).parentTag("table3").allInnerTransitInformation(),y=a.getSpan().withStart(a.getSpan().next(t.passengerInfo)).withEnd(a.getSpan().next(t.price)).allInnerCapture(t.frequentFlyer,1),p=0;p<y.length;p++){for((T={}).name=y[p].previousAnyTag("td").previousAnyTag("td").tagContents(),T.seat={},T.seatingType={},h=y[p].nextAnyTag("table").allInnerTagsFiltered("tr6"),c=0;c<h.length;c++)A=h[c].innerCapture(/(\d+)\s*\[/,1).toString(),T.seat[A]=h[c].nextAnyTag("td").nextAnyTag("td").tagContents(),T.seatingType[A]=T.seat[A].nextAnyTag("td").tagContents();v.push(T)}for(u=(l=a.getSpan().next(t.price).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1.*=\s+($<currency>[^\d,.]+)($<price>[\d,.]+)/,t.price))).$price,s=l.$currency,p=0;p<i.length;p++)o={},d=i[p].previousAnyTag("td").tagContents().innerCapture(regExpFormatted(/($<departureAirport>.*)\(($<departureCode>.*)\)\s\1\s+($<arrivalAirport>.*)\(($<arrivalCode>.*)\).*\n($<date>.*).*\n($<departureTime>.*\D{2})($<arrivalTime>.*\D{2})\s+/,t.to)),o.departureAirportFuzzy=d.$departureAirport.trim(),o.departureAirportCode=d.$departureCode,o.arrivalAirportFuzzy=d.$arrivalAirport.trim(),o.arrivalAirportCode=d.$arrivalCode,o.departureTime=combineDateAndTime(d.$date.innerDate(),a.getDetachedSpan(d.$departureTime.toString().replace(/\x96/,"")).innerDate()),o.arrivalTime=combineDateAndTime(d.$date.innerDate(),a.getDetachedSpan(d.$arrivalTime.toString().replace(/\x96/,"")).innerDate()),o.seatingType=i[p].nextAnyTag("td").tagContents().innerCapture(/\n(.*)/,1),g=i[p].innerCapture(/($<airlineCode>\D+)($<flightNumber>\d+)/),o.airlineCode=g.$airlineCode.trim(),o.flightNumber=g.$flightNumber,ASSERT(o.departureAirportCode,o.arrivalAirportCode,o.departureTime,o.arrivalTime,o.airlineCode,o.flightNumber)&&C.push(o);m=a.getSpan().next(t.ticketNumber).nextAnyTag("tr").nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").tagContents();var $=[];for(p=0;p<C.length;p++)for(o=C[p],c=0;c<v.length;c++){var f={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:o.airlineName,airlineCode:o.airlineCode,flightNumber:o.flightNumber,departureAirportFuzzy:o.departureAirportFuzzy,departureAirportCode:o.departureAirportCode,departureTime:o.departureTime,arrivalAirportFuzzy:o.arrivalAirportFuzzy,arrivalAirportCode:o.arrivalAirportCode,arrivalTime:o.arrivalTime},underName:{"@type":"http://schema.org/Person",name:(T=v[c]).name},reservationId:n,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:u,priceCurrency:s,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:m,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:T.seat[o.flightNumber.toString()],seatingType:T.seatingType[o.flightNumber.toString()]}}};$.push(f)}if($.length)return $}}).call();