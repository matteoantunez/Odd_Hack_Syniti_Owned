(function(){return function(e,t,n){var a,r,o,s,g,i,d,c,p,m,x,u,T,h=Scanner.fromMessage(e);h.setLocale(t),a=h.getSpan().next(n.underPersonName).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s*(.*)/,n.underPersonName),1),r=e.to&&e.to.toString(),d=h.getSpan().innerCapture(regExpFormatted(/\1\s+?(\d+)\)/,n.reservationId),1),g=(o=h.getSpan().nextText(n.hotelDetails).nextTag("table9").nextAnyTag("td").tagContents()).nextAnyTag("td").tagContents(),x=h.getSpan().next(n.checkIn).nextAnyTag("td").tagContents(),u=h.getSpan().next(n.checkOut).nextAnyTag("td").tagContents();var l=h.getDateDD(h.getSpan().next(n.dates).nextAnyTag("td").innerDate());l&&l.iso8601&&l.endIso8601&&(c=combineDateAndTime(l.iso8601,x),p=combineDateAndTime(l.endIso8601,u));var C=h.getSpan().nextText(n.totalPrice).parentAnyTag("td").tagContents();C.innerCapture(/(\d+)/,1).exists()||(C=C.nextAnyTag("td").tagContents()),T=C.innerCapture(/(.)\d+/,1),m=C.innerCapture(/([\d,.]+)/,1);var y=n.cancelled.test(e.plain)?"Cancelled":"Confirmed";return ASSERT(OR(a,r),g,c)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:r},totalPrice:m,priceCurrency:T,checkinTime:c,checkoutTime:p,reservationStatus:"http://schema.org/Reservation"+y,reservationId:d,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:o,telephone:s,url:i,address:g}}]:CONTINUE}}).call();