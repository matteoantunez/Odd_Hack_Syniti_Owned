(function(){return function(e,t,r){var a=Scanner.fromMessage(e);a.setLocale(t);var n,i,g,o,l,p=a.getSpan(),m="Confirmed",s=[],d=[],T=p.next(r.reservationId_prefix).parentAnyTag("td").tagContents().toString();return(n=/:\n(.*)\n/.exec(T))||(n=/: (.*)/.exec(T)),2===n.length&&(n=n[1]),(l=p.next(r.flightDetails_prefix).nextAnyTag("table").nextAnyTag("table").allInnerTags("tr5").filter(function(e){return e.toString().indexOf(r.airportsName_prefix)>-1})).length||(l=p.next(r.flightDetails_prefix).nextAnyTag("table").nextAnyTag("table").allInnerTags("tr4").filter(function(e){return e.toString().indexOf(r.airportsName_prefix)>-1})),l.forEach(function(e){var t,a,n,i,g,o,l,m,d,T,x,u="Flybe",A="BE",h=e.nextAnyTag("td").innerDate(),y=e.nextAnyTag("td").nextAnyTag("td").tagContents().toString().trim();t=/([0-9]{3,4})/.exec(y)[1];var c=e.nextAnyTag("td").nextAnyTag("td").nextAnyTag("td"),f=r.airportsName_regex.exec(c.tagContents());g=f[1],d=f[2],n=e.nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").innerDate(),l=e.nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").innerDate(),i=combineDateAndTime(h,n),m=combineDateAndTime(h,l),Date.parse(i)>Date.parse(m)&&(m=modifyDate(m,1)),o=p.next(y).next(y).nextAnyTag("td").tagContents(),T=p.next(y).next(y).nextAnyTag("td").nextAnyTag("td").tagContents(),(x=p.next(r.flightDetails_prefix).nextAnyTag("table").nextAnyTag("table").nextAnyTag("table").allInnerTags("tr5").filter(function(e){return 1===e.allInnerTags("th5").length&&""!==e.allInnerTags("th5")[0].tagContents().toString()})).length||(x=p.next(r.flightDetails_prefix).nextAnyTag("table").nextAnyTag("table").nextAnyTag("table").allInnerTags("tr4").filter(function(e){return 1===e.allInnerTags("th4").length&&""!==e.allInnerTags("th4")[0].tagContents().toString()})),x.forEach(function(e){var r;r=e.nextAnyTag("th").tagContents(),s.push({airlineName:u,airlineCode:A,flightNumber:t,departureDateTime:i,departureAirport:g,departureAirportCode:o,arrivalDateTime:m,arrivalAirport:d,arrivalAirportCode:T,ticketNumber:a,underPersonName:r})})}),s.forEach(function(e){ASSERT(e.departureDateTime,e.arrivalDateTime,e.departureAirport,e.arrivalAirport,e.flightNumber,e.airlineCode),d.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:e.airlineName,airlineCode:e.airlineCode,flightNumber:e.flightNumber,departureAirportFuzzy:e.departureAirport,departureAirportCode:e.departureAirportCode,departureTime:e.departureDateTime,arrivalAirportFuzzy:e.arrivalAirport,arrivalAirportCode:e.arrivalAirportCode,arrivalTime:e.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:e.underPersonName},checkinUrl:o,reservationId:n,reservationStatus:"http://schema.org/Reservation"+m,totalPrice:i,priceCurrency:g,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:e.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:e.seatNumber,seatingType:e.seatType}},programMembershipUsed:{"@type":"http://schema.org/ProgramMembership",membershipNumber:e.membershipNumber,programName:e.programName}})}),d.length>=1?d:CONTINUE}}).call();