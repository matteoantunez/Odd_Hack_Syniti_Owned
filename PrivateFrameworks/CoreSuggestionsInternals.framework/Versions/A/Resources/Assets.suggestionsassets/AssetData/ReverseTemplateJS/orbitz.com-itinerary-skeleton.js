(function(){return function(e,t,r){var a,n,i,o,g,p,d=Scanner.fromMessage(e);d.setLocale(t);var m=d.getSpan().next(r.reservationIdPrefix).nextTag("td4").tagContents(),x=d.getSpan().next(r.departureHeader),s=x.next(r.departurePrefix).nextTag("td1").tagContents().innerCapture(regExpFormatted(/\1(.+)\./,r.departurePrefix),1),u=x.nextTag("table2").nextTag("td2").tagContents(),l=x.nextTag("table2").nextTag("td2").nextTag("td2").tagContents().innerCapture(/($<airportName>.+)\(($<airportCode>.+)\)/),C=l.$airportName.trim(),T=l.$airportCode,c=x.next(r.arrivalPrefix).parentTag("td1").tagContents().innerCapture(regExpFormatted(/\1(.+)\./,r.arrivalPrefix),1);u=getFuzzyDate(d.getDetachedSpan(u.toString())),s=getFuzzyDate(d.getDetachedSpan(s.toString())),s=combineDateAndTime(u,s),c=getFuzzyDate(d.getDetachedSpan(c.toString())),c=combineDateAndTime(u,c);var h=x.nextTag("table2").nextTag("table2").nextTag("td2").nextTag("td2").tagContents().innerCapture(/($<airportName>.+)\(($<airportCode>.+)\)/),v=h.$airportName.trim(),S=h.$airportCode,f=x.nextTag("table3").nextTag("td3").nextTag("td3").tagContents().innerCapture(/($<airlineName>\D+).*\s(\D+)($<flightNumber>\d+)\n/);o=f.$airlineName.trim(),i=f.$flightNumber.trim(),p=d.getSpan().nextText(r.passengerPrefix).nextTag("td2").tagContents();var y=d.getSpan().nextText(r.totalCostPrefix).nextTag("td2").tagContents();if(a=y.innerCapture(/([\d,.-]+)/,1),n=y.innerCapture(/([^\d,.-]+)/,1).trim(),ASSERT(s,T,c,S))return[{"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:o,airlineCode:g,flightNumber:i,departureAirportFuzzy:C,departureAirportCode:T,departureTime:s,arrivalAirportFuzzy:v,arrivalAirportCode:S,arrivalTime:c},underName:{"@type":"http://schema.org/Person",name:p,email:""},reservationId:m,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:a,priceCurrency:n,reservedTicket:{"@type":"http://schema.org/Ticket",ticketedSeat:{"@type":"http://schema.org/Seat"}}}]}}).call();