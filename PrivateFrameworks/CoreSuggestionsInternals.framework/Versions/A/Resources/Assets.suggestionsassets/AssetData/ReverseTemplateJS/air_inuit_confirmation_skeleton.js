(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var i,n,o,s,p,l,g,u,d,m,h,v,c,T,f,C,N,y,A,S=a.getSpan(),b=[],x={},I=S.nextText(t.reservationId).nextTag("td1").tagContents();if(I.isNullSpan_)return CONTINUE;for(n=I.toString().match(/(.+)\s/)[1].trim(),(p=S.withInterval(S.nextText(t.passenger).getEnd(),S.nextText(t.travelInfo).getStart()).allInnerTagsFiltered("tr1")).shift(),y=0;y<p.length;y++){var F=p[y].innerCapture(/^(.+?)\[\/td1\].*\s([0-9-]+)/);i=F[2],x[(s=(s=F[1]).trim()).toString()]={name:s,totalPrice:u,priceCurrency:d,ticketNumber:i}}for((l=S.nextText(t.travelInfo).parentTag("table1").allInnerTagsFiltered("tr1")).shift(),y=0;y<l.length;y++)if(!t.baggage.test(l[y])){var k=l[y].innerCapture(/(.+)\n/,1);if(!/\//.test(k)){var z=k.innerCapture(/([A-Z0-9]{2})\s(\d+)/);m=z[1],g=z[2]}var E=l[y].allInnerTagsFiltered("td1");h=E[0].innerDate();var R=E[0].innerCapture(/(.+)\s\((.+)\)/);v=R[1],c=R[2],T=E[1].innerDate();var D=E[1].innerCapture(/(.+)\s\((.+)\)/);f=D[1],C=D[2],ASSERT(h,T)&&b.push({airlineCode:m,flightNumber:g,departureTime:h,departureCode:c,departureAirport:v.trim(),arrivalTime:T,arrivalCode:C,arrivalAirport:f.trim(),passengers:x})}var O=[];for(y=0;y<b.length;y++){var P=b[y],U=Object.keys(P.passengers);for(A=0;A<U.length;A++){O.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:"Air Inuit",airlineCode:P.airlineCode,flightNumber:P.flightNumber,departureAirportFuzzy:P.departureAirport,departureAirportCode:P.departureCode,departureTime:P.departureTime,arrivalAirportFuzzy:P.arrivalAirport,arrivalAirportCode:P.arrivalCode,arrivalTime:P.arrivalTime},underName:{"@type":"http://schema.org/Person",name:(N=P.passengers[U[A]]).name},checkinUrl:o,reservationId:n,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:N.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:"",seatingType:""}}})}}return O.length?O:void 0}}).call();