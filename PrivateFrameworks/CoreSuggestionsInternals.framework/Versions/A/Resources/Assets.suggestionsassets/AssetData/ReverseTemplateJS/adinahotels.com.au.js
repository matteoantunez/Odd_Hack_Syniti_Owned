(function(){return function(e,t,n){var a,r,i,g,o,s,c,p,m,u,x,d,C,l,T,h,S,f,y=Scanner.fromMessage(e);if(y.setLocale(t),!n.emailTitelConfirmation.test(e.subject)&&!n.emailTitelCancelConfirmation.test(e.subject))return CONTINUE;o=y.getSpan().nextRegExp(n.reservationId).nextAnyTag("td").tagContents(),a=y.getSpan().nextRegExp(n.guestName).nextAnyTag("td").tagContents(),p=y.getSpan().nextRegExp(n.checkInDate).nextAnyTag("td").tagContents(),x=y.getSpan().nextRegExp(n.checkOutDate).nextAnyTag("td").tagContents(),c=y.getSpan().nextRegExp(n.checkInTime).nextAnyTag("td").tagContents().nextDate(),u=y.getSpan().nextRegExp(n.checkOutTime).nextAnyTag("td").tagContents().nextDate(),m=getFuzzyDate(y.getDetachedSpan(p+" "+c).innerDate()),d=getFuzzyDate(y.getDetachedSpan(x+" "+u).innerDate());var R=y.getSpan().nextRegExp(n.price).nextAnyTag("td").tagContents();i=R.innerCapture(/([\d,.]+)/,1),g=R.innerCapture(/([^\d,.]+)/,1).trim();var E=y.getSpan().nextRegExp(n.hotelName).nextAnyTag("td").tagContents();if(l=E.innerCapture(/(.+)/,1),h=E.innerAddress(),n.emailTitelConfirmation.test(e.subject)){if(!ASSERT(a,o,m,d,h))return CONTINUE;s="Confirmed"}if(n.emailTitelCancelConfirmation.test(e.subject)){if(a=y.getSpan().innerCapture(n.cancelGuestName,1),o=y.getSpan().innerCapture(n.cancelReservationId,1),!ASSERT(a,o,m,h))return CONTINUE;s="Cancelled"}return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:r},totalPrice:i,priceCurrency:g,checkinTime:m,checkoutTime:d,modifyReservationUrl:S,cancelReservationUrl:f,reservationStatus:"http://schema.org/Reservation"+(s||"Confirmed"),reservationId:o,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:l,url:C,telephone:T,address:h}}]}}).call();