(function(){return function(e,t,n){var r=Scanner.fromMessage(e);r.setLocale(t);var a,i=r.getSpan().innerCapture(regExpFormatted(/\1\s(\d+)/,n.reservationIdPrefix),1),s=r.getSpan().nextText(n.orderDetailsHeader).parentTag("table3"),g=r.getSpan().withInterval(s.nextTag("td6").tagContents().getStart(),s.nextText("<").getStart()).trim();a=r.getSpan().withInterval(s.nextText(">").getEnd(),s.nextText(n.viewMapSuffix).getStart()).trim(),r.getSpan().nextText(n.address).exists()&&(a=(a=r.getSpan().nextText(n.address).parentTag("td2").tagContents().innerCapture(regExpFormatted(/\1\n($<address1>.+)?\n($<address2>.+)?\n($<address3>.+)?\n($<address4>.+)?/,n.address))).$address1+" "+a.$address2+"  "+a.$address3+" "+a.$address4);var x,p,d,c,o,S=r.getSpan().innerCapture(regExpFormatted(/<\1(.*?)>/,n.phoneNumberPrefix),1),u=/[\D]{3}\.?\s(\d{1,2})\s([a-z]{3})\s(\d{4})\s(\d{1,2}:\d{2})/,m=function(e,n,r,a,i){return"es_ES"===t&&(r=r.replace(/^may$/,"mayo")),n+" "+r+" "+a+" "+i};r.getSpan().nextText(n.checkInPrefix).exists()?x=r.getDetachedSpan(r.getSpan().nextText(n.checkInPrefix).nextAnyTag("td").tagContents().toString().replace(u,m)).innerDate():x=r.getDetachedSpan(r.getSpan().nextText(n.checkInPrefix_2).parentAnyTag("td").tagContents().toString().replace(u,m)).innerDate();(p=r.getDetachedSpan(r.getSpan().nextText(n.checkOutPrefix).nextAnyTag("td").tagContents().toString().replace(u,m)).innerDate()).toString().length<=0&&(p=r.getDetachedSpan(r.getSpan().nextText(n.checkOutPrefix).parentAnyTag("td").tagContents().toString().replace(u,m)).innerDate()),d=r.getSpan().nextText(n.guestNamePrefix).exists()?r.getSpan().nextText(n.guestNamePrefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1: (.+)/,n.guestNamePrefix),1).trim():r.getSpan().nextText(n.guestNamePrefix_2).nextTag("td4").tagContents().trim(),o=(c=r.getSpan().nextText(n.pricePrefix_2).exists()?r.getSpan().nextText(n.pricePrefix_2).parentTag("td4").tagContents().innerCapture(regExpFormatted(/\1 ($<currency>[^\d]+)?($<price>[\d\.,]+)($<currency_suffix>[^\d]+)?/,n.pricePrefix_2)):r.getSpan().nextText(n.pricePrefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1 ($<currency>[^\d]+)?($<price>[\d\.,]+)($<currency_suffix>[^\d]+)?/,n.pricePrefix))).$currency.exists()?c.$currency.trim():c.$currency_suffix.trim();var T=c.$price;if(ASSERT(d,i,x,p,a))return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:d},totalPrice:T,priceCurrency:o,checkinTime:x,checkoutTime:p,reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:i,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:g,telephone:S,address:a}}]}}).call();