(function(){return function(e,t,r){var a,n,i,p=Scanner.fromMessage(e);p.setLocale(t);var s,g,o,d,m,u,l,h,c,T,C,v,x,y,N,b,f=[],S={};u="asiana airlines",n=(o=(m=p.getSpan()).next(r.reservationId_prefix).nextTag("td1")).innerCapture(/([\d\w]+)\(.*\)/,1),s=(o=o.nextTag("td1").nextTag("td1")).tagContents(),a=(o=o.nextTag("td1")).innerCapture(/([\d]+)\s+/,1),N=(o=o.nextTag("td1").nextTag("td1")).innerCapture(/([\w]+)\s+(\d+)/,1),y=o.innerCapture(/([\w]+)\s+(\d+)/,2),o=m.next(r.flightSummary).nextTag("table1").nextTag("tr1").nextTag("tr1");do{l=(d=o.nextTag("th1").tagContents()).innerCapture(/\s*([A-z]+)(\d+)/,1),d=d.innerCapture(/\s*([A-z]+)(\d+)/,2);var A=(g=o.nextTag("td1").tagContents().innerCapture(/\s*([\d\w]+)\(.*/,1)).innerCapture(/(\d+)([A-Z]+)(\d+)/);g=A[1]+" "+A[2]+" "+A[3],c=(x=(c=o.nextTag("td1").nextTag("td1").tagContents()).innerCapture(/\s*(.*)\((.{3})\)\s.*\s(.*)\((.{3})\)/))[1],T=x[2],v=x[3],x=x[4],h=g+" "+(o=o.nextTag("td1").nextTag("td1").nextTag("td1")).tagContents().innerCapture(/\s*(\d+\:\d+)/,1),h=getFuzzyDate(p.getDetachedSpan(h).firstDate()),C=g+" "+(o=o.nextTag("td1")).innerCapture(/\s*(\d+\:\d+)/,1),C=p.getDetachedSpan(C).innerDate(),b=o.nextTag("td1").tagContents().innerCapture(/(.*)\sOK/,1),ASSERT(l,d,c,h,v,C)&&f.push({reservationId:n,airlineName:u,airlineCode:l,flightNumber:d,departureAirport:c,departureCode:T,departureTime:h,arrivalAirport:v,arrivalCode:x,arrivalTime:C,passengers:S}),o=o.nextTag("tr1")}while(o.nextTag("th1")!==p.getNullSpan());ASSERT(s)&&(S[s.toString()]={name:s,seats:{},seatingType:b,ticketNumber:null,totalPrice:y,priceCurrency:N});for(var z=[],k=0;k<f.length;k++)for(var F=f[k],w=Object.keys(F.passengers),D=0;D<w.length;D++){var P=F.passengers[w[D]],I={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:F.airlineName,airlineCode:F.airlineCode,flightNumber:F.flightNumber,departureAirportFuzzy:F.departureAirport,departureAirportCode:F.departureCode,departureTime:F.departureTime,arrivalAirportFuzzy:F.arrivalAirport,arrivalAirportCode:F.arrivalCode,arrivalTime:F.arrivalTime},underName:{"@type":"http://schema.org/Person",name:P.name},checkinUrl:i,reservationId:F.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:P.totalPrice,priceCurrency:P.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:a,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:P.seats[F.flightNumber],seatingType:P.seatingType}}};valid(P.membershipNumber,P.programName)&&(I.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:P.membershipNumber,programName:P.programName}),z.push(I)}if(z.length)return z}}).call();