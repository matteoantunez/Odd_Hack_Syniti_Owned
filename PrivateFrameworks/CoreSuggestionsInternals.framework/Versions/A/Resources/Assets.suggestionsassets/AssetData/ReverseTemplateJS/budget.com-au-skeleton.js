(function(){return function(t,e,n){var a,r,i,g,p,o,s,c,l,x,d,S,u,C,m,h,T,f,y,D,R,b,v=Scanner.fromMessage(t);if(v.setLocale(e),n.confirm.test(t.subject)||n.street.test(t.plain)){i=v.getSpan().innerCapture(n.reservationId,1),a=v.getSpan().innerCapture(n.guestName,1).toString().trim(),D=(A=v.getSpan().nextRegExp(n.bookingDetails).next(n.pickupDetails).parentAnyTag("table").tagContents()).innerDate(),y=A.innerPhoneNumber(),n.street.test(t.html)&&(R=(R=v.getSpan().nextRegExp(n.pickupDetails).nextRegExp(n.street).nextAnyTag("td").tagContents().trim()).split(/\//).join(" "),b=v.getSpan().nextRegExp(n.pickupDetails).nextRegExp(n.city).nextAnyTag("td").tagContents().trim(),(f=v.getDetachedSpan(R+" "+b).innerAddress()).exists()||(f=R+" "+b)),f&&0!==f.toString().length||(f=A.innerAddress()),f&&0!==f.toString().length||(f=A=(A=(A=(A=A.toString()).substr(0,A.indexOf(y.toString()))).split("\n")).slice(2).join("\n").toString());var E=v.getSpan().nextRegExp(n.bookingDetails).next(n.dropoffDetails).parentAnyTag("table").tagContents();h=E.innerDate(),m=E.innerPhoneNumber(),n.street.test(t.html)&&(R=(R=v.getSpan().nextRegExp(n.dropoffDetails).nextRegExp(n.street).nextAnyTag("td").tagContents().trim()).split(/\//).join(" "),b=v.getSpan().nextRegExp(n.dropoffDetails).nextRegExp(n.city).nextAnyTag("td").tagContents().trim(),(C=v.getDetachedSpan(R+" "+b).innerAddress()).exists()||(C=R+" "+b)),C&&0!==C.toString().length||(C=E.innerAddress()),C&&0!==C.toString().length||(C=E=(E=(E=(E=E.toString()).substr(0,E.indexOf(m.toString()))).split("\n")).slice(2).join("\n").toString()),0===(x=v.getSpan().nextText(n.car).nextTag("table4").nextTag("td4").nextTag("td4").nextTag("td4").nextTag("td4").tagContents()).toString().length&&(x=v.getSpan().nextText(n.car).nextTag("table5").nextTag("td5").tagContents().trim()),0===x.toString().length&&(x=v.getSpan().next(n.carLabel).parentAnyTag("td").tagContents().trim()),c=v.getSpan().nextText(n.totalPrice).nextTag("td5").tagContents().innerCapture(/([\d,.]+)/,1),l=v.getSpan().nextText(n.totalPrice).nextTag("td5").tagContents().innerCapture(/([^\d,.]+)/,1),c.exists()||(c=v.getSpan().nextText(n.totalPrice).nextTag("td4").tagContents().innerCapture(/([\d,.]+)/,1),l=v.getSpan().nextText(n.totalPrice).nextTag("td4").tagContents().innerCapture(/([^\d,.]+)/,1)),s=o=v.getSpan().nextText(n.modifyUrl).parentTag("td3").innerLink(),g=v.getSpan().next(n.cancelled).exists()?"Cancelled":"Confirmed"}else{if(!n.cancel.test(t.subject))return CONTINUE;var A,k;i=v.getSpan().innerCapture(n.cancellationId,1),a=v.getSpan().innerCapture(n.guestNameCancel,1),r=v.getSpan().innerCapture(n.guestEmailCancel,1),D=(A=(A=v.getSpan().innerCapture(n.pickUp,1).toString()).split("\n"))[0].toString(),f=A[1]+"\n"+A[2],y=A[3].toString(),k=(k=v.getSpan().innerCapture(n.pickUp,1).toString()).split("\n"),D=getFuzzyDate(v.getDetachedSpan(k[0].toString())),f=k[1]+"\n"+k[2],y=k[3].toString(),k=(k=v.getSpan().innerCapture(n.dropOff,1).toString()).split("\n"),h=getFuzzyDate(v.getDetachedSpan(k[0].toString())),C=k[1]+"\n"+k[2],m=k[3].toString(),x=v.getSpan().innerCapture(n.carCancel,1);var P=v.getSpan().innerCapture(n.priceCancel,1);c=P.innerCapture(/([\d,.]+)/,1),l=P.innerCapture(/([^\d,.]+)/,1),g="Cancelled"}if(ASSERT(i,a,f,D))return[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:c,priceCurrency:l,reservationId:i,reservationStatus:"http://schema.org/Reservation"+(g||"Confirmed"),checkinUrl:p,modifyReservationUrl:o,cancelReservationUrl:s,underName:{"@type":"http://schema.org/Person",name:a,email:r},provider:{"@type":"http://schema.org/Organization",name:"Budget"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:x},license:d,color:S},pickupTime:D,pickupLocation:{"@type":"http://schema.org/Place",name:T,telephone:y,address:f},dropoffTime:h,dropoffLocation:{"@type":"http://schema.org/Place",name:u,telephone:m,address:C}}]}}).call();