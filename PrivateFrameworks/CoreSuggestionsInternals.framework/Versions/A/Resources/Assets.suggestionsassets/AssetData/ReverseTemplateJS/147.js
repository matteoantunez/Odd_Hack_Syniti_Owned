new ReverseTemplateList([new ReverseTemplate("usairways.com-receipt-en",function(e){return/^Your US Airways receipt:/.test(e.subject)},function(e){if(/^Your US Airways receipt:/.test(e.subject)){var r,t,a=Scanner.fromMessage(e);a.setLocale("en_US");var i,n,p,l,m,o,s,u,g,c,d,h,v,b=[],N={};r=a.getSpan().innerCapture(/\bConfirmation Code: (\w+)/,1),i=a.getSpan().nextText("Passenger Name").parentTag("table3").allInnerTags("tr3").map(function(e){return e.allInnerTagsFiltered("td3")});for(var T=1;T<i.length&&!((s=i[T]).length<7);T++)o=s[6].innerCapture(/($<price>[\d,.]+) ($<currency>[A-Z]{3})/),N[s[0].toString()]={name:s[0],membershipNumber:"NA"!==s[2].toString()&&s[2],programName:"Frequent Flyer",ticketNumber:s[3],totalPrice:o?o.$price:null,priceCurrency:o?o.$currency:null,seats:{},seatingType:{}};l=a.getSpan().nextText("Flight Itinerary").parentTag("table3").allInnerTags("tr3").map(function(e){return e.allInnerTagsFiltered("td3")});for(var y=1;y<l.length;y++){g=(u=(s=l[y])[0].innerCapture(/($<name>.*?) ($<flightNumber>\d+)/))?u.$name:null,m=u?u.$flightNumber:null,d=(p=s[1].innerCapture(concatRegExp(/\bDepart: ($<departureTime>\d{1,2}:\d{2} [A|P]M) .*? \(($<departureCode>[A-Z]{3})\)\s+/,/\bArrival: ($<arrivalTime>\d{1,2}:\d{2} [A|P]M) .*? \(($<arrivalCode>[A-Z]{3})\)/)))?p.$departureCode:null,v=p?p.$arrivalCode:null,c=p?p.$departureTime:a.getNullSpan(),h=p?p.$arrivalTime:a.getNullSpan(),c=a.getDetachedSpan(s[2].toString()+" "+c.toString()).innerDate(),h=a.getDetachedSpan(s[2].toString()+" "+h.toString()).innerDate();var S=s[5];if(n=s[6],valid(m)&&(valid(n)||valid(S))){i=Object.keys(N);for(T=0;T<i.length;T++)N[i[T]].seats[m]=n,N[i[T]].seatingType[m]=S}ASSERT(g,m,d,c,v,h)&&b.push({airlineName:g,flightNumber:m,departureCode:d,departureTime:c,arrivalCode:v,arrivalTime:h,passengers:N})}var f=[];for(y=0;y<b.length;y++)for(var C=b[y],A=Object.keys(C.passengers),$=0;$<A.length;$++){var F=C.passengers[A[$]],k={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:C.airlineName,airlineCode:C.airlineCode||"US",flightNumber:C.flightNumber,departureAirportFuzzy:C.departureAirport,departureAirportCode:C.departureCode,departureTime:C.departureTime,arrivalAirportFuzzy:C.arrivalAirport,arrivalAirportCode:C.arrivalCode,arrivalTime:C.arrivalTime},underName:{"@type":"http://schema.org/Person",name:F.name,email:F.email},checkinUrl:t,reservationId:r,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:F.totalPrice,priceCurrency:F.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:F.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:F.seats[C.flightNumber],seatingType:F.seatingType[C.flightNumber]}}};valid(F.membershipNumber,F.programName)&&(k.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:F.membershipNumber,programName:F.programName}),f.push(k)}if(f.length)return f}},"SG02e02984")]);