(function(){return function(e,t,n){function r(e){return e=e.replace(/[^\d\sa-zA-z:\u6642]+/g," ").replace(/\s+/g," ").replace(/^(\d+)\s(\d+)\s/,"$1/$2/"),e=getFuzzyDate(y.getDetachedSpan(e))}var a,p,o,i,c,s,g,d,u,l,C,f,S,h,m,x,R,E,v,k,y=Scanner.fromMessage(e);y.setLocale(t);var T="Nissan";if(n.confirmSubject.test(e.subject)){a=y.getSpan().tagContents().innerCapture(/(.+)/,1),o=y.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),E=y.getSpan().nextRegExp(n.pickupStore).tagContents().innerCapture(n.pickupStore,1).toString()+"\n"+y.getSpan().nextRegExp(n.pickupAddress).tagContents().innerCapture(n.pickupAddress,1).toString(),v=y.getSpan().nextRegExp(n.pickupTelephone).tagContents().innerCapture(n.pickupTelephone,1).toString(),h=y.getSpan().nextRegExp(n.dropoffStore).tagContents().innerCapture(n.dropoffStore,1).toString()+"\n"+y.getSpan().nextRegExp(n.dropoffAddress).nextRegExp(n.dropoffAddress).tagContents().innerCapture(n.dropoffAddress,1).toString(),m=y.getSpan().nextRegExp(n.dropoffTelephone).nextRegExp(n.dropoffTelephone).tagContents().innerCapture(n.dropoffTelephone,1).toString(),k=r(k=y.getSpan().nextRegExp(n.pickupDate).tagContents().innerCapture(n.pickupDate,1).toString()),x=r(x=y.getSpan().nextRegExp(n.dropoffDate).tagContents().innerCapture(n.dropoffDate,1).toString()),l=y.getSpan().nextRegExp(n.car).tagContents().innerCapture(n.car,1);var A=y.getSpan().nextRegExp(n.price).tagContents().innerCapture(n.price,1);if(d=A.innerCapture(/([\d,.]+)/,1),u=A.innerCapture(/([^\d,.]+)/,1).trim(),!ASSERT(a,o,k,x,E,h))return CONTINUE}if(n.cancellationSubject.test(e.subject)){if(a=y.getSpan().nextRegExp(n.cancelGuestName).tagContents().innerCapture(n.cancelGuestName,1),o=y.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),k=r(k=y.getSpan().nextRegExp(n.cancelpickupdate).tagContents().innerCapture(n.cancelpickupdate,1).toString()),x=r(x=y.getSpan().nextRegExp(n.canceldropoffdate).tagContents().innerCapture(n.canceldropoffdate,1).toString()),E=y.getSpan().nextRegExp(n.cancelpickupAddress).tagContents().innerCapture(n.cancelpickupAddress,1).toString(),h=y.getSpan().nextRegExp(n.canceldropoffAddress).tagContents().innerCapture(n.canceldropoffAddress,1).toString(),l=y.getSpan().nextRegExp(n.cancelCar).tagContents().innerCapture(n.cancelCar,1),!ASSERT(a,o,k,x,E,h))return CONTINUE;i="Cancelled"}return 0===l.toString().length||null===l?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:d,priceCurrency:u,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:a,email:p},provider:{"@type":"http://schema.org/Organization",name:T},pickupTime:k,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:v,address:E},dropoffTime:x,dropoffLocation:{"@type":"http://schema.org/Place",name:S,telephone:m,address:h}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:d,priceCurrency:u,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(i||"Confirmed"),checkinUrl:c,modifyReservationUrl:s,cancelReservationUrl:g,underName:{"@type":"http://schema.org/Person",name:a,email:p},provider:{"@type":"http://schema.org/Organization",name:T},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:l},license:C,color:f},pickupTime:k,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:v,address:E},dropoffTime:x,dropoffLocation:{"@type":"http://schema.org/Place",name:S,telephone:m,address:h}}]}}).call();