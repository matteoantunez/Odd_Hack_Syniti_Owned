(function(){return function(e,n,r,t){var o="",a=[],i=[],s=6,c=loadHelper("flight_reservationid_length.js")[t.senderDomain];c&&(s=c);var l=/[\s\(\n\u200E,\[#\/\u865fo:\uff08]/,u=/[A-Z\d-]/,f=loadHelper("flight_reservation_content.js")[t.senderDomain];f&&(u=f);var h=new RegExp(l.source+u.source+"{"+s+"}"+/[\.\s\)\n\u200E,\]\(\[\/\uff0c\uc758\uff09]/.source,"g");(n.content_.match(h)||[]).forEach(function(e){var n=e.replace(/[\.\(\)\n\s\u200E,\[\]#\/\u865fo:\uff0c\uc758\uff08\uff09]/g,""),t=!1;r.forEach(function(e){n.indexOf(e.reference)>-1&&(t=!0)}),-1!==a.indexOf(n)||t||a.push(n)});var g=.4;return a.forEach(function(r){var t=n.getSpan().next(r),o=new RegExp("([\\d]{"+r.length+"}|[A-Z]{"+r.length+"}|[A-Z\\-]{"+r.length+"}|[\\d\\-]{"+r.length+"})"),a=0;o.exec(r)&&(a+=3);var s=!1;e.flightReservationIdPrefixes.forEach(function(e){var n=t.previous(e);s||n.isNullSpan_||(s=!0,a+=(t.start_-n.start_)/100)}),s||(a+=5),i.push({reservationId:r,penaltyPoints:a+g}),g+=.4}),i.sort(function(e,n){return e.penaltyPoints-n.penaltyPoints}),i.length>0&&(o=i[0].reservationId),o}}).call();