(function(){return function(e,t,n){var r,a,i,p,o,g,c,s,m,u,d,h,l,C,S,F,v,x,E,D=Scanner.fromMessage(e);if(D.setLocale(t),!n.emailTitel.test(e.subject))return CONTINUE;r=D.getSpan().innerCapture(regExpFormatted(n.reservationName),1),o=D.getSpan().innerCapture(regExpFormatted(n.reservationId),1),s=D.getSpan().innerCapture(regExpFormatted(n.checkInDate),1).innerDate(),d=D.getSpan().innerCapture(regExpFormatted(n.checkOutDate),1).innerDate(),c=D.getSpan().innerCapture(regExpFormatted(n.checkInTimes),1).innerDate(),u=D.getSpan().innerCapture(regExpFormatted(n.checkInTimes),2).innerDate(),m=D.getDetachedSpan(s+" "+c).innerDate(),h=D.getDetachedSpan(d+" "+u).innerDate();var T=D.getSpan().innerCapture(regExpFormatted(n.rate),1).innerCapture(/([\d,.]+)/,1),f=D.getSpan().innerCapture(regExpFormatted(n.nights),1).innerCapture(/([\d]+)/,1);return i=(parseFloat(T)*parseFloat(f)).toString(),p=D.getSpan().innerCapture(regExpFormatted(n.rate),1).innerCapture(/([^\d,.]+)/,1),S=(l=D.getSpan().nextAnyTag("td").tagContents().trim()).innerCapture(/(.+)/,1),C=l.lastInnerLink(),F=l.innerPhoneNumber().innerCapture(n.phoneCapture,1),l=l.toString().replace(/\n\n/g,"\n"),v=D.getDetachedSpan(l).innerCapture(regExpFormatted(/.+\n([\s\S]+?)\s+?\n/),1),n.confirmation.test(e.plain)&&(g="Confirmed"),n.cancellation.test(e.plain)&&(g="Cancelled"),ASSERT(r,S,v,m,h)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:a},totalPrice:i,priceCurrency:p,checkinTime:m,checkoutTime:h,modifyReservationUrl:x,cancelReservationUrl:E,reservationStatus:"http://schema.org/Reservation"+g,reservationId:o,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:S,url:C,telephone:F,address:v}}]:void 0}}).call();