(function(){return function(e,r,t,a){if(int(e.epoch)<=1443052800)return CONTINUE;var i=Scanner.fromMessage(e);i.setLocale(r);var n,o,p,s,g,m,u=i.getSpan(),d=[],l=[];return n=u.next(t.reservationId_prefix).nextAnyTag("table").nextAnyTag("td").tagContents(),p=u.next(t.price_prefix).nextAnyTag("td").tagContents(),o=u.next(t.price_prefix).nextAnyTag("td").nextAnyTag("td").tagContents(),s=u.next(t.checkinUrl_prefix).nextLink(),u.allInnerTags("tr3").filter(function(e){var r=e.tagContents().toString();return 0!==r.length&&(r.indexOf("Depart ")>-1||r.indexOf("Arrive in")>-1)}).forEach(function(e){var r,a,n,o,p,s,l,c,h,A,N,T,v,x,C,f="Southwest Airlines",y="WN";""!==(e=e.allInnerTags("td3"))[0].tagContents().toString()&&(g=m=e[0].tagContents()),r=e[1].tagContents(),s=(n=/(?:Depart|Change planes.*in)\s(.*)\s\((.*)\).*at\s(.*)/.exec((x=e[e.length-1]).toString()))[1],l=n[2],o=n[3],N=(c=/Arrive in\s(.*)\s\((.*)\)\s.*at\s(.*)\s\s\n/.exec(x.toString()))[1],T=c[2],h=c[3],p=getFuzzyDate(i.getDetachedSpan(g+" "+o).firstDate()),A=getFuzzyDate(i.getDetachedSpan(m+" "+h).firstDate()),v=u.next(t.passengers_prefix).nextAnyTag("table").nextAnyTag("td").nextAnyTag("td").tagContents(),d.push({airlineName:f,airlineCode:y,flightNumber:r,departureDateTime:p,departureAirport:s,departureAirportCode:l,arrivalDateTime:A,arrivalAirport:N,arrivalAirportCode:T,ticketNumber:a,underPersonName:v,programName:"Rapid Rewards",membershipNumber:C})}),d.forEach(function(e){ASSERT(e.departureDateTime,e.arrivalDateTime,e.departureAirportCode,e.arrivalAirportCode),l.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:e.airlineName,airlineCode:e.airlineCode,flightNumber:e.flightNumber,departureAirportFuzzy:e.departureAirport,departureAirportCode:e.departureAirportCode,departureTime:e.departureDateTime,arrivalAirportFuzzy:e.arrivalAirport,arrivalAirportCode:e.arrivalAirportCode,arrivalTime:e.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:e.underPersonName},checkinUrl:s,reservationId:n,reservationStatus:"http://schema.org/Reservation"+a,totalPrice:o,priceCurrency:p,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:e.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:e.seatNumber,seatingType:e.seatType}},programMembershipUsed:{"@type":"http://schema.org/ProgramMembership",membershipNumber:e.membershipNumber,programName:e.programName}})}),l.length>=1?l:CONTINUE}}).call();