new ReverseTemplateList([new ReverseTemplate("jet2.com-confirmation-en",function(e){return/Booking Confirmation: .+/.test(e.subject)||/Important Information Regarding Your Jet2\.com Flight/.test(e.subject)},function(e){if(!(/Booking Confirmation: .+/.test(e.subject)||/Important Information Regarding Your Jet2\.com Flight/.test(e.subject)&&/The attached documents show cancellation confirmations per person per flight/.test(e.plain)))return CONTINUE;if(/Important Information Regarding Your Jet2\.com Flight/.test(e.subject)&&/The attached documents show cancellation confirmations per person per flight/.test(e.plain)){var t="en_US",r={};(o=Scanner.fromMessage(e)).setLocale(t);var n=o.getSpan();r.booking=/Booking Reference:/,r.pass=/Dear/;var a=o.getSpan().next(r.booking).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s([^\n]+)/,r.booking),1),i=o.getSpan().next(r.pass).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s([^\n]+),/,r.pass),1);if(ASSERT(a,i))return[{"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight"},reservationId:a,reservationStatus:"http://schema.org/ReservationCancelled",underName:{"@type":"http://schema.org/Person",name:i}}]}if(/Booking Cancellation/.test(e.subject))return CONTINUE;var o;t="en_US",r={reservationIdRegExp:/Your booking reference is: ([0-9A-Z]+)/,flightNumberPrefix:"Flight:",departureTimePrefix:"Departs:",arrivalTimePrefix:"Arrives:",passengersPrefix:"Passengers",airportsRegExp:/(.+?)\sto\s(.+)/};(o=Scanner.fromMessage(e)).setLocale(t);n=o.getSpan();var s,p,g,l,u,c,m,h,f,d,T,v,x=[],S=[],C=[];(a=n.innerCapture(r.reservationIdRegExp,1),(s=n.nextText(r.flightNumberPrefix).parentAnyTag("tr").allInnerTags("td2").map(function(e){return e.tagContents()}).filter(function(e){return e.toString().length>0}))&&4===s.length)&&([d,g,T,v]=s,[,p,g]=g.innerCapture(/([0-9A-Z]{2})(\d{3,4})/),u=o.getDetachedSpan(d+" "+T.toString().replace(r.departureTimePrefix,"")),m=o.getDetachedSpan(d+" "+v.toString().replace(r.arrivalTimePrefix,"")));return(s=n.nextText(r.flightNumberPrefix).parentAnyTag("tr").previousAnyTag("tr").allInnerTags("td2").map(function(e){return e.tagContents()}).filter(function(e){return e.toString().length>0}))&&s.length>0&&(s=s[0].innerCapture(r.airportsRegExp)),s&&3===s.length&&([,l,c]=s),S.push({airlineCode:p,flightNumber:g,departureAirport:l,departureDateTime:u,arrivalAirport:c,arrivalDateTime:m}),n.nextText(r.passengersPrefix).parentAnyTag("table").allInnerTags("tr2").slice(1).map(function(e){return e.allInnerTags("td2")}).forEach(function(e){x.push({name:e[1].tagContents(),seat:e[2].tagContents()})}),ASSERT(p,g,l,u),0===x.length&&x.push({name:null,seat:null}),S.forEach(function(e){x.forEach(function(t){C.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:e.airlineCode,flightNumber:e.flightNumber,departureAirportFuzzy:e.departureAirport,departureTime:e.departureDateTime,arrivalAirportFuzzy:e.arrivalAirport,arrivalTime:e.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:t.name},reservationId:a,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:h,priceCurrency:f,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:null,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:t.seat,seatingType:null}}})})}),C},"SG7c5f873b")]);