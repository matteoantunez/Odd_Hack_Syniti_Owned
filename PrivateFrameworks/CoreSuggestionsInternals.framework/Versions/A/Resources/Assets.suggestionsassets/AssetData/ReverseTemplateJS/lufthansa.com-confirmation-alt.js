(function(){return function(e,r,a){var t=Scanner.fromMessage(e);t.setLocale(r);for(var i,n=[],p=[],l=t.getSpan().next(a.service).previousAnyTag("table");!l.isNullSpan_;){var o={},u=l.allInnerTagsFiltered("td6"),v=u[0].innerCapture(/($<a>[^\d]+)($<b>\d+)/);o.airlineCode=v?v.$a:null,o.flightNumber=v?v.$b:null;var d=t.getDetachedSpan(l.nextTag("td5").tagContents().replace(/\u00AD/g,"").innerCapture(/.+?,\xa0([^\n]+)/,1).split(".").reverse().join("-")).innerDate(),m=u[2].replace(/[\u200B-\u200D\uFEFF\u00AD]/g,"");o.departureTime=combineDateAndTime(d,m),o.departureAirport=u[3];var s=u[4].replace(/[\u200B-\u200D\uFEFF\u00AD]/g,"");o.arrivalTime=combineDateAndTime(d,s),Date.parse(o.departureTime)>Date.parse(o.arrivalTime)&&(o.arrivalTime=modifyDate(o.arrivalTime,1)),o.arrivalAirport=u[5],ASSERT(o.departureTime,o.arrivalAirport,o.arrivalTime,o.departureAirport)&&n.push(o),l=l.next(a.service).next(a.service).previousAnyTag("table")}for(var g=0;g<n.length;g++){var c;p.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:"Lufthansa",airlineCode:(c=n[g]).airlineCode,flightNumber:c.flightNumber,departureAirportFuzzy:c.departureAirport,departureAirportCode:c.departureCode,departureTime:c.departureTime,arrivalAirportFuzzy:c.arrivalAirport,arrivalAirportCode:c.arrivalCode,arrivalTime:c.arrivalTime},reservationId:i,reservationStatus:"http://schema.org/ReservationConfirmed"})}if(p.length)return p}}).call();