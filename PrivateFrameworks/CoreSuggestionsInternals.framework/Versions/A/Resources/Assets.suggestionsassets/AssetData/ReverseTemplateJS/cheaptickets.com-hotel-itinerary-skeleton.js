(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var r,a,i,c,o,d,m,g,h,s,p,u,T,x,l,k,C,D,$=Scanner.fromMessage(e);($.setLocale(t),""===(r=$.getSpan().nextText(n.reservedFor).nextAnyTag("td").tagContents()).toString()&&(r=r.nextAnyTag("td").tagContents()),r=r.innerCapture(/\*\s+(.*)/,1).trim(),d=$.getSpan().innerCapture(regExpFormatted(/\1 (\w+\-\d+\-\d+\-\d+)/,n.reservationId),1),i=$.getSpan().nextText(n.checkin).parentAnyTag("td"),valid(i))&&(C=i.innerCapture(regExpFormatted(/\1 ($<checkInDate>.*) \| \2 ($<checkOutDate>.*)/,n.checkin,n.checkout)),(D=i.innerCapture(regExpFormatted(/\1 ($<checkInTime>\d{4})\s($<checkOutTime>\d{4})/,n.checkinTime)))||(D=i.innerCapture(regExpFormatted(/\1 ($<checkInTime>\d{2}\:\d{2}\s[A-Z]{2})\s($<checkOutTime>\d{2}\:\d{2}\s[A-Z]{2})/,n.checkinTime))),3===C.length&&3===D.length&&(h=$.getDateDD(C.$checkInDate.innerDate()),p=$.getDateDD(C.$checkOutDate.innerDate()),valid(h,p,D.$checkInTime,D.$checkOutTime)&&(s=combineDateAndTime(h,D.$checkInTime),u=combineDateAndTime(p,D.$checkOutTime))));return x=(i=(T=$.getSpan().nextText(n.hotelDetails).nextLink()).parentAnyTag("td").tagContents()).innerCapture(regExpFormatted(/\1($<name>.*) \2/,n.hotelDetails,n.hotelNameSuffix),1),k=i.nextAddress(),l=i.nextPhoneNumber().innerCapture(regExpFormatted(/\1 ($<phone>.*)/,n.telephone),1),c=$.getSpan().nextText(n.priceSummary).nextText(n.totalPrice).nextTag("td4").tagContents().innerCapture(/([\d,.]+)/,1),o=$.getSpan().nextText(c).parentAnyTag("td").tagContents().innerCapture(/($<currency>.)[\d,.]+/,1),ASSERT(k,s,u)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:a},totalPrice:c,priceCurrency:o,checkinTime:s,checkoutTime:u,modifyReservationUrl:m,cancelReservationUrl:g,reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:d,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:x,url:T,telephone:l,address:k}}]:void 0}}).call();