(function(){return function(r,e,t){var a=Scanner.fromMessage(r);a.setLocale(e);var i,n,p,o,u,m,g,c,l=[],d=[],s=[];for(var h in p=a.getSpan().innerCapture(regExpFormatted(/\1 : (.*)/,t.reference),1),(o=a.getSpan().innerCapture(regExpFormatted(/\1: ($<totalPrice>[\d\.,]+) ($<priceCurrency>\w{3}) /,t.amount)))&&(u=o.$totalPrice,m=o.$priceCurrency),i=a.getSpan().allInnerCapture(regExpFormatted(/\1 \d+ : (.+?) - \2 : (\d+)/,t.traveler,t.number))){var v=i[h];(c={}).name=v[1],c.ticketNumber=v[2],d.push(c)}for(var y in n=(n=a.getSpan().withInterval(a.getSpan().nextText(t.yourTrip).nextText("\n").nextText("\n").getEnd(),a.getSpan().nextText(t.modify).getStart()).trim()).split("\n")){var z,F=n[y],S={};z=F.innerDate(),S.flightNumber=F.innerCapture(regExpFormatted(/\- \1:.+?(\d+) \-/,t.flight),1).trim(),S.departureTime=getFuzzyDate(a.getDetachedSpan(z+" "+z.nextDate())),S.arrivalTime=getFuzzyDate(a.getDetachedSpan(z+" "+z.nextDate().nextDate())),g=F.innerCapture(regExpFormatted(/\1:\s+($<city>.+?)\s+.+?,\s+($<airport>.+?)[,|\s-]/,t.departure)),S.departureAirportFuzzy=g.$city.toString()+" "+g.$airport.toString(),g=F.innerCapture(regExpFormatted(/\1:\s+($<city>.+?)\s+.+?,\s+($<airport>.+)/,t.arrival)),S.arrivalAirportFuzzy=g.$city.toString()+" "+g.$airport.toString(),ASSERT(S.arrivalAirportFuzzy,S.departureAirportFuzzy,S.flightNumber,S.departureTime,S.arrivalTime)&&l.push(S)}for(var x=0;x<l.length;x++)for(var T=l[x],f=0;f<d.length;f++){s.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:"AirCorsica",airlineCode:"XK",flightNumber:T.flightNumber,departureAirportFuzzy:T.departureAirportFuzzy,departureAirportCode:T.departureAirportCode,departureTime:T.departureTime,arrivalAirportFuzzy:T.arrivalAirportFuzzy,arrivalAirportCode:T.arrivalAirportCode,arrivalTime:T.arrivalTime},underName:{"@type":"http://schema.org/Person",name:(c=d[f]).name},checkinUrl:"",reservationId:p,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:u,priceCurrency:m,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:c.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:"",seatingType:""}}})}if(s.length)return s}}).call();