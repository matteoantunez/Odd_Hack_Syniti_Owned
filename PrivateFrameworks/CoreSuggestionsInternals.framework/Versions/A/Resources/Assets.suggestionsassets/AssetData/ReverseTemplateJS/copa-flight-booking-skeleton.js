(function(){return function(e,r,t){if(!e||!r||!t)return CONTINUE;var a=Scanner.fromMessage(e);a.setLocale(r);var i,n,o,l,s,p,g,d,m,h,u,c,v,T,f,C,A,y=a.getSpan(),S=[],b={};for(n=y.withInterval(y.nextText(t.reservationId).getEnd(),y.nextText(t.reservationIdPostFix).getStart()).trim(),(s=y.nextText(t.passengerDetails).parentTag("table3").allInnerTagsFiltered("td3")).shift(),C=0;C<s.length;C++)b[(l=s[C].toString()).toString()]={name:l};for(0===s.length&&(b[(l=" ").toString()]={name:l}),(p=s=y.nextText(t.flightDetails).parentTag("table3").allInnerTagsFiltered("tr3")).shift(),p.shift(),C=0;C<p.length;C++){var x=p[C].allInnerTagsFiltered("td3");g=x[0],x[1],m=x[2],u=x[3],T=x[4],h=x[5],v=p[C].lastInnerDate(),h=combineDateAndTime(m,h),v=combineDateAndTime(m,v),ASSERT(g,h,v)&&S.push({airlineCode:d,flightNumber:g,departureTime:h,departureCode:c,departureAirport:u.trim(),arrivalTime:v,arrivalCode:f,arrivalAirport:T.trim(),passengers:b})}var F=[];for(C=0;C<S.length;C++){var I=S[C],N=Object.keys(I.passengers);for(A=0;A<N.length;A++){F.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:"Copa Airlines",airlineCode:"CM",flightNumber:I.flightNumber,departureAirportFuzzy:I.departureAirport,departureAirportCode:I.departureCode,departureTime:I.departureTime,arrivalAirportFuzzy:I.arrivalAirport,arrivalAirportCode:I.arrivalCode,arrivalTime:I.arrivalTime},underName:{"@type":"http://schema.org/Person",name:I.passengers[N[A]].name},checkinUrl:o,reservationId:n,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:"",priceCurrency:"",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:i,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:"",seatingType:""}}})}}return F.length?F:void 0}}).call();