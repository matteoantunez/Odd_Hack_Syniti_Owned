(function(){return function(e,t,n){if(!e||!t||!n)return CONTINUE;var a,r,g,s,o,c,i,x,d,p,u,h,l,y,T=Scanner.fromMessage(e);return T.setLocale(t),n.isCancelled&&(c="Cancelled"),a=T.getSpan().nextText(n.guestName).nextAnyTag("td").tagContents(),o=T.getSpan().nextRegExp(regExpFormatted(/\1/,n.confirmation),1).nextAnyTag("td").tagContents(),(p=T.getSpan().nextText(n.phone).parentAnyTag("table"))&&(u=p.nextAnyTag("td").tagContents().innerCapture(/(.+)\s+</,1),l=T.getDetachedSpan(p.allInnerAddresses().toString()).innerAddress(),h=p.innerPhoneNumber().innerCapture(regExpFormatted(/\1(.*)/,n.phone),1),l.exists()&&"ja_JP"!=t&&"zh_Hans_CN"!=t||(l=u.nextAnyTag("td").tagContents()+", "+u.nextAnyTag("td").nextAnyTag("td").tagContents())),y=/\u7684\u559c\u6765\u767b\u9884\u8ba2\u786e\u8ba4/.test(e.subject)||/\u559c\u6765\u767b\u9884\u8ba2\u53d6\u6d88/.test(e.subject)?T.getSpan().nextRegExp(n.yourSchedule_2).nextAnyTag("table"):/\u656c\u8bf7\u653e\u5fc3\u3002 \u60a8\u7684\u9884\u8ba2\u5df2\u786e\u8ba4\uff0c\u786e\u8ba4\u7f16\u53f7\u4e3a/.test(e.subject)||/\u656c\u8bf7\u653e\u5fc3\u3002 \u60a8\u7684\u9884\u8ba2\u5df2\u53d6\u6d88\uff0c\u53d6\u6d88\u7f16\u53f7\u4e3a/.test(e.subject)?T.getSpan().nextRegExp(n.yourSchedule_3).nextAnyTag("table"):T.getSpan().nextRegExp(n.yourSchedule).nextAnyTag("table"),i="ja_JP"==t||"zh_Hans_CN"==t?y.next(n.checkin).nextAnyTag("td").replace(/-/g,"").innerDate():y.next(n.checkin).nextAnyTag("td").innerDate(),d="ja_JP"==t||"zh_Hans_CN"==t?y.next(n.checkout).nextAnyTag("td").replace(/-/g,"").innerDate():y.next(n.checkout).nextAnyTag("td").innerDate(),g=(x=T.getSpan().nextText(n.total).nextAnyTag("td").tagContents()).innerCapture(/([\d,.]+)/,1),s=x.innerCapture(/([^\n\d,.]+)/,1),ASSERT(i,l)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:r},totalPrice:g,priceCurrency:s,checkinTime:i,checkoutTime:d,reservationStatus:"http://schema.org/Reservation"+(c||"Confirmed"),reservationId:o,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:u,telephone:h.toString().trim(),address:l}}]:void 0}}).call();