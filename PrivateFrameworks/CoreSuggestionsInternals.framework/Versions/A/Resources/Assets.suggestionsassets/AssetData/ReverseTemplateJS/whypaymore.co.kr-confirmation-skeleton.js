(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var i,n,o,p,l,s=a.getSpan(),g="Confirmed",u=[],d=[],c=[];if(n=s.nextText(t.ticketNumberPrefix).nextAnyTag("td").tagContents().innerCapture(/(.*?)\s\-\s/,1),s.nextText(t.passengerNameHeader).parentTag("table2").allInnerTags("tr2").slice(3,-3).forEach(function(e){var r=e.allInnerTags("td2");u.push({name:r[0].tagContents()})}),s.nextText(t.legDepartureAirportHeader).parentTag("table3").allInnerTags("tr3").slice(2,-4).forEach(function(e){var r,t,i,n,o,p,l,s,g,u,c,m,h,T=e.allInnerTags("td3");[p,u]=T[1].tagContents().toString().split("\n"),[,t,i]=T[2].tagContents().innerCapture(/([0-9A-Z]{2})(\d{3,4})/),n=s=T[3].tagContents().innerDate(),[o,g]=T[4].tagContents().toString().split(" - "),d.push({airlineName:r,airlineCode:t,flightNumber:i,departureDateTime:a.getDetachedSpan(n.toString()+" "+o.toString()).innerDate(),departureAirport:p.toString(),departureAirportCode:l,arrivalDateTime:a.getDetachedSpan(s.toString()+" "+g.toString()).innerDate(),arrivalAirport:u,arrivalAirportCode:c,seatNumber:m,seatingType:h})}),u.forEach(function(e){d.forEach(function(r){ASSERT(e.name,r.flightNumber,r.departureAirportCode||r.departureAirport,r.departureDateTime,r.arrivalAirportCode||r.arrivalAirport,r.arrivalDateTime)&&c.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:r.airlineName,airlineCode:r.airlineCode,flightNumber:r.flightNumber,departureAirportFuzzy:r.departureAirport,departureAirportCode:r.departureAirportCode,departureTime:r.departureDateTime,arrivalAirportFuzzy:r.arrivalAirport,arrivalAirportCode:r.arrivalAirportCode,arrivalTime:r.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:e.name},checkinUrl:o,reservationId:i,reservationStatus:"http://schema.org/Reservation"+g,totalPrice:p,priceCurrency:l,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:n,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:r.seatNumber,seatingType:r.seatingType}}})})}),c.length>0)return c}}).call();