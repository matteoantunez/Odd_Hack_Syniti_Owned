(function(){return function(e,t,r){var a=Scanner.fromMessage(e),i=a.getSpan();a.setLocale(t);var n,g,o,p,l,s,c,d,m,x,T;n=(d=i.nextText(r.passengerDetailsHeader).nextTag("table1").nextTag("tr1").nextTag("tr1").allInnerTagsFiltered("td1").toString().split(","))[2]+" "+d[3],d[2]!==undefined&&d[3]!==undefined||(n=""),p=d[5];var u=[];u=a.getSpan().nextText(r.itineraryPrefix).withEnd(a.getSpan().nextText(r.itineraryPostfix).getStart()).allInnerTagsFiltered("table1");for(var h=[],S=0;S<u.length;S++){var v,f,y,C,P,D;x=u[S].innerText(r.departureairportPrefix).nextTag("td1").tagContents().toString().replace(/:/,"").trim(),T=u[S].nextText(r.arrivalairportPrefix).nextTag("td1").tagContents().toString().replace(/:/,"").trim(),v=u[S].nextText(r.departuredatePrefix).nextTag("td1").tagContents().toString().replace(/:/,"").trim(),/([0-9])+\s(\D)/.test(v)&&(v=(v=v.match(/(.+)\s/)[1].trim()).replace(/-/g," ")),C=u[S].innerText(r.arrivaldatePrefix).nextTag("td1").tagContents().toString().replace(/:/,"").trim(),/([0-9])+\s(\D)/.test(C)&&(C=(C=C.match(/(.+)\s/)[1].trim()).replace(/-/g," ")),m=u[S].innerText(r.airlinePrefix).nextTag("td1").tagContents().toString().replace(/:/,"").trim(),p=u[S].innerText(r.ticketPrefix).nextTag("td1").tagContents().toString().replace(/:/,"").trim(),f=(f=u[S].innerText(r.departuretimePrefix).nextTag("td1").tagContents().toString().replace(/:/,"").trim()).slice(0,2)+":"+f.slice(2,4),P=(P=u[S].innerText(r.arrivaltimePrefix).nextTag("td1").tagContents().toString().replace(/:/,"").trim()).slice(0,2)+":"+P.slice(2,4),y=getFuzzyDate(a.getDetachedSpan(v.toString()+" "+f.toString())),D=getFuzzyDate(a.getDetachedSpan(C.toString()+" "+P.toString())),ASSERT(x,T,f,P)&&h.push({departureAirport:x,arrivalAirport:T,airlineName:m,ticketNumber:p,departureDateTime:y,arrivalDateTime:D})}var z=[];for(S=0;S<h.length;S++){var F=h[S];z.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:F.airlineName,airlineCode:"",flightNumber:"",departureAirportFuzzy:F.departureAirport,departureAirportCode:"",departureTime:F.departureDateTime,arrivalAirportFuzzy:F.arrivalAirport,arrivalAirportCode:"",arrivalTime:F.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:n},checkinUrl:l,reservationId:"",reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:g,priceCurrency:o,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:p,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:s,seatingType:c}}})}return z}}).call();