(function(){return function(r,e,a){function t(r){var e={},a=r[0].innerCapture(/[^\n]\s*[\n]+($<a>[\w]+)\s#($<b>\d+)/);e.airlineName=a?a.$a.trim():null,e.flightNumber=a?a.$b.trim():null;var t=r[1].allDates(),n=r[1].innerCapture(/($<a>[^\n\(\)]+)\s\(($<b>\w+)\)\s*[\n]{1}/);e.departureAirport=n?n.$a.trim():null,e.departureCode=n?n.$b.trim():null,e.departureTime=combineDateAndTime(t[1],t[0]);var i=r[3].allDates();e.arrivalTime=combineDateAndTime(i[1],i[0]);var l=r[3].innerCapture(/($<a>[^\n\(\)]+)\s\(($<b>\w+)\)\s*[\n]{1}/);if(e.arrivalCode=l?l.$b:null,e.arrivalAirport=l?l.$a:null,ASSERT(e.flightNumber,e.departureTime,e.arrivalTime))return e}var n=Scanner.fromMessage(r);n.setLocale(e);n.getSpan();var i,l,p=[],s=[],u=n.getSpan();i=u.innerCapture(regExpFormatted(/\1\s([^\n]+)/,a.reservationId),1);for(var o=u.next(a.passangers),m=int(o.innerCapture(regExpFormatted(/\1/,a.passangersCap),1));!o.isNullSpan_;)l=o.innerCapture(regExpFormatted(/Passenger\s\1:\s([^\n]+)/,String(m)),1).trim(),s.push({name:l}),m+=1,o=o.next(regExpFormatted(/Passenger\s\1:\s([^\n]+)/,String(m)));var d=u.next(a.outbound),g=u.next(a.inbound);if(!d.isNullSpan_){var v=d.nextAnyTag("table").allInnerTagsFiltered("td4");p.push(t(v))}if(!g.isNullSpan_){v=g.nextAnyTag("table").allInnerTagsFiltered("td4");p.push(t(v))}for(var h=[],b=0;b<p.length;b++)for(var f=p[b],T=0;T<s.length;T++){h.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:f.airlineName,flightNumber:f.flightNumber,departureAirportFuzzy:f.departureAirport,departureAirportCode:f.departureCode,departureTime:f.departureTime,arrivalAirportFuzzy:f.arrivalAirport,arrivalAirportCode:f.arrivalCode,arrivalTime:f.arrivalTime},underName:{"@type":"http://schema.org/Person",name:s[T].name},reservationId:i,reservationStatus:"http://schema.org/ReservationConfirmed"})}if(h.length)return h}}).call();