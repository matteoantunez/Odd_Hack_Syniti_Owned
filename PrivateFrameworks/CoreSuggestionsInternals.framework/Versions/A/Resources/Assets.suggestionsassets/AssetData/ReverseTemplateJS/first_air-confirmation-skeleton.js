(function(){return function(e,r,t){var a,n,i,o,p,s,u,l,d,m,g=Scanner.fromMessage(e);g.setLocale(r);var h=[],c=[],v=[];a=g.getSpan().next(t.reservationId).nextAnyTag("td").tagContents();var C=g.getSpan().allInnerCapture(/(7F\s(\d{2,}))/,1);for(p=0;p<C.length;p++){(n={}).flightNumber=C[p].innerCapture(/7F\s(\d+)/,1);var T=C[p].nextDate();l=C[p].next(t.departure).nextAnyTag("td").tagContents(),n.departureTime=combineDateAndTime(T,l.innerDate()),n.departureCode=l.innerCapture(/^(\w{2,})\b/,1),l=C[p].next(t.arrival).nextAnyTag("td").tagContents(),n.arrivalTime=combineDateAndTime(T,l.innerDate()),n.arrivalCode=l.innerCapture(/^(\w{2,})\b/,1);var A=C[p].parentTag("table5").allInnerCapture(t.seat,1);for(n.passengers=[],m=0;m<A.length;m++)(s={}).name=A[m].previousAnyTag("td").tagContents(),s.seat=A[m].nextAnyTag("td").tagContents().innerCapture(/(\d+\w+)/,1),ASSERT(s.name)&&n.passengers.push(s);ASSERT(n.departureCode,n.arrivalCode,n.departureTime,n.arrivalTime,n.flightNumber)&&c.push(n)}for(d="Confirmed",p=0;p<c.length;p++)for(h=(u=c[p]).passengers,m=0;m<h.length;m++){v.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:u.airlineName,airlineCode:"7F",flightNumber:u.flightNumber,departureAirportFuzzy:u.departureAirport,departureAirportCode:u.departureCode,departureTime:u.departureTime,arrivalAirportFuzzy:u.arrivalAirport,arrivalAirportCode:u.arrivalCode,arrivalTime:u.arrivalTime},underName:{"@type":"http://schema.org/Person",name:(s=h[m]).name},checkinUrl:null,reservationId:a,reservationStatus:"http://schema.org/Reservation"+d,totalPrice:i,priceCurrency:o,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:s.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:s.seat}}})}if(v.length)return v}}).call();