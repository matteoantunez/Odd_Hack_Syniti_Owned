(function(){return function(e,t,r){var n=Scanner.fromMessage(e);n.setLocale(t);var a,i,l,o,p,u,d,g,s,m,c=n.getSpan(),f=[],h=[],C=c.next(r.dates).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s*[\n]+($<firstDate>.*)\s-\s($<secondDate>.*)/,r.dates)),v=C?C.$firstDate:null;c.next(r.itNum).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s*[\n]+(.*)/,r.itNum),1);i=r.cancelled.test(e.plain)?"cancelled":"confirmed",a=(C=c.next(r.confirmation).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s*[\n]+($<confirm>.*)\s*\(($<airlineName>.*)\)/,r.confirmation)))?C.$confirm:null,l=C?C.airlineName:null;var A=c.next(r.ticket).parentAnyTag("td").tagContents().toString().split("\n").filter(function(e){return e.length>0}).map(function(e){return e.replace(/(\d+)\s*\((.*)\)/,"$1")}),T=c.next(r.ticket).parentAnyTag("td").tagContents().toString().split("\n").filter(function(e){return e.length>0}).map(function(e){return e.replace(/(\d+)\s*\((.*)\)/,"$2")});C=n.getSpan().next(r.departure).parentAnyTag("td").nextAnyTag("td").tagContents().innerCapture(/[a-zA-Z ]+($<flightNumber>\d+)\s(?:\1.*)?/);for(var N=1;N<A.length;N++)f.push({name:T[N],ticketNumber:A[N]});var $=c.next(r.departure).nextTag("table7"),x=c.next(r.departure).nextTag("table7").allInnerTagsFiltered("td8");for(x=x.filter(function(e){return!/Terminal: \d/.test(e.getString())});!$.isNullSpan_&&0!==x.length;){u=(C=x[0].innerCapture(/($<airlineName>[a-zA-Z\s]+)\s\(($<airlineCode>[\d\w]+)\)/))?C.$airlineName:null,d=C?C.$airlineCode:null,p=x[1];var b=$.previousAnyTag("td").tagContents().innerCapture(regExpFormatted(/[a-zA-Z ]+($<flightNumber>\d+)\s?(?:\1.*)?/,r.op));o=b?b.$flightNumber:null,p=combineDateAndTime(n.getDetachedSpan(v.toString()),p),s=(C=x[2].innerCapture(/($<airlineName>[a-zA-Z\s]+)\s\(($<airlineCode>[\d\w]+)\)/))?C.$airlineName:null,m=C?C.$airlineCode:null,/\d?\d:\d{2}(?:AM|PM)?/i.test(g=x[3])||(g=x[4]),(g=combineDateAndTime(n.getDetachedSpan(v.toString()),g))&&h.push({departureAirport:u,departureCode:d,departureTime:p,arrivalTime:g,arrivalAirport:s,flightNumber:o,arrivalCode:m}),x=(x=($=$.nextTag("table7")).allInnerTagsFiltered("td8")).filter(function(e){return!/Terminal: \d/.test(e.getString())})}for(var y=[],S=0;S<h.length;S++)for(var F=h[S],z=0;z<f.length;z++){y.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:l,flightNumber:F.flightNumber,departureAirportFuzzy:F.departureAirport,departureAirportCode:F.departureCode,departureTime:F.departureTime,arrivalAirportFuzzy:F.arrivalAirport,arrivalAirportCode:F.arrivalCode,arrivalTime:F.arrivalTime},underName:{"@type":"http://schema.org/Person",name:f[z].name},reservationId:a,ticketNumber:f[z].ticketNumber,reservationStatus:"http://schema.org/Reservation"+i})}return y}}).call();