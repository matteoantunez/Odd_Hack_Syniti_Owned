(function(){return function(e,r,t){var a,i,p,n,o,m,s,g,u,l,h,d,c,v,N=Scanner.fromMessage(e);N.setLocale(r);var b=[],C=[];if(a=N.getSpan().innerCapture(regExpFormatted(/\1\s+(.*),/,t.name),1),d=N.getSpan().innerCapture(regExpFormatted(/\1\n\s*(.*)\s*-/,t.reservationId),1),not(a))return CONTINUE;C[a.toString()]={name:a,seats:{},seatingType:{},ticketNumber:g,totalPrice:u,priceCurrency:l},p=(c=N.getSpan().innerCapture(regExpFormatted(/\1\n\s*($<airlineCode>\w{2})($<flightNumber>\d+)/,t.flight))).$airlineCode,i=c.$flightNumber,n=(o=N.getSpan().innerCapture(regExpFormatted(/\1\n\s*(.*)/,t.departureAirport),1)).nextDate(),m=(s=N.getSpan().innerCapture(regExpFormatted(/\1\n\s*(.*)/,t.arrivalAirport),1)).nextDate(),ASSERT(p,i,o,n,s,m)&&b.push({reservationId:d,airlineCode:p,flightNumber:i,departureAirport:o,departureTime:n,arrivalAirport:s,arrivalTime:m,passengers:C});var f=[];for(v=0;v<b.length;v++)for(var y=b[v],T=Object.keys(y.passengers),S=0;S<T.length;S++){var A=y.passengers[T[S]],F={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:y.airlineName,airlineCode:y.airlineCode,flightNumber:y.flightNumber,departureAirportFuzzy:y.departureAirport,departureAirportCode:y.departureCode,departureTime:y.departureTime,arrivalAirportFuzzy:y.arrivalAirport,arrivalAirportCode:y.arrivalCode,arrivalTime:y.arrivalTime},underName:{"@type":"http://schema.org/Person",name:A.name},checkinUrl:h,reservationId:y.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:u,priceCurrency:l,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:g,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:A.seats[y.flightNumber],seatingType:A.seatingType[y.flightNumber]}}};valid(A.membershipNumber,A.programName)&&(F.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:A.membershipNumber,programName:A.programName}),f.push(F)}return f.length?f:void 0}}).call();