(function(){return function(e,t,r){var a=Scanner.fromMessage(e);a.setLocale(t);var n,i,o,p,s,g,c,l=a.getSpan(),h=r.isCancellation?"Cancelled":"Confirmed",d=[],u=[];(l.next("Travelers").parentAnyTag("table").allInnerTags("tr5").slice(2).forEach(function(e){d.push({name:e.nextAnyTag("td").tagContents().innerCapture(/#\d+?\s(.+)/,1)})}),0===d.length&&d.push({}),l.next(r.hotelReservationIdRegExp).exists())&&(p=(c=(n=l.next(r.hotelReservationIdRegExp).parentAnyTag("td").tagContents().innerCapture(r.hotelReservationIdRegExp,1)).parentAnyTag("table").allInnerTags("tr4").slice(2)[0].allInnerTags("td4").map(function(e){return e.tagContents()}))[0],s=c[1].innerCapture(/\s([\w\-]+)/,1).replace(/-/g," ").innerDate(),g=c[2].innerCapture(/\s([\w\-]+)/,1).replace(/-/g," ").innerDate(),p=(c=p.toString().split(/\s-\s/))[0],i=c[1],ASSERT(s,OR(i,p))&&u.push({"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:d[0].name},checkinTime:s,checkoutTime:g,reservationStatus:"http://schema.org/Reservation"+h,reservationId:n,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:i,telephone:o,address:p}}));if(l.next(r.carReservationIdRegExp).exists()){var m,v,R,C,T,f,x,y=(m=l.next(r.carReservationIdRegExp).parentAnyTag("td").tagContents().innerCapture(r.carReservationIdRegExp,1)).parentAnyTag("table").allInnerTags("tr4").slice(2)[0].allInnerTags("td4").map(function(e){return e.tagContents()});C=y[1],f=y[2];var A=(v=y[0]).innerCapture(r.carProviderNameRegExp);v=A[1],R=A[2];var E=C.toString().split(/\n/).map(function(e){return a.getDetachedSpan(e)});C=E[0].replace(/\-/g," ").innerDate(),T=E[1].innerCapture(r.carLocationAddressRegExp,1);var S=f.toString().split(/\n/).map(function(e){return a.getDetachedSpan(e)});f=S[0].replace(/\-/g," ").innerDate(),x=S[1].innerCapture(r.carLocationAddressRegExp,1),ASSERT(T,C)&&u.push({"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",reservationStatus:"http://schema.org/Reservation"+h,reservationId:m,underName:{"@type":"http://schema.org/Person",name:d[0].name},provider:{"@type":"http://schema.org/Organization",name:v},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:R}},pickupTime:C,pickupLocation:{"@type":"http://schema.org/Place",address:T},dropoffTime:f,dropoffLocation:{"@type":"http://schema.org/Place",address:x}})}if(l.next(r.flightReservationIdRegExp).exists()){var I,D=[];(I=l.next(r.flightReservationIdRegExp).parentAnyTag("td").tagContents().innerCapture(r.flightReservationIdRegExp,1)).parentAnyTag("table").allInnerTags("tr4").slice(2,-1).forEach(function(e){var t,n,i,o,p,s,g,c,l=e.allInnerTags("td4").map(function(e){return e.tagContents()}),h=l[1].innerCapture(r.flightNumberRegExp);t=h[1],n=h[2];var d=l[2].innerCapture(r.flightRouteRegExp);i=d[1],o=d[2],s=d[3],g=d[4];var u=l[3].innerCapture(r.flightDateTimesRegExp);p=u[1],c=u[2],l[0]=l[0].toString().replace(/.+ (\d{1,2})-(.+)-(\d{2})/,"$1 $2 20$3"),c=l[0]+" "+c,p=a.getDetachedSpan(p=l[0]+" "+p),c=a.getDetachedSpan(c),D.push({airlineCode:t,flightNumber:n,departureAirport:i,departureAirportCode:o,departureDateTime:p,arrivalAirport:s,arrivalAirportCode:g,arrivalDateTime:c})}),D.forEach(function(e){d.forEach(function(t){ASSERT(e.airlineCode,e.flightNumber,e.departureAirport,e.departureDateTime),u.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:e.airlineCode,airlineName:e.airlineName,flightNumber:e.flightNumber,departureAirportFuzzy:e.departureAirport,departureAirportCode:e.departureAirportCode,departureTime:e.departureDateTime,arrivalAirportFuzzy:e.arrivalAirport,arrivalAirportCode:e.arrivalAirportCode,arrivalTime:e.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:t.name},reservationId:I,reservationStatus:"http://schema.org/Reservation"+h,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:t.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:t.seat,seatingType:null}}})})})}return u}}).call();