(function(){return function(e,t,n){var a,r,i,o,g,s,p,c,u,C,m,h,l,x,d,S,R,f,E=Scanner.fromMessage(e);if(E.setLocale(t),!n.emailTitelConfirmation.test(e.subject)&&!n.emailTitelCancelConfirmation.test(e.subject))return CONTINUE;if(n.emailTitelCancelConfirmation.test(e.subject))return STOP;if(n.emailTitelConfirmation.test(e.subject)){g=E.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),a=E.getSpan().nextRegExp(n.guestName).tagContents().innerCapture(n.guestName,1),c=E.getSpan().nextRegExp(n.checkInDate).tagContents().innerCapture(n.checkInDate,1),m=E.getSpan().nextRegExp(n.checkOutDate).tagContents().innerCapture(n.checkOutDate,1),p=E.getSpan().nextRegExp(n.checkInTime).tagContents().innerCapture(n.checkInTime,1),C=E.getSpan().nextRegExp(n.checkOutTime).tagContents().innerCapture(n.checkOutTime,1),u=getFuzzyDate(E.getDetachedSpan(c+" "+p).innerDate()),h=getFuzzyDate(E.getDetachedSpan(m+" "+C).innerDate());var T=E.getSpan().nextRegExp(n.price).tagContents().innerCapture(n.price,1);if(i=T.innerCapture(/([\d,.]+)/,1),o=T.innerCapture(/([^\d,.]+)/,1).trim(),S=E.getSpan().nextRegExp(n.hotelAddress).tagContents().innerCapture(n.hotelAddress,1).trim(),d=E.getSpan().nextRegExp(n.hotelPhone).tagContents().innerCapture(n.hotelPhone,1),x=E.getSpan().nextRegExp(n.hotelName).tagContents().innerCapture(n.hotelName,1),l=E.getSpan().nextRegExp(n.hotelUrl).tagContents().innerLink(),!ASSERT(a,g,u,h,S))return CONTINUE;s="Confirmed"}return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:r},totalPrice:i,priceCurrency:o,checkinTime:u,checkoutTime:h,modifyReservationUrl:R,cancelReservationUrl:f,reservationStatus:"http://schema.org/Reservation"+(s||"Confirmed"),reservationId:g,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:x,url:l,telephone:d,address:S}}]}}).call();