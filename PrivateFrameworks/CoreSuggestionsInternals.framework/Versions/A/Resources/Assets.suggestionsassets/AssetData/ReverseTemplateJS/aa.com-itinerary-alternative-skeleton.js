(function(){return function(e,t,r){function a(e){return/AMERICAN\s*(?:AIRLINES)?/i.test(e.toString())?"AA":/US AIRWAYS/i.test(e.toString())?"US":""}var n,i,o,p,g,m,s,d=Scanner.fromMessage(e);d.setLocale(t);var l,u,h,A,c,T,v,y,C=[];for(d.getSpan().nextText(r.travelerInformation).nextTag("table2").allInnerTags("tr2"),l=d.getSpan().allInnerCapture(regExpFormatted(/(\1)/,r.date),1),p=0;p<l.length;p++)A=a(h=(g=l[p].nextAnyTag("td").tagContents().innerDate()).next(r.flight).nextAnyTag("td").tagContents()),T=(m=h.nextAnyTag("td").tagContents()).next(r.departure).nextAnyTag("td").tagContents(),c=combineDateAndTime(g,T.nextAnyTag("td").tagContents()),y=T.next(r.arrival).nextAnyTag("td").tagContents(),v=combineDateAndTime(g,y.nextAnyTag("td").tagContents()),u=(s=y.next(r.name).nextAnyTag("td").tagContents()).nextAnyTag("td").nextAnyTag("td").tagContents(),ASSERT(m,A,T,y,c,v)&&C.push({airlineName:h,airlineCode:A,flightNumber:m,reservationId:n,departureAirport:T,departureTime:c,arrivalAirport:y,arrivalTime:v,passengerName:s,seatingType:u});n=d.getSpan().innerCapture(regExpFormatted(/\1\s([^\[\s]*)/,r.reservationId),1);var x=[];for(p=0;p<C.length;p++){var N=C[p],b={},S={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:N.airlineName,airlineCode:N.airlineCode||"AA",flightNumber:N.flightNumber,departureAirportFuzzy:N.departureAirport,departureAirportCode:N.departureCode,departureTime:N.departureTime,arrivalAirportFuzzy:N.arrivalAirport,arrivalAirportCode:N.arrivalCode,arrivalTime:N.arrivalTime},underName:{"@type":"http://schema.org/Person",name:N.passengerName},checkinUrl:i,reservationId:n,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:b.totalPrice,priceCurrency:o,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:b.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatingType:N.seatingType,seatNumber:b.seat}}};valid(b.membershipNumber)&&(S.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:b.membershipNumber,programName:b.programName}),x.push(S)}if(x.length)return x}}).call();