(function(){return function(e,t,a){var r,n,i=Scanner.fromMessage(e);i.setLocale(t);var l,g,o,p,m,s,b,T,u,c,h,x,d,C,v,N=[],f={};r=i.getSpan().nextText(a.ticketInfo).previousAnyTag("td").tagContents().innerCapture(/\(([A-Z1-9]+)\)/,1),g=i.getSpan().nextText(a.ticketInfo).parentTag("table3").nextTag("table3").allInnerTags("table6");for(var y=0;y<g.length;y++){l=(l=(s=g[y].nextTag("table7").nextTag("table7").nextTag("table7").nextTag("table7").nextTag("table7").nextTag("table7")).nextTag("table7").tagContents()).toString().split("\n").filter(function(e,t,a){return a.indexOf(e)===t}),c=s.nextTag("table7").nextTag("table7").tagContents().innerCapture(/(.+)\n(.+)\n(.+)/,1),u=s.nextTag("table7").nextTag("table7").tagContents().allInnerDates(),u=combineDateAndTime(u[0],u[1]),h=s.nextTag("table7").nextTag("table7").nextTag("table7").tagContents().allInnerDates(),h=combineDateAndTime(h[0],h[1]),x=s.nextTag("table7").nextTag("table7").nextTag("table7").tagContents().innerCapture(/(.+)\n(.+)\n(.+)/,1),T=s.nextTag("table7").nextTag("table7").nextTag("table7").nextTag("table7").tagContents().innerCapture(/(\w+)\s(\d+)/,1),o=s.nextTag("table7").nextTag("table7").nextTag("table7").nextTag("table7").tagContents().innerCapture(/(\w+)\s(\d+)/,2);for(var A=0;A<l.length;A++)f[A]={name:l[A],programName:v,membershipNumber:C,ticketNumber:d,seats:{},seatingType:{},totalPrice:p,priceCurrency:m};ASSERT(T,o,u,c,h,x)&&N.push({airlineCode:T,airlineName:b,flightNumber:o,departureAirport:c,departureTime:u,arrivalAirport:x,arrivalTime:h,passengers:f})}var k=[];for(y=0;y<N.length;y++){var S=N[y],z=Object.keys(S.passengers);for(A=0;A<z.length;A++){var F=S.passengers[z[A]],I={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:S.airlineName,airlineCode:S.airlineCode,flightNumber:S.flightNumber,departureAirportFuzzy:S.departureAirport,departureAirportCode:S.departureCode,departureTime:S.departureTime,arrivalAirportFuzzy:S.arrivalAirport,arrivalAirportCode:S.arrivalCode,arrivalTime:S.arrivalTime},underName:{"@type":"http://schema.org/Person",name:F.name,email:F.email},checkinUrl:n,reservationId:r,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:F.totalPrice,priceCurrency:F.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:F.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:F.seats[S.flightNumber],seatingType:F.seatingType[S.flightNumber]}}};valid(F.membershipNumber,F.programName)&&(I.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:F.membershipNumber,programName:F.programName}),k.push(I)}}if(k.length)return k}}).call();