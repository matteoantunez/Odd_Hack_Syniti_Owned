(function(){return function(e,t,r){var a,i,n=Scanner.fromMessage(e),o=n.getSpan();n.setLocale(t);for(var p,g,l,u,d,s,x,m,h={},T=[],c=(o.nextText("vocabulary.itinerayHeader").nextTag("table1").allInnerTagsFiltered("tr1"),1),v=o.nextText(r.legPrefix+""+c);v.exists();)h={},[,s,m]=v.nextTag("td1").tagContents().innerCapture(/(.+)-(.+)/),[,u,g]=v.nextText(r.flightPrefix).nextTag("td1").tagContents().innerCapture(/([A-Z0-9]{2})(\d+)/),[,d]=v.nextText(r.departurePrefix).nextTag("td1").tagContents().innerCapture(/(.* @ [0-9]{2}:[0-9]{2})\,?/),[,x]=v.nextText(r.arrivalPrefix).nextTag("td1").tagContents().innerCapture(/(.* @ [0-9]{2}:[0-9]{2})\,?/),d=getFuzzyDate(n.getDetachedSpan(d.toString())),x=getFuzzyDate(n.getDetachedSpan(x.toString())),v=o.nextText(r.legPrefix+""+ ++c),h.departureAirport=s.trim(),h.arrivalAirport=m.trim(),h.airlineCode=u,h.flightNumber=g,h.departureTime=d,h.arrivalTime=x,ASSERT(h.departureAirport,h.arrivalAirport,h.departureTime,h.arrivalTime,h.airlineCode,h.flightNumber)&&T.push(h);var C=(l=o.nextText(r.totalCostPrefix).nextTag("td1").tagContents()).innerCapture(/([\d,.-]+)/,1),f=l.innerCapture(/([^\d,.-\w]+)/,1).trim();null!==f&&0!==f.toString().length||(f=l.innerCapture(/([^\d,.-]+)/,1).trim());var y=[];for(v=o.nextText(r.passengerPrefix+""+(c=1));v.exists();)h={},p=v.nextTag("td1").tagContents(),h.name=p,y.push(h),v=o.nextText(r.passengerPrefix+""+ ++c);for(var A=[],S=0;S<T.length;S++)for(var z=T[S],N=0;N<y.length;N++){var P=y[N];A.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:z.airlineName,airlineCode:z.airlineCode,flightNumber:z.flightNumber,departureAirportFuzzy:z.departureAirport,departureAirportCode:z.departureCode,departureTime:z.departureTime,arrivalAirportFuzzy:z.arrivalAirport,arrivalAirportCode:z.arrivalCode,arrivalTime:z.arrivalTime},underName:{"@type":"http://schema.org/Person",name:P.name},checkinUrl:i,reservationId:a,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:P.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:"",seatingType:""}},totalPrice:C,priceCurrency:f,reservationStatus:"http://schema.org/ReservationConfirmed"})}if(A.length)return A}}).call();