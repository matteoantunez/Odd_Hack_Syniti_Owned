(function(){return function(e,t,n){var r,a,i,o,g,p,s,c,m,u,x,d,l,C,h=Scanner.fromMessage(e);if(h.setLocale(t),!n.emailTitelConfirmation.test(e.subject))return CONTINUE;g=h.getSpan().nextRegExp(n.reservationId).nextAnyTag("td").tagContents().innerCapture(/([\w\d]+)/,1),r=h.getSpan().nextRegExp(n.guestName).parentAnyTag("table").nextAnyTag("td").tagContents().innerCapture(n.guestName,1),s=h.getSpan().nextRegExp(n.checkInDate).nextDate(),c=h.getSpan().nextRegExp(n.checkOutDate).nextDate();var R=h.getSpan().nextRegExp(n.price).tagContents().innerCapture(n.price,1);i=R.innerCapture(/([\d,.]+)/,1),o=R.innerCapture(/([^\d,.]+)/,1).trim();var f=h.getSpan().nextRegExp(n.hotelInfo).nextAnyTag("td").nextAnyTag("td").tagContents();if(u=f.innerCapture(regExpFormatted(/(.+)/),1),m=f.nextLink().nextLink().nextLink(),x=f.innerPhoneNumber(),d=f.innerCapture(regExpFormatted(/.+\n([\s\S]*)\1/,n.hotelAddress),1).trim(),C=l=h.getSpan().nextRegExp(n.modifyUrl).nextLink(),n.emailTitelConfirmation.test(e.subject)){if(!ASSERT(r,g,s,c,d))return CONTINUE;p="Confirmed"}if(n.emailTitelCancelConfirmation.test(e.subject)){if(r=h.getSpan().nextRegExp(n.guestName).innerCapture(n.guestName,1),g=h.getSpan().nextRegExp(n.cancelReservationId).innerCapture(n.cancelReservationId,1).trim(),!ASSERT(r,g,s,c,d))return CONTINUE;p="Cancelled"}return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:r,email:a},totalPrice:i,priceCurrency:o,checkinTime:s,checkoutTime:c,modifyReservationUrl:l,cancelReservationUrl:C,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),reservationId:g,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:u,url:m,telephone:x,address:d}}]}}).call();