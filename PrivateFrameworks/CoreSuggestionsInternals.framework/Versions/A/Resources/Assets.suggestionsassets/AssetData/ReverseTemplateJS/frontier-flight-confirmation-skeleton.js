(function(){return function(e,r,t){if(!e||!r||!t)return CONTINUE;var a=Scanner.fromMessage(e);a.setLocale(r);var n,i,p,o,s,d,l,u,g,h,v,m,c,D,T=a.getSpan(),f=[];for(n=T.next(t.reservationId).nextRegExp(/[A-Z\d]{6}/),s=a.getSpan().next(t.reservationId);s.nextText(t.depart).exists();){p=(s=s.nextText(t.depart)).nextDate(),o=s.parentAnyTag("table").allInnerTags("table5");for(var A=0;A<o.length/2;A++){var C=o[2*A].allInnerTagsFiltered("td6"),S=(d=C[0].innerCapture(/([A-Z\d]{2})\s?(\d{3,4})/))[1],x=d[2];g=C[1].innerDate(),h=(u=C[2].innerCapture(/.+\(([A-Z]{3})\)/))[1],u[0],l=combineDateAndTime(p,g),Date.parse(unSpanDate_(l))<Date.parse(unSpanDate_(v))&&(l=modifyDate(l,1)),c=C[3].innerDate(),v=combineDateAndTime(p,c),(m=C[4].innerCapture(/.+\(([A-Z]{3})\)/))[0],D=m[1],Date.parse(unSpanDate_(l))>Date.parse(unSpanDate_(v))&&(v=modifyDate(v,1));var y=[];T.next(t.passenger).parentTag("table5").allInnerTags("tr5").forEach(function(e){(i=e.allInnerTagsFiltered("td5")[0])&&i.toString().length<30&&y.push(i)}),ASSERT(x,h,l,D,v)&&f.push({airlineCode:S,flightNumber:x,reservationId:n,departureCode:h,departureDate:l,arrivalCode:D,arrivalDate:v,passengers:y})}}var b=[];for(A=0;A<f.length;A++)for(var I=f[A],F=I.passengers,N=0;N<F.length;N++){b.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:I.airlineCode,flightNumber:I.flightNumber,departureAirportFuzzy:I.departureAirport,departureAirportCode:I.departureCode,departureTime:I.departureDate,arrivalAirportFuzzy:I.arrivalAirport,arrivalAirportCode:I.arrivalCode,arrivalTime:I.arrivalDate},underName:{"@type":"http://schema.org/Person",name:F[N]},reservationId:n,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:"",seatingType:""}}})}return b.length?b:void 0}}).call();