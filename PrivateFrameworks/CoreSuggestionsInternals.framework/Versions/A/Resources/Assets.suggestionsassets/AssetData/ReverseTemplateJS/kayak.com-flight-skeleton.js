(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var i,p,n,d=a.getSpan().next(t.reservationIdPrefix).parentTag("td3").tagContents().innerCapture(regExpFormatted(/\1\s(.+)/,t.reservationIdPrefix),1),m=[],o=a.getSpan().nextText(t.departurePrefix),u=/p/,l=/a/;if(o.exists()){var T={};T.departureDate=o.parentTag("td3").tagContents().innerCapture(regExpFormatted(/\1(.+?)\,(.+)/,t.departurePrefix),2).trim(),i=o.nextTag("table4").nextTag("td4").nextTag("td4").nextTag("td4").tagContents().innerCapture(/($<airlineName>.+),\sFlight\s($<flightNumber>\d+)/),T.airlineName=i.$airlineName,T.flightNumber=i.$flightNumber,p=o.nextText(t.takeoffPrefix).parentTag("td4").tagContents().innerCapture(/($<departureTime>\S+), ($<departureAirport>.+)\(($<departureAirportCode>.+)\)/),T.departureTime=p.$departureTime,u.test(T.departureTime)?T.departureTime=T.departureTime.toString().replace(u,"pm"):l.test(T.departureTime)&&(T.departureTime=T.departureTime.toString().replace(l,"am")),T.departureAirport=p.$departureAirport.trim(),T.departureAirportCode=p.$departureAirportCode,T.departureDate=getFuzzyDate(a.getDetachedSpan(T.departureDate.toString())),T.departureTime=getFuzzyDate(a.getDetachedSpan(T.departureTime.toString())),T.departureTime=combineDateAndTime(T.departureDate,T.departureTime),n=o.nextText(t.landingPrefix).parentTag("td4").tagContents().innerCapture(/($<arrivalTime>\S+), ($<arrivalAirport>.+)\(($<arrivalAirportCode>.+)\)/),T.arrivalTime=n.$arrivalTime,u.test(T.arrivalTime)?T.arrivalTime=T.arrivalTime.toString().replace(u,"pm"):l.test(T.arrivalTime)&&(T.arrivalTime=T.arrivalTime.toString().replace(l,"am")),T.arrivalAirport=n.$arrivalAirport.trim(),T.arrivalAirportCode=n.$arrivalAirportCode,T.arrivalTime=getFuzzyDate(a.getDetachedSpan(T.arrivalTime.toString())),T.arrivalTime=combineDateAndTime(T.departureDate,T.arrivalTime),m.push(T)}var g=a.getSpan().nextText(t.returnPrefix);if(g.exists()){var v={};v.departureDate=g.parentTag("td3").tagContents().innerCapture(regExpFormatted(/\1(.+?)\,(.+)/,t.returnPrefix),2).trim(),i=g.nextTag("table4").nextTag("td4").nextTag("td4").nextTag("td4").tagContents().innerCapture(/($<airlineName>.+),\sFlight\s($<flightNumber>\d+)/),v.airlineName=i.$airlineName,v.flightNumber=i.$flightNumber,p=g.nextText(t.takeoffPrefix).parentTag("td4").tagContents().innerCapture(/($<departureTime>\S+), ($<departureAirport>.+)\(($<departureAirportCode>.+)\)/),v.departureTime=p.$departureTime,u.test(v.departureTime)?v.departureTime=v.departureTime.toString().replace(u,"pm"):l.test(v.departureTime)&&(v.departureTime=v.departureTime.toString().replace(l,"am")),v.departureAirport=p.$departureAirport.trim(),v.departureAirportCode=p.$departureAirportCode,v.departureDate=getFuzzyDate(a.getDetachedSpan(v.departureDate.toString())),v.departureTime=getFuzzyDate(a.getDetachedSpan(v.departureTime.toString())),v.departureTime=combineDateAndTime(v.departureDate,v.departureTime),n=g.nextText(t.landingPrefix).parentTag("td4").tagContents().innerCapture(/($<arrivalTime>\S+), ($<arrivalAirport>.+)\(($<arrivalAirportCode>.+)\)/),v.arrivalTime=n.$arrivalTime,u.test(v.arrivalTime)?v.arrivalTime=v.arrivalTime.toString().replace(u,"pm"):l.test(v.arrivalTime)&&(v.arrivalTime=v.arrivalTime.toString().replace(l,"am")),v.arrivalAirport=n.$arrivalAirport.trim(),v.arrivalAirportCode=n.$arrivalAirportCode,v.arrivalTime=getFuzzyDate(a.getDetachedSpan(v.arrivalTime.toString())),v.arrivalTime=combineDateAndTime(v.departureDate,v.arrivalTime),m.push(v)}for(var s=[],c=0;c<m.length;c++){var C=m[c];s.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:C.airlineName,airlineCode:C.airlineCode,flightNumber:C.flightNumber,departureAirportFuzzy:C.departureAirport,departureAirportCode:C.departureAirportCode,departureTime:C.departureTime,arrivalAirportFuzzy:C.arrivalAirport,arrivalAirportCode:C.arrivalAirportCode,arrivalTime:C.arrivalTime},underName:{"@type":"http://schema.org/Person",name:""},reservationId:d,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:"",priceCurrency:"",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:"",ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:""}}})}return s}}).call();