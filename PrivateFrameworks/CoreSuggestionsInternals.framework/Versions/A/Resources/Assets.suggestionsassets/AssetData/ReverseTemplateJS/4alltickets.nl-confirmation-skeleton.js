(function(){return function(e,t,n){var a=Scanner.fromMessage(e);a.setLocale(t);var r,o,s,c,i,p,g,m,l,h,u,T="Confirmed",x=[],f=[];return r=a.getSpan().innerCapture(new RegExp("(?:"+n.personUnderNamePrefix+")\\.?\\s(.*)"),1),a.getSpan().nextText(n.ticketsBlockPrefix).parentTag("table3").allInnerTags("tr3").slice(1,-5).forEach(function(e){var t={},n=e.allInnerTags("td3");t.name=n[1].tagContents().innerCapture(/(.*?)\s</,1),t.url=n[1].tagContents().innerLink(),t.startDateTime=n[2].tagContents().innerDate(),t.locationName=n[2].tagContents().toString().replace(/\n/g," ").replace(/\s+/g," ").replace(new RegExp(t.startDateTime),"").trim(),x.push(t)}),[,u,h]=a.getSpan().nextText(n.priceBlockPrefix).nextText(n.pricePrefix).nextTag("td3").tagContents().innerCapture(/(\D)\s?([\d,.]+)/),x.forEach(function(e){ASSERT(e.name,e.startDateTime)&&f.push({"@context":"http://schema.org","@type":"http://schema.org/EventReservation",name:r,totalPrice:h,priceCurrency:u,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:i,ticketToken:p,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:g,seatSection:m,seatRow:l}},reservationFor:{"@type":"http://schema.org/Event",eventStatus:"http://schema.org/Event"+T,name:e.name,url:e.url,startDate:e.startDateTime,endDate:o,location:{"@type":"http://schema.org/Place",name:e.locationName,telephone:c,address:s}}})}),f.length>0?f:CONTINUE}}).call();