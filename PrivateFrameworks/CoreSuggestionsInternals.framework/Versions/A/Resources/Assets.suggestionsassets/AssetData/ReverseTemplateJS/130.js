new ReverseTemplateList([new ReverseTemplate("lufthansa.com-e-ticket-es",function(e){return/^Detalles de la reserva/.test(e.subject)},function(e){var r="es_ES",t={};if(/^Detalles de la reserva/.test(e.subject))return t.reservationCodePrefix="C\xf3digo de reserva:",t.travelInformationHeader="Detalles de la reserva",t.passengerNamePrefix="Fechas del viaje para:",t.ticketNumberPrefix="N\xfamero de billete",t.flightColumnHeader="Vuelo",t.dateColumnHeader="Fecha",t.departureAirportColumnHeader="De",t.arrivalAirportColumnHeader="A",t.departureTimeColumnHeader="Salida",t.arrivalTimeColumnHeader="Llegada",t.operatedByPrefix="operado por:",t.reservationColumnHeader="Reserva",t.baggageRegulations="Informaci\xf3n de vuelos",t.seatPrefix="asiento",loadHelper("lufthansa.com-e-ticket.js")(e,r,t);var a=null;return(a=parseMicrodata(e.html))?a:(t.reservationIdentifier=/de reserva de Lufthansa:]?/i,t.reservationCode=/([^( ]+)/i,t.passengerName=/\w+\s?\/\s?\w+\s?\w+\w*/,t.legMarker=/operado por:/i,t.legMarkerCounter=/operado por:/gi,t.flightNameExtractor=/operado por:\s*(\w+)\s*/i,t.passengerName=/[\w ]+\s\/\s[\w ]+/i,t.ticketNumberPrefix="de billete:",t.ticketClass=/clase\/Tarifa:\s*(\w+)/i,t.location=/:\s?(.+)/i,t.locationExtractor=/([^(]+)\((\w+)\)/i,t.totalPrice=/Precio total para todos los pasajeros/i,t.priceExtractor=/([\d,]+\.\d+])\s?([^ ]+)\s?]/,loadHelper("lufthansa.com-2016-e-ticket.js")(e,r,t))},"SG5c7350d8"),new ReverseTemplate("lufthansa.com-e-ticket-it",function(e){return/^Dettagli della prenotazione/.test(e.subject)},function(e){var r="it_IT",t={};if(/Dettagli della sua prenotazione/i.test(e.subject)){var a=null;return(a=parseMicrodata(e.html))?a:(t.reservationIdentifier=/prenotazione Lufthansa/i,t.reservationCode=/([^( ]+)/i,t.passengerName=/\w+\s?\/\s?\w+\s?\w+\w*/,t.legMarker=/operato da/i,t.legMarkerCounter=/operato da/gi,t.flightNameExtractor=/operato da\s*(\w+)\s*/i,t.passengerName=/[\w ]+\s\/\s[\w ]+/i,t.ticketNumberPrefix="Numero biglietto:",t.ticketClass=/Classe\/Tariffa:\s*(\w+)/i,t.location=/:\s?(.+)/i,t.locationExtractor=/([^(]+)\((\w+)\)/i,t.totalPrice=/Prezzo totale per riprenotazione per tutti i passeggeri/i,t.priceExtractor=/([\d,]+\.\d+])\s?([^ ]+)\s?]/,loadHelper("lufthansa.com-2016-e-ticket.js")(e,r,t))}return t.reservationCodePrefix="Codice di prenotazione:",t.passengerNamePrefix=/(Le nuove date del viaggio sono|Date di viaggio per)\:/i,t.ticketNumberPrefix="Numero del biglietto",t.flightColumnHeader="Volo",t.dateColumnHeader="Data",t.departureAirportColumnHeader="Da",t.arrivalAirportColumnHeader="A",t.departureTimeColumnHeader="Partenza",t.arrivalTimeColumnHeader="Arrivo",t.operatedByPrefix="operato da",t.reservationColumnHeader="Prenotazione",t.baggageRegulations=/(Informazione sui suoi voli|regolamenti bagagli)/,t.seatPrefix="posto",loadHelper("lufthansa.com-e-ticket.js")(e,r,t)},"SG35e99075"),new ReverseTemplate("lufthansa.com-ticket-details",function(e){return/^Your ticket details & travel information/.test(e.subject)},function(e){if(/^Your ticket details & travel information/.test(e.subject)){var r,t="Reservation code:",a="Total Price for all passengers",i="Travel dates for:",o="Your flight itinerary",n="Total Price of your Ticket",s="seat:",l=Scanner.fromMessage(e);if(l.setLocale("en_US"),!l.getSpan().nextText("Reservation code:").exists())return CONTINUE;var p,d,u,g,m,c,v,f,h,C,b,T,x,N,S=[],k={};r=(c=l.getSpan().innerCapture(regExpFormatted(/\1\s+($<reservationId>.*?) <($<checkinUrl>.*)>/,t)))?c.$reservationId:null,N=(x=l.getSpan().nextText(a).nextTag("td1").nextTag("td1").tagContents()).nextTag("td1").tagContents(),(d=l.getSpan().nextText(i).parentTag("table5").allInnerTagsFiltered("td5")).length&&(k[p=d[1].toString()]={name:p,price:N,currency:x,seats:{}}),g=l.getSpan().nextText(o).nextTag("table1").nextTag("table1").withEnd(l.getSpan().nextText(n).getStart()).allInnerTags("table1");for(var w,P=0;w=g[P++];)if(7===(u=w.allInnerTagsFiltered("td1")).length){f=(v=u[0].innerCapture(/^($<code>[A-Z]+) ($<flightNumber>\d+)/))?v.$code:null,m=v?v.$flightNumber:null;var H=u[1].allDates();H&&(h=l.getDetachedSpan(H[0].toString()+" "+u[4].toString()).innerDate(),b=l.getDetachedSpan((1===H.length?H[0].toString():H[1].toString())+" "+u[5].toString()).innerDate()),C=u[2].innerCapture(/^([^<\n]+)/,1),T=u[3].innerCapture(/^([^<\n]+)/,1);var y=u[6].innerCapture(new RegExp("\\b"+s+" ([\\w]+)"),1);valid(y,m)&&(k[p].seats[m]=y),ASSERT(f,m,h,C,b,T)&&S.push({airlineCode:f,flightNumber:m,departureAirport:C,departureTime:h,arrivalAirport:T,arrivalTime:b,passengers:k})}var A=[];for(P=0;P<S.length;P++)for(var z=S[P],D=Object.keys(z.passengers),j=0;j<D.length;j++){var I=z.passengers[D[j]],R={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:"LH",flightNumber:z.flightNumber,departureAirportFuzzy:z.departureAirport,departureAirportCode:z.departureCode,departureTime:z.departureTime,arrivalAirportFuzzy:z.arrivalAirport,arrivalAirportCode:z.arrivalCode,arrivalTime:z.arrivalTime},underName:{"@type":"http://schema.org/Person",name:I.name},reservationId:r,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:I.price,priceCurrency:I.currency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:I.seats[z.flightNumber]}}};valid(I.membershipNumber,I.programName)&&(R.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:I.membershipNumber,programName:I.programName}),A.push(R)}if(A.length)return A}},"SG932b9c17")]);