(function(){return function(e,t,r,n,a,c,o){var u=[];if(!(e instanceof Array&&e.every(function(e){return e.every(function(e){return e instanceof RegExp})})))throw new Error("Expected an Array of Array of RegExp.");if(!(t instanceof Scanner.Span_))throw new Error("Expected a Scanner.Span_.");for(var f=0;f<e.length;f++)for(var g=0;g<e[f].length;g++)for(var i=e[f][g],h=t.next(i);h.exists()&&""!=h;){for(var l=r(h,i).filter(function(e){return e.exists()&&(0===e.getStart()||e.getStart()-h.getEnd()<256)}),s=0;s<l.length;s++){var S=l[s];if(n(S,h)){var d=0===S.getStart()?0:S.getStart()-h.getEnd();if(a&&(S=a(S)),d<=0)return S;c&&(d=c(S,d));var p={keyRegExp:i,matchedKey:h,matchedValue:S,score:d};"function"==typeof o&&o(p.matchedValue)?u.push(p):"function"!=typeof o&&u.push(p)}}h=h.next(i)}return 0===u.length?t.getScanner().getNullSpan():(u.sort(function(e,t){return e.score>t.score?1:e.score<t.score?-1:e.matchedValue.getStart()>t.matchedValue.getStart()?1:e.matchedValue.getStart()<t.matchedValue.getStart()?-1:0}),u[0].matchedValue)}}).call();