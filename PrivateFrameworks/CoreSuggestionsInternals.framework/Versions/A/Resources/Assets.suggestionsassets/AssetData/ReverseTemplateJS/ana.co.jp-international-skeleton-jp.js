(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var i,n,p,o,u,s=a.getSpan(),g=[],m=[],l=[],d=1,c="Confirmed",h="All Nippon Airways";i=s.innerCapture(regExpFormatted(/\1.*\n\s(.*)\n/,t.reservationId_prefix),1),m=s.innerCapture(regExpFormatted(/\1\s+([\s\S]*?)\s{2}\u25a0/,t.name_prefix),1).split(/\n/);for(var v=s.innerCapture(regExpFormatted(/\1(.*)\n(.*)\n(.*)\n(.*)\n/,"["+d+"]"));v;){var z,y,F={};z=y=getFuzzyDate(a.getDetachedSpan(v[1].toString()).firstDate()),F.flightNumber=/[A-Z]{2}(.*)/.exec(v[1])[1],F.airlineCode=v[1].innerCapture(/(\D{2})\d{2,}/,1);var f=/\s(.*)\s-\s(.*)/.exec(v[2]);F.departureAirportFuzzy=f[1],F.arrivalAirportFuzzy=f[2];var A=/\s(.*)\u767a(.*)\u7740/.exec(v[3]),D=A[1],S=A[2];F.departureDateTime=getFuzzyDate(a.getDetachedSpan(z.toString()+D.toString()).firstDate()),F.arrivalDateTime=getFuzzyDate(a.getDetachedSpan(y.toString()+S.toString()).firstDate()),(u=/\s(.*)\//.exec(v[4]))&&(F.seatingType=u[1]),ASSERT(F.flightNumber,F.departureDateTime,F.arrivalDateTime,F.departureAirportFuzzy,F.arrivalAirportFuzzy)&&g.push(F),d++,v=s.innerCapture(regExpFormatted(/\1(.*)\n(.*)\n(.*)\n(.*)\n/,"["+d+"]"))}for(var C=0;C<m.length;C++)for(var T=0;T<g.length;T++){var x=g[T],N={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:h,airlineCode:x.airlineCode,flightNumber:x.flightNumber,departureAirportFuzzy:x.departureAirportFuzzy,departureAirportCode:x.departureAirportCode,departureTime:x.departureDateTime,arrivalAirportFuzzy:x.arrivalAirportFuzzy,arrivalAirportCode:x.arrivalAirportCode,arrivalTime:x.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:m[C].trim()},checkinUrl:o,reservationId:i,reservationStatus:"http://schema.org/Reservation"+c,totalPrice:n,priceCurrency:p,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:x.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:x.seatNumber,seatingType:x.seatingType}}};l.push(N)}if(l.length)return l}}).call();