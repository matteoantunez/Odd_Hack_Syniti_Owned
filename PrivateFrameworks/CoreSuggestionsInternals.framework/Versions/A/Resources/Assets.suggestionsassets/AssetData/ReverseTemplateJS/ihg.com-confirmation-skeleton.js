(function(){return function(e,t,n){var r=Scanner.fromMessage(e);r.setLocale(t);var a,i,s,o,g,p,x,d,c,h,l=r.getSpan(),m=n.isCancellation?"Cancelled":"Confirmed";p=l.innerCapture(regExpFormatted(/\1\s?:?\s(\d+)/,n.reservationIdPrefix),1),a=l.nextText(n.underPersonNamePrefix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s(.+)/,n.underPersonNamePrefix),1);var u=l.nextText(n.hotelNamePrefix).nextTag("table5").nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").tagContents().toString().replace(/\n/gm," ").replace(/\s+/gm," ").match(/(.+)\s<(.+?)>\s(.+)/);if(u&&4===u.length){s=u[1];var f=r.getDetachedSpan(g=u[3]).innerAddress();f.toString().length&&(g=f)}(o=l.next(n.hotelPhonePrefix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s:\s(.+)/,n.hotelPhonePrefix),1))&&o.exists()||(o=r.getSpan().next(n.hotelNamePrefix2).nextPhoneNumber());var T=l.nextText(n.dateTimesPrefix).parentAnyTag("table").allInnerTags("td6").filter(function(e){return e.tagContents().toString().length>0}).map(function(e){return e.tagContents()});if("en_US"==t){var P=l.nextText(n.altDateTimesPrefix).nextTag("td5").tagContents().split("-");x=r.getDetachedSpan(P[0]+" "+T[5]).innerDate(),d=r.getDetachedSpan(P[1]+" "+T[6]).innerDate()}else x=r.getDetachedSpan(T[2]+" "+T[5]).innerDate(),d=r.getDetachedSpan(T[4]+" "+T[6]).innerDate();var C=l.nextText(n.pricePrefix).nextAnyTag("td").tagContents().innerCapture(/(\D)([\d\,\.]+)/);if(C&&C!==r.getNullSpan()?(h=C[1],c=C[2]):(C=l.innerCapture(regExpFormatted(/\1\s(\D)\s?([\d\,\.]+)/,n.pricePrefix)))&&3===C.length?(h=C[1],c=C[2]):(C=l.innerCapture(regExpFormatted(/\1\s?([\d\,\.]+)\s(\D)/,n.pricePrefix)))&&3===C.length&&(h=C[1],c=C[2]),ASSERT(a,s,x))return[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a,email:i},totalPrice:c,priceCurrency:h,checkinTime:x,checkoutTime:d,reservationStatus:"http://schema.org/Reservation"+m,reservationId:p,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:s,telephone:o,address:g}}]}}).call();