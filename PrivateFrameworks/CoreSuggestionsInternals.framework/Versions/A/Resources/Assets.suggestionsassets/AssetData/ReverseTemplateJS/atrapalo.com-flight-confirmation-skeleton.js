(function(){return function(e,t,r){var a=Scanner.fromMessage(e);a.setLocale(t);var n,i,o,p=a.getSpan(),g=[],u=[],l=[],s=function(e,t){e.forEach(function(e){var r,n,i,o,p,g,u,l,s,m,c=a.getDetachedSpan(e.toString()),d=c.getTagNumber(),C=c.allInnerTags("td"+d);C.toString()!==a.getNullSpan().toString()&&(r=C[1].tagContents().innerCapture(/([0-9A-Z]{2})(\d{3,4})/)[1],n=C[1].tagContents().innerCapture(/([0-9A-Z]{2})(\d{3,4})/)[2],i=C[3].tagContents().innerCapture(/(.*)\s(.*)/)[1],o=C[3].tagContents().innerCapture(/(.*)\s(.*)/)[2],p=C[4].tagContents().innerCapture(/(.*)\s\((.*)\),/)[1],g=C[4].tagContents().innerCapture(/(.*)\s\((.*)\),/)[2],u=C[5].tagContents().innerCapture(/(.*)\s(.*)/)[1],l=C[5].tagContents().innerCapture(/(.*)\s(.*)/)[2],s=C[6].tagContents().innerCapture(/(.*)\s\((.*)\),/)[1],m=C[6].tagContents().innerCapture(/(.*)\s\((.*)\),/)[2],t({airlineName:C[0].tagContents().toString(),airlineCode:r,flightNumber:n,departureDateTime:a.getDetachedSpan(i.toString()+" "+o.toString()).innerDate(),departureAirport:p.toString(),departureAirportCode:g.toString(),arrivalDateTime:a.getDetachedSpan(u.toString()+" "+l.toString()).innerDate(),arrivalAirport:s.toString(),arrivalAirportCode:m.toString(),seatNumber:null,seatType:null}))})},m=p.nextText(r.passengerNameHeader),c=m.parentAnyTag("td").getTagNumber(),d=m.parentAnyTag("table").allInnerTags("tr"+c);d.slice(1).forEach(function(e){g.push({name:e.nextAnyTag("td").tagContents().innerCapture(/(.*)/,1).toString().replace(r.underNamePersonSuffixRegExp,""),ticketNumber:e.nextAnyTag("td").tagContents().allInnerCapture(regExpFormatted(/\1\s([\dA-Z]+)/,r.ticketNumber),1)})}),n=p.innerCapture(regExpFormatted(/\1\s(.*?)\s/,r.reservationIdPrefix),1),(d=p.nextText(r.flightSummaryBlockPrefix).nextTag("table7").allInnerTags("tr7")).slice(1).forEach(function(e){u.push(e)});var C=p.next(r.flightSummaryBlockPrefix).next(r.flightNextSummaryBlockPrefix).next(r.flightSummaryBlockPrefix),h=C.parentAnyTag("td").getTagNumber();return(d=C.nextTag("table"+h).allInnerTags("tr"+h)).toString()!==a.getNullSpan().toString()&&d.slice(1).forEach(function(e){u.push(e)}),g.forEach(function(e){var t=0;s(u,function(r){ASSERT(e.name,r.flightNumber,r.departureAirportCode||r.departureAirport,r.departureDateTime,r.arrivalAirportCode||r.arrivalAirport,r.arrivalDateTime)&&(l.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:r.airlineName,airlineCode:r.airlineCode,flightNumber:r.flightNumber,departureAirportFuzzy:r.departureAirport,departureAirportCode:r.departureAirportCode,departureTime:r.departureDateTime,arrivalAirportFuzzy:r.arrivalAirport,arrivalAirportCode:r.arrivalAirportCode,arrivalTime:r.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:e.name},reservationId:n,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:i,priceCurrency:o,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:e.ticketNumber[t],ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:r.seatNumber,seatingType:r.seatType}}}),t++)})}),l.length>=1?l:CONTINUE}}).call();