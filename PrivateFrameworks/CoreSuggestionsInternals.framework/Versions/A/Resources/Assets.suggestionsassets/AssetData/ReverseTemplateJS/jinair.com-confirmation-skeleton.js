(function(){return function(e,r,t){var a,n,i,p=Scanner.fromMessage(e);p.setLocale(r);var o,s,g,l,m,u,h,d,c,C,v,T,y,b,f,N,x,S=[],A={};u="Jin Air",n=(m=p.getSpan()).next(t.reservationId_prefix).nextTag("td3").tagContents(),o=(g=m.next(t.passenger)).nextTag("td4").tagContents().innerCapture(/(.*)\(.*\)/,1),null!==(g=(g=m.next(t.flightCurrency).nextTag("td3").tagContents()).innerCapture(/([,\d]+)(.*)/))&&(b=g[1],f=g[2]),ASSERT(o)&&(A[o.toString()]={name:o,seats:{},seatingType:null,ticketNumber:null,totalPrice:b,priceCurrency:f}),g=m.next(t.flightSummary).nextTag("table3").nextTag("tr3");do{l=(N=g.allInnerTags("td3"))[2].tagContents(),[,h,l]=l.innerCapture(/([A-z]+)(\d+)/),d=(x=N[8].tagContents().innerCapture(/(.*)\n(.*)/))[1],[,c,s,d]=d.innerCapture(t.oneFlight),d=s+" "+d,d=getFuzzyDate(p.getDetachedSpan(d).firstDate()),[,T,s,v]=x[2].innerCapture(t.oneFlight),v=s+" "+v,v=getFuzzyDate(p.getDetachedSpan(v).firstDate()),C=null,y=null,ASSERT(l,c,d,T,v)&&S.push({reservationId:n,airlineName:u,airlineCode:h,flightNumber:l,departureAirport:c,departureCode:C,departureTime:d,arrivalAirport:T,arrivalCode:y,arrivalTime:v,passengers:A}),g=g.nextTag("tr3")}while(null!==g.nextTag("td3").tagContents().innerCapture(t.flightExit));for(var z=[],F=0;F<S.length;F++)for(var k=S[F],D=Object.keys(k.passengers),I=0;I<D.length;I++){var P=k.passengers[D[I]],R={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:k.airlineName,airlineCode:k.airlineCode,flightNumber:k.flightNumber,departureAirportFuzzy:k.departureAirport,departureAirportCode:k.departureCode,departureTime:k.departureTime,arrivalAirportFuzzy:k.arrivalAirport,arrivalAirportCode:k.arrivalCode,arrivalTime:k.arrivalTime},underName:{"@type":"http://schema.org/Person",name:P.name},checkinUrl:i,reservationId:k.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:P.totalPrice,priceCurrency:P.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:a,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:P.seats[k.flightNumber],seatingType:P.seatingType}}};valid(P.membershipNumber,P.programName)&&(R.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:P.membershipNumber,programName:P.programName}),z.push(R)}if(z.length)return z}}).call();