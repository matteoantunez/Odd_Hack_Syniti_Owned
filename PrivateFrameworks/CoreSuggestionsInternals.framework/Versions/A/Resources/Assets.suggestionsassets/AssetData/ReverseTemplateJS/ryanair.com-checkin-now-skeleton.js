(function(){return function(e,r,t){if(int(e.epoch)<1388534400)return CONTINUE;e.plain=e.plain.replace(/(\d{2})(\w{2,3})(20\d{2})/g,"$1 $2 $3"),e.plain=e.plain.replace(/(\d{2}) mrt (20\d{2})/g,"$1 mar $2");var a,i,n,p=Scanner.fromMessage(e);p.setLocale(r);var o,l,m,s,d,u,g,c,h,v,b,T,C,N,f=[],$={};for($[e.to]={name:e.to,seats:null,seatingType:{}},i=p.getSpan().innerCapture(regExpFormatted(/\1\s+(\w+)/,t.reservationId),1),n=p.getSpan().next(t.checkinUrl).nextLink(),l=p.getSpan().next(t.flightDetails).parentTag("table4").allInnerTags("table5").map(function(e){return e.allInnerTagsFiltered("td6")}).filter(function(e){return 12===e.length}),N=0;N<l.length;N++)d=(s=(o=l[N])[0].parentTag("table4").nextTag("td5").nextTag("td5").tagContents().innerCapture(/:\s*($<code>[A-Z]+)\s*($<flightNumber>\d+)$/))?s.$code.trim():null,m=s?s.$flightNumber:null,h=(u=o[1].innerCapture(/($<airport>.*)\s+\(($<code>[A-Z]{3})\)/))?u.$code:null,c=u?u.$airport:null,C=(v=o[7].innerCapture(/($<airport>.*)\s+\(($<code>[A-Z]{3})\)/))?v.$code:null,T=v?v.$airport:null,g=combineDateAndTime(o[3].innerDate(),p.getDetachedSpan(o[5].innerCapture(/\d{2}:\d{2}/).toString())),b=combineDateAndTime(o[9].innerDate(),p.getDetachedSpan(o[11].innerCapture(/\d{2}:\d{2}/).toString())),ASSERT(d,m,h,g,C,b)&&f.push({airlineCode:d,flightNumber:m,departureCode:h,departureAirport:c,departureTime:g,arrivalCode:C,arrivalAirport:T,arrivalTime:b,passengers:$});var y=[];for(N=0;N<f.length;N++)for(var A=f[N],S=Object.keys(A.passengers),k=0;k<S.length;k++){var F=A.passengers[S[k]],x={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:A.airlineName,airlineCode:A.airlineCode,flightNumber:A.flightNumber,departureAirportFuzzy:A.departureAirport,departureAirportCode:A.departureCode,departureTime:A.departureTime,arrivalAirportFuzzy:A.arrivalAirport,arrivalAirportCode:A.arrivalCode,arrivalTime:A.arrivalTime},underName:{"@type":"http://schema.org/Person",name:F.name},checkinUrl:n,reservationId:i,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:F.totalPrice,priceCurrency:F.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:a,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:F.seats,seatingType:F.seatingType[A.flightNumber]}}};valid(F.membershipNumber,F.programName)&&(x.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:F.membershipNumber,programName:F.programName}),y.push(x)}return y.length?y:void 0}}).call();