(function(){return function(e,r,t){var a=Scanner.fromMessage(e);a.setLocale(r);var i,n,o,p,c,s=a.getSpan(),l=[],m=[],h=[],d=[];if(p=s.next(t.reservationId_prefix).nextAnyTag("td").tagContents(),/\ud56d\uacf5\uad8c/.test(e.plain))for(var u=s.allInnerCapture(/\ud3b8\uba85 : (.+) \(([A-Z\d]{2})([A-Z\d]{3,4})\)/),g=0;g<u.length;g++){var v,y=u[g][2],f=u[g][3],T=(v=u[g][1]).nextRegExp(/.+?~.+/).split(/~/),C=T[0].innerCapture(/(.+?)\(/,1).trim(),A=T[1].innerCapture(/(.+?)\(/,1).trim(),k=C.nextDate(),S=A.nextDate();m.push({reservationId:p,departureTime:k,arrivalTime:S,departureAirport:C,arrivalAirport:A,flightNumber:f,airline:v,airlineCode:y})}s.next(t.reservationId_prefix).nextAnyTag("table").allInnerTags("tr5").forEach(function(e){var r=e.nextAnyTag("td").tagContents();if("\ud56d\uacf5\uad8c"===r.toString()||"\uc219\ubc15"===r.toString()||"\ub80c\ud130\uce74"===r.toString()){i=r.nextAnyTag("td").tagContents().split(",")[0].trim();var t=r.nextAnyTag("td").tagContents().split("~"),c=getFuzzyDate(a.getDetachedSpan(t[0].toString())),s=getFuzzyDate(a.getDetachedSpan(t[1].toString())),l=r.nextAnyTag("td").nextAnyTag("td").tagContents();if(l=/(.*) (.)/.exec(l),n=l[1],o=l[2],ASSERT(c,s),"\ud56d\uacf5\uad8c"===r.toString()&&0===u.length){var g=i.innerCapture(/(.+?)\s(.+?)\ud3b8\ub3c4/);m.push({reservationId:p,totalPrice:n,priceCurrency:o,departureTime:c,arrivalTime:s,departureAirport:g[1].trim(),arrivalAirport:g[2].trim()})}else"\uc219\ubc15"===r.toString()?h.push({reservationId:p,totalPrice:n,priceCurrency:o,checkInDateTime:c,checkOutDateTime:s,hotelName:i}):"\ub80c\ud130\uce74"===r.toString()&&d.push({reservationId:p,totalPrice:n,priceCurrency:o,pickupTime:c,dropoffTime:s,brand:i})}});var x;for(g=0;g<m.length;g++)l.push(c={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:(x=m[g]).airlineName,airlineCode:x.airlineCode,flightNumber:x.flightNumber,departureAirportFuzzy:x.departureAirport,departureAirportCode:x.departureCode,departureTime:x.departureTime,arrivalAirportFuzzy:x.arrivalAirport,arrivalAirportCode:x.arrivalCode,arrivalTime:x.arrivalTime},underName:{"@type":"http://schema.org/Person",name:x.underName},checkinUrl:x.checkinUrl,reservationId:x.reservationId,reservationStatus:"http://schema.org/Reservation"+(x.reservationStatus||"Confirmed"),totalPrice:x.totalPrice,priceCurrency:x.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:x.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:x.seatNumber,seatingType:x.seatingType}}});var N;for(g=0;g<d.length;g++)c={"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:(N=d[g]).totalPrice,priceCurrency:N.priceCurrency,reservationId:N.reservationId,reservationStatus:"http://schema.org/Reservation"+(N.reservationStatus||"Confirmed"),checkinUrl:N.checkinUrl,modifyReservationUrl:N.modifyReservationUrl,cancelReservationUrl:N.cancelReservationUrl,underName:{"@type":"http://schema.org/Person",name:N.name,email:N.email},provider:{"@type":"http://schema.org/Organization",name:N.provider},pickupTime:N.pickupTime,pickupLocation:{"@type":"http://schema.org/Place",name:N.pickupName,telephone:N.pickupTelephone,address:N.pickupAddress},dropoffTime:N.dropoffTime,dropoffLocation:{"@type":"http://schema.org/Place",name:N.dropoffName,telephone:N.dropoffTelephone,address:N.dropoffAddress}},N.brand&&(c.reservationFor={"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:N.brand},license:N.license,color:N.color}),l.push(c);var R;for(g=0;g<h.length;g++)l.push(c={"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:(R=h[g]).underName,email:R.underNameEmail},totalPrice:R.totalPrice,priceCurrency:R.priceCurrency,checkinTime:R.checkInDateTime,checkoutTime:R.checkOutDateTime,modifyReservationUrl:R.modifyReservationUrl,cancelReservationUrl:R.cancelReservationUrl,reservationStatus:"http://schema.org/Reservation"+(R.reservationStatus||"Confirmed"),reservationId:R.reservationId,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:R.hotelName,url:R.hotelUrl,telephone:R.hotelPhone,address:R.hotelAddress}});if(l.length)return l}}).call();