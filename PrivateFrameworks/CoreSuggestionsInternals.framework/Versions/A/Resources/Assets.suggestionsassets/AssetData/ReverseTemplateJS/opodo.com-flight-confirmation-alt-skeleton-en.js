(function(){return function(e,r,t){var a,i,n=Scanner.fromMessage(e);n.setLocale(r);var p,m,o,l,u,h,s,d,g,c,v,C,f=[];a=(o=n.getSpan()).next(t.reservationId).innerCapture(t.reservationId,1),c=o.innerCapture(t.seating_type,1);for(var y,N=[],x=o;x.next(t.ticketHeader).exists();){(T=x.next(t.name_ticket))&&(v=T.innerCapture(t.name_ticket).$name,C=T.innerCapture(t.name_ticket).$ticket),N.push({name:v,ticket:C}),x=v}do{p=(y=y?y.next(t.flightSummary):o.next(t.flightSummary)).innerCapture(t.flightSummary),h=(s=y.next(t.departure).innerCapture(t.departure).$airportAddress).nextRegExp(/.+/).replace(/\-/,"").innerDate(),d=(g=y.next(t.arrival).innerCapture(t.arrival).$airportAddress).nextRegExp(/.+/).replace(/\-/,"").innerDate(),u=p.$airlineCode,l=p.$airlineName,m=p.$flightNumber,ASSERT(u,m,s,h,g,d)&&f.push({reservationId:a,airlineName:l,airlineCode:u,flightNumber:m,departureAirport:s,departureTime:h,arrivalAirport:g,arrivalTime:d})}while(0!==y.next(t.flightSummary).toString().length);for(var b=[],k=0;k<f.length;k++)for(var S=f[k],A=0;A<N.length;A++){var T,$={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:S.airlineName,airlineCode:S.airlineCode,flightNumber:S.flightNumber,departureAirportFuzzy:S.departureAirport,departureAirportCode:S.departureCode,departureTime:S.departureTime,arrivalAirportFuzzy:S.arrivalAirport,arrivalAirportCode:S.arrivalCode,arrivalTime:S.arrivalTime},underName:{"@type":"http://schema.org/Person",name:(T=N[A]).name},checkinUrl:i,reservationId:S.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:null,priceCurrency:null,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:T.ticket,ticketedSeat:{"@type":"http://schema.org/Seat",seatingType:c}}};valid(T.membershipNumber,T.programName)&&($.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:T.membershipNumber,programName:T.programName}),b.push($)}if(b.length)return b}}).call();