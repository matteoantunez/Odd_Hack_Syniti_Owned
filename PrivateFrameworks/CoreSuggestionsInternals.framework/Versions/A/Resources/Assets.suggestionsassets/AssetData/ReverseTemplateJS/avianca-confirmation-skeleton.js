(function(){return function(e,t,r){var a,n,i,p,o,g,d,s=Scanner.fromMessage(e);s.setLocale(t);var u=[],l=[];p=s.getSpan().next(r.reservationId).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s(.*)/,r.reservationId),1);var m="avianca",T="AV",A=s.getSpan().allInnerCapture(r.leg,1);for(g=0;g<A.length;g++){var h={},v=A[g].nextDate();d=A[g].next(r.departure),h.departureTime=combineDateAndTime(v,d.nextAnyTag("td").innerDate()),h.departureAirport=d.nextAnyTag("td").nextAnyTag("td").tagContents(),d=A[g].next(r.arrival),h.arrivalTime=combineDateAndTime(v,d.nextAnyTag("td").innerDate()),h.arrivalAirport=d.nextAnyTag("td").nextAnyTag("td").tagContents(),h.flightNumber=d.next(r.airline).nextAnyTag("td").tagContents().innerCapture(/\w(\d+)/,1),h.seatingType=d.next(r.seatingType).nextAnyTag("td").tagContents().innerCapture(/([^<\s]+)/,1),ASSERT(h.departureTime,h.arrivalTime,h.flightNumber,h.departureAirport,h.arrivalAirport)&&l.push(h)}for(g=0;g<l.length;g++){u.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:m,airlineCode:T,flightNumber:(a=l[g]).flightNumber,departureAirportFuzzy:a.departureAirport,departureAirportCode:a.departureAirportCode,departureTime:a.departureTime,arrivalAirportFuzzy:a.arrivalAirport,arrivalAirportCode:a.arrivalAirportCode,arrivalTime:a.arrivalTime},underName:{"@type":"http://schema.org/Person",name:e.to},reservationId:p,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:n,priceCurrency:i,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:o,ticketedSeat:{"@type":"http://schema.org/Seat",seatingType:a.seatingType}}})}if(u.length)return u}}).call();