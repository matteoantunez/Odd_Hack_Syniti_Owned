(function(){return function(e,t,n){var a,r,i,g,p,s,o,x,d,l,c,m,S,u,h,C,T,f,v,y,E,I,R,A,N,P,$,k=Scanner.fromMessage(e);if(k.setLocale(t),"1"===n.version&&(g=k.getSpan().next(n.reservationIdPrefix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\1\s*(.*)/,n.reservationIdPrefix),1),not(g)&&(g=k.getSpan().next(n.reservationIdPrefix).nextAnyTag("td").tagContents()),P=k.getSpan().nextText(n.pickupInformationHeader).nextText("\n"),P=k.getSpan().withInterval(P.getEnd(),P.nextText("\n").getStart()),$=getFuzzyDate(k.getDetachedSpan(P.toString().replace(/,(\D+) (\d+),/," $2 $1 "))),N=P.parentAnyTag("td").lastInnerPhoneNumber(),R=(I=k.getSpan().withInterval(P.getEnd(),N.getStart()).trim().innerCapture(/^($<name>.*)\s(.*?\s)?($<address>.*(?:\s\(\d{5} \))?)$/))?I.$name:null,(A=I?I.$address:null)||(A=(I=(I=k.getSpan().nextText(n.pickupInformationHeader).parentAnyTag("td").tagContents()).toString().split("\n")).slice(2,3).toString()),E=k.getSpan().nextText(n.pickupInformationHeader).nextRegExp(n.returnDateRegExp).nextText("\n"),E=k.getSpan().withInterval(E.getEnd(),E.nextText("\n").getStart()),d=getFuzzyDate(k.getDetachedSpan(E.toString().replace(/,(\D+) (\d+),/," $2 $1 "))),y=E.parentAnyTag("td").lastInnerPhoneNumber(),f=(T=k.getSpan().withInterval(E.getEnd(),y.getStart()).trim().innerCapture(/^($<name>.*)\s(.*?\s)?($<address>.*(?:\s\(\d{5} \))?)$/))?T.$name:null,(v=T?T.$address:null)||(v=(T=(T=k.getSpan().nextText(n.returnText).parentAnyTag("td").tagContents()).toString().split("\n")).slice(2,3).toString()),k.getSpan().nextText(n.cancellationHeader).exists()?(p="Cancelled",a=k.getSpan().next(n.firstNameSuffix).parentAnyTag("td").tagContents().innerCapture(regExpFormatted(/\s*(.+?)\1/,n.firstNameSuffix),1).trim()):a=k.getSpan().nextText(n.firstNamePrefix).nextAnyTag("td").tagContents(),r=k.getSpan().nextRegExp(new RegExp(n.emailAddressPrefix,"i")).nextAnyTag("td").tagContents(),c=(l=k.getSpan().nextRegExp(new RegExp(regExpEscape(n.pricingPrefix)+"(?:\\s+\\(.*?\\))?"))).nextTag("td7").tagContents().innerCapture(/([\d,.]+)/,1),m=l.innerCapture(/\((.*?)\)/,1),not(m)&&(m=l.nextTag("td7").tagContents().innerCapture(/[\d,.]+\s+([A-Z]{3})/,1)),4===(C=k.getSpan().nextText("add-to-email-calendar-from-mail.ac").parentAnyTag("td")).allInnerLinks().length&&(x=(o=C.nextLink().nextLink()).nextLink()),i=(S=k.getSpan().nextText(n.carPrefix).nextAnyTag("table")).getTagNumber(),(S=S.allInnerTagsFiltered("td"+i)).length>2&&(S=S[1].tagContents())),"2"===n.version){if(n.cancellation.test(k.getSpan().tagContents()))return CONTINUE;a=k.getSpan().innerCapture(n.guestName,1),r=k.getSpan().nextRegExp(n.guestName).nextLink(),g=k.getSpan().innerCapture(n.reservationId,1);var D=k.getSpan().innerCapture(n.price,1);c=D.innerCapture(/([\d,.]+)/,1),m=D.innerCapture(/([^\d,.]+)/,1).trim(),$=k.getSpan().nextRegExp(n.dates).nextDate(),d=k.getSpan().nextRegExp(n.dates).nextDate().nextDate(),N=y=k.getSpan().nextRegExp(n.dates).nextPhoneNumber(),A=v=k.getSpan().innerCapture(n.address,1),S=k.getSpan().innerCapture(n.brand,1),p="Confirmed"}if(!ASSERT(g,a,A,$,v,d))return CONTINUE;var L={"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:c,priceCurrency:m,reservationId:g,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:s,modifyReservationUrl:o,cancelReservationUrl:x,underName:{"@type":"http://schema.org/Person",name:a,email:r},provider:{"@type":"http://schema.org/Organization",name:"Avis"},pickupTime:$,pickupLocation:{"@type":"http://schema.org/Place",name:R,telephone:N,address:A},dropoffTime:d,dropoffLocation:{"@type":"http://schema.org/Place",name:f,telephone:y,address:v}};return S&&S.toString().length>0&&(L.reservationFor={"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:S},license:u,color:h}),[L]}}).call();