(function(){return function(e,t,r){function a(e){return e.tagContents().trim().toString().length>0}var n,i,g,p=Scanner.fromMessage(e);p.setLocale(t);for(var s=p.getSpan().nextText(r.reservationIdPrefix).parentTag("td3").innerCapture(new RegExp(regExpEscape(r.reservationIdPrefix)+"(.+)"),1).trim(),o=p.getSpan().nextText(r.reservationIdPrefix).nextTag("table3").allInnerTags("table4"),l=[],m=0;m<o.length;m++){var h=o[m].allInnerTags("td4").filter(a),d=h[1].innerDate(),u=h[3].innerDate(),v=combineDateAndTime(d,u),c=p.getSpan().withInterval(u.parentTag("td4").tagContents().getStart(),u.getStart()).trim(),T=h[5].innerDate(),f=combineDateAndTime(d,T),S=p.getSpan().withInterval(T.parentTag("td4").tagContents().getStart(),T.getStart()).trim(),x=h[6].innerCapture(/(?:\n|\s)($<name>.*?)\s+\(($<code>\w+)\s*($<number>\d+)\)/);x&&(n=x.$name,i=x.$code,g=x.$number),ASSERT(n,i,g,v,c,f,S)&&l.push({departureDateTime:v,departureAirport:c,arrivalDateTime:f,arrivalAirport:S,airlineName:n,airlineCode:i,flightNumber:g})}var b,C=[];if(r.passengerName){b=p.getSpan().next(r.passengerHeader).next(r.passengerName);do{var N=b.innerCapture(r.passengerName,1);C.push(N.toString()),b=b.next(r.passengerName)}while(0!==b.toString().length)}else{(b=p.getSpan().nextText(r.passengerHeader).parentTag("table3").allInnerTags("tr3")).splice(0,1);for(var I=0;I<b.length;I++){var A=b[I].allInnerTags("td3");if(0===A.filter(a).length)break;C.push(A[0].tagContents())}}var D,y=[];for(m=0;m<l.length;m++){D=l[m];for(I=0;I<C.length;I++)y.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:D.airlineName,airlineCode:D.airlineCode,flightNumber:D.flightNumber,departureAirportFuzzy:D.departureAirport,departureTime:D.departureDateTime,arrivalAirportFuzzy:D.arrivalAirport,arrivalTime:D.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:C[I]},reservationId:s,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketedSeat:{"@type":"http://schema.org/Seat"}}})}if(y.length)return y}}).call();