(function(){return function(e,t,r){var a=Scanner.fromMessage(e);a.setLocale(t);var i,n,o,p,g=a.getSpan(),s=[],l=[];n=g.next(r.reservationId_prefix).nextAnyTag("td").tagContents(),i=g.next(r.underPersonName_prefix).nextAnyTag("tr").nextAnyTag("td").tagContents();var u=g.next(r.totalPrice_prefix).nextAnyTag("td").tagContents().toString();return u.substring(1),u[0],g.nextText(r.flightLegs_prefix).nextAnyTag("table").allInnerTags("tr5").forEach(function(e){var t=e.allInnerTags("td5");s.push(t)}),function(e,t){e.forEach(function(r,i){if(/Depart/.test(r[3].tagContents().toString())){var n=r[1].tagContents().toString(),o=r[2].tagContents().toString(),p=e[i+1][2].tagContents().toString(),g=n+", "+o;g=getFuzzyDate(a.getDetachedSpan(g).firstDate());var s=n+", "+p;s=getFuzzyDate(a.getDetachedSpan(s).firstDate());var l=/Depart (.*) \( (.*) \)/.exec(r[3]),u=l[1],d=l[2],c=/Arrive (.*) \( (.*) \)/.exec(e[i+1][3]),h=c[1],m=c[2],v=/Flight.*\s(.*)\s(.*)/.exec(e[i+1][1].tagContents()),f=loadHelper("icaoCodeToIataCode.js")(v[1]);t({airlineCode:f,flightNumber:v[2],departureDateTime:g,departureAirport:u,departureAirportCode:d,arrivalDateTime:s,arrivalAirport:h,arrivalAirportCode:m})}})}(s,function(e){ASSERT(e.flightNumber,e.departureAirport,e.arrivalAirport)&&l.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:e.airlineName,airlineCode:e.airlineCode,flightNumber:e.flightNumber,departureAirportFuzzy:e.departureAirport,departureAirportCode:e.departureAirportCode,departureTime:e.departureDateTime,arrivalAirportFuzzy:e.arrivalAirport,arrivalAirportCode:e.arrivalAirportCode,arrivalTime:e.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:i},checkinUrl:p,reservationId:n,reservationStatus:"http://schema.org/ReservationConfirmed",reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:o,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:e.seatNumber,seatingType:e.seatType}}})}),l.length>=1?l:CONTINUE}}).call();