new ReverseTemplateList([new ReverseTemplate("ctrip.com-flight-confirmation-zh",function(e){return/\u673a\u7968\u786e\u8ba4\u5355/.test(e.subject)},function(e){if(/\u673a\u7968\u786e\u8ba4\u5355/.test(e.subject)&&/\u8ba2\u5355\u5df2\u7ecf\u51fa\u7968\u6210\u529f\u3002/.test(e.plain)){Scanner.fromMessage(e);var r="zh_Hans_CN",t={reservationIdPrefix:"\u8ba2\u5355\u53f7\uff1a",singleTripPrefix:"\u5355\u7a0b",roundTripPrefix:"\u5f80\u8fd4\u7a0b",conjectionPrefix:"\u8054\u7a0b",legPrefix:"\u822a\u7a0b",ticketPrefix:"\u7968\u53f7\uff1a",totalCostPrefix:"\u603b\u91d1\u989d\uff1a"};return loadHelper("ctrip-flight-confirmation-skeleton.js")(e,r,t)}return CONTINUE},"SG19946100"),new ReverseTemplate("ctrip.com-flight-order-en",function(e){return/Ctrip flight order \(.*\) is being processed/.test(e.subject)},function(e){if(/Ctrip flight order \(.*\) is being processed/.test(e.subject)){Scanner.fromMessage(e);var r="en_US",t={itinerayHeader:"Flight details:",legPrefix:"Route #",flightPrefix:"Flight no:",departurePrefix:"Departure:",arrivalPrefix:"Arrival:",totalCostPrefix:"Total Amount:",passengerHeader:"Passenger info:",passengerPrefix:"Passenger #"};return loadHelper("ctrip-flight-order-skeleton.js")(e,r,t)}return CONTINUE},"SG617f6122"),new ReverseTemplate("ctrip.com-flight-order-zh",function(e){return/\u651c\u7a0b\u6a5f\u7968\u8a02\u55ae.*\u6b63\u5728\u8655\u7406\u4e2d/.test(e.subject)},function(e){if(/\u651c\u7a0b\u6a5f\u7968\u8a02\u55ae.*\u6b63\u5728\u8655\u7406\u4e2d/.test(e.subject)){Scanner.fromMessage(e);var r="zh_Hans_CN",t={itinerayHeader:"\u822a\u73ed\u8a73\u60c5\uff1a",legPrefix:"\u822a\u7a0b#",flightPrefix:"\u822a\u73ed\u7de8\u865f:",departurePrefix:"\u51fa\u767c:",arrivalPrefix:"\u5230\u9054:",totalCostPrefix:"\u7e3d\u50f9:",passengerHeader:"\u65c5\u5ba2\u8cc7\u6599:",passengerPrefix:"\u65c5\u5ba2#"};return loadHelper("ctrip-flight-order-skeleton.js")(e,r,t)}return CONTINUE},"SG16e471f2"),new ReverseTemplate("ctrip.com-flight-reservation-en",function(e){return/reservation confirmation/.test(e.subject)},function(e){if(/Ctrip flight order \(.*\) reservation confirmation/.test(e.subject)){Scanner.fromMessage(e);var r="en_US",t={itineraryHeader:"Thank you for using Ctrip.",reservationIdPrefix:"Order No:",totalCostPrefix:"Total amount:",passengerHeader:"Passenger info:"};return loadHelper("ctrip-flight-reservation-skeleton.js")(e,r,t)}return CONTINUE},"SGcc3ac75c"),new ReverseTemplate("ctrip.com-flight-zh",function(e){return/\u673a\u7968\u786e\u8ba4\u5355/.test(e.subject)},function(e){if(/\u673a\u7968\u786e\u8ba4\u5355/.test(e.subject)&&/\u673a\u7968\u786e\u8ba4\u5355/.test(e.plain)){var r,t,i=Scanner.fromMessage(e);i.setLocale("zh_Hans_CN");var a,n,s,o,l,p,c,u,g,f,m,h,d,v=[],T={};r=i.getSpan().innerCapture(/\u8ba2\u5355\u53f7\uff1a (\d+)/,1),c=(l=i.getSpan().nextText("\u7968\u6b3e\u603b\u8ba1:").nextTag("td1").tagContents().innerCapture(/($<priceCurrency>[A-Z]{3}) ($<totalPrice>[\d,.]+)$/))?l.$priceCurrency:null,p=l?l.$totalPrice:null,a=i.getSpan().nextText("\u4e58\u673a\u4eba\u59d3\u540d").parentTag("table1").allInnerTags("tr1").map(function(e){return e.allInnerTagsFiltered("td1")});for(var b=1;b<a.length;b++)T[a[b][0].toString()]={name:a[b][0],ticketNumber:a[b][1],totalPrice:p,priceCurrency:c,seats:{},seatingType:{}};s=i.getSpan().nextText("\u822a\u7a0b").nextText("\u822a\u73ed\u53f7").nextText("\u51fa\u53d1\u57ce\u5e02").parentTag("table1").allInnerTags("tr1").map(function(e){return e.allInnerTagsFiltered("td1")});for(b=1;b<s.length;b++)g=(u=(n=s[b])[1].innerCapture(/($<airlineCode>\D+)($<flightNumber>\d+)/))?u.$airlineCode:null,o=u?u.$flightNumber:null,m=n[2],d=n[3],f=n[4].innerDate(),h=n[5].innerDate(),ASSERT(g,o,m,f,d,h)&&v.push({airlineCode:g,flightNumber:o,departureAirport:m,departureTime:f,arrivalAirport:d,arrivalTime:h,passengers:T});var C,x=[];for(b=0;b<v.length;b++)for(var P=v[b],N=Object.keys(P.passengers),y=0;y<N.length;y++){var S=P.passengers[N[y]];C={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:P.airlineCode,flightNumber:P.flightNumber,departureAirportFuzzy:P.departureAirport,departureAirportCode:P.departureCode,departureTime:P.departureTime,arrivalAirportFuzzy:P.arrivalAirport,arrivalAirportCode:P.arrivalCode,arrivalTime:P.arrivalTime},underName:{"@type":"http://schema.org/Person",name:S.name},checkinUrl:t,reservationId:r,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:S.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:S.seats[P.flightNumber],seatingType:S.seatingType[P.flightNumber]}},totalPrice:S.totalPrice,priceCurrency:S.priceCurrency,reservationStatus:"http://schema.org/ReservationConfirmed"},valid(S.membershipNumber,S.programName)&&(C.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:S.membershipNumber,programName:S.programName}),x.push(C)}if(x.length)return x}},"SGaed98c99")]);