(function(){return function(e,t,n){var a,r,s,i,o,c,g,p,u,l,x,m=Scanner.fromMessage(e);m.setLocale(t),l="td4",(a=m.getSpan().innerCapture(regExpFormatted(/(.*?)\s?\1/,n.underPersonNameSuffix),1))&&a.exists()||(a=m.getSpan().next(/Muchas gracias por realizar tu reserva en/).parentAnyTag("td").tagContents().innerCapture(/Muchas gracias por .+?>\s*[\n]+?(.+?) ,/i,1),u=!0),o=m.getSpan().innerCapture(regExpFormatted(/\1\s(\d+)/,n.reservationIdPrefix),1);var d=m.getSpan().nextText(n.hotelNamePrefix).nextAnyTag("td").tagContents().toString().replace(/^\s*\n/gm,"").split("\n");r=d?d[0]:null,i=d?d[1]:null,s=d?d[2]:null,m.getDetachedSpan(d?d[3]:null).nextLink().toLocaleString(),s=s.match(/\+([\d\s]+)\s<?/)[1].trim(),c=m.getSpan().nextText(n.checkInDateTimePrefix).nextDate(),g=m.getSpan().nextText(n.checkOutDateTimePrefix).nextDate(),!0===u&&(l="td3");var h=m.getSpan().next(/Precio total de la estancia/).nextTag(l).tagContents().innerCapture(/\s?($<a>[\d,.]+)\s?($<b>\D)/);return p=h.$a?h.$a:null,x=h.$b?h.$b:null,ASSERT(a,r,c)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:a},totalPrice:p,priceCurrency:x,checkinTime:c,checkoutTime:g,reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:o,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:r,telephone:s,address:i}}]:CONTINUE}}).call();