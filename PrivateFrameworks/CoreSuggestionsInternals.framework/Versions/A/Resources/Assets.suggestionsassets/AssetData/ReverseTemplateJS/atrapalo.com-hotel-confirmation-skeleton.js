(function(){return function(e,t,r){var n,a,o,s,i,g,d,p,x,h,l=Scanner.fromMessage(e);l.setLocale(t),g=l.getSpan().innerCapture(regExpFormatted(/\1\s(\D+\d+)/,r.reservationIdPrefix),1),n=l.getSpan().nextText(r.underPersonNamePrefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1\s(.*)/,r.underPersonNamePrefix),1);var u=l.getSpan().innerCapture(regExpFormatted(/\1\s(.*?)\s\2\s(.*?)\s/,r.checkInDatePrefix,r.checkOutDatePrefix));p=u[2],d=l.getDetachedSpan((d=u[1]).toString()).innerDate(),p=l.getDetachedSpan(p.toString()).innerDate(),a=l.getSpan().nextText(r.hotelNamePrefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1\s(.*)/,r.hotelNamePrefix),1),o=l.getSpan().nextText(r.hotelPhonePrefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1\s(.*)/,r.hotelPhonePrefix),1),s=l.getSpan().nextText(r.hotelAddress.addressPrefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1\s(.*)/,r.hotelAddress.addressPrefix),1);var m=l.getSpan().nextText(r.hotelAddress.townPrefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1\s(.*)/,r.hotelAddress.townPrefix),1).toString().trim();return m!==l.getNullSpan().toString()&&(s=l.getDetachedSpan(s.toString()+", "+m)),i=l.getSpan().nextText(r.hotelGeoCoordinates.prefix).parentTag("td5").tagContents().innerCapture(regExpFormatted(/\1\s([\+\-]?\d+\.\d+)\s\2\s([\+\-]?\d+\.\d+)\./,r.hotelGeoCoordinates.latitudePrefix,r.hotelGeoCoordinates.longitudePrefix)),ASSERT(n,s,d)?[{"@context":"http://schema.org","@type":"http://schema.org/LodgingReservation",underName:{"@type":"http://schema.org/Person",name:n},totalPrice:x,priceCurrency:h,checkinTime:d,checkoutTime:p,reservationStatus:"http://schema.org/ReservationConfirmed",reservationId:g,reservationFor:{"@type":"http://schema.org/LodgingBusiness",name:a,telephone:o,address:s,geo:null!==i&&"number"==typeof i.length&&3===i.length?{"@type":"http://schema.org/GeoCoordinates",latitude:i[1],longitude:i[2]}:null}}]:CONTINUE}}).call();