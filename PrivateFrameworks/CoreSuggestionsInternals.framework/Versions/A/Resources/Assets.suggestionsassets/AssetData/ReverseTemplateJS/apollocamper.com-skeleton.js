(function(){return function(e,t,n){var a,r,o,p,c,i,s,g,d,m,h,l,y,u,x,T,C,f,v,A,S=Scanner.fromMessage(e);S.setLocale(t),o=S.getSpan().nextRegExp(n.reservationId).tagContents().innerCapture(n.reservationId,1),a=S.getSpan().nextRegExp(n.guestName).tagContents().innerCapture(n.guestName,1),m=S.getSpan().nextRegExp(n.car).tagContents().innerCapture(n.car,1);var R=S.getSpan().nextText(n.pickup);A=getFuzzyDate(R.nextAnyTag("td")),f=R.nextAnyTag("td").nextAnyTag("td").tagContents(),v=R.nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").tagContents();var N=S.getSpan().nextText(n.dropoff);T=getFuzzyDate(N.nextAnyTag("td")),u=N.nextAnyTag("td").nextAnyTag("td").tagContents(),x=N.nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").nextAnyTag("td").tagContents();var P=S.getSpan().nextText(n.price).nextAnyTag("td").tagContents();if(g=P.innerCapture(/([\d,.]+)/,1),d=P.innerCapture(/([^\d,.]+)/,1),n.confirmSubject.test(e.subject)&&!ASSERT(a,o,A,T,f,u))return CONTINUE;if(n.cancellationSubject.test(e.subject)){if(!ASSERT(a,o,A,T,f,u))return CONTINUE;p="Cancelled"}return 0===m.toString().length?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:g,priceCurrency:d,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:c,modifyReservationUrl:i,cancelReservationUrl:s,underName:{"@type":"http://schema.org/Person",name:a,email:r},provider:{"@type":"http://schema.org/Organization",name:"Apollocamper"},pickupTime:A,pickupLocation:{"@type":"http://schema.org/Place",name:C,telephone:v,address:f},dropoffTime:T,dropoffLocation:{"@type":"http://schema.org/Place",name:y,telephone:x,address:u}}]:[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",totalPrice:g,priceCurrency:d,reservationId:o,reservationStatus:"http://schema.org/Reservation"+(p||"Confirmed"),checkinUrl:c,modifyReservationUrl:i,cancelReservationUrl:s,underName:{"@type":"http://schema.org/Person",name:a,email:r},provider:{"@type":"http://schema.org/Organization",name:"Apollocamper"},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:m},license:h,color:l},pickupTime:A,pickupLocation:{"@type":"http://schema.org/Place",name:C,telephone:v,address:f},dropoffTime:T,dropoffLocation:{"@type":"http://schema.org/Place",name:y,telephone:x,address:u}}]}}).call();