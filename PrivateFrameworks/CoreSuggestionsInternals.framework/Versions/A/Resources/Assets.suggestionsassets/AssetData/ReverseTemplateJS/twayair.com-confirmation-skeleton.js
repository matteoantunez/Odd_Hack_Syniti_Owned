(function(){return function(e,t,r){var a,n,i,p=Scanner.fromMessage(e);p.setLocale(t);var g,s,o,u,m,d,l,T,h,x,C,c,v,y,b,f,N,A,S=[],z={};for(d="T'way Air",n=(m=p.getSpan()).innerCapture(regExpFormatted(/\1 - (\w*)/,r.reservationId_prefix),1),g=m.next(r.name).nextTag("table2").nextTag("tr2").nextTag("tr2").nextTag("td2").innerCapture(/\s*1.\s(.*)\sM/,1),o=m.next(r.flightExit).nextTag("table2").nextTag("tr2").nextTag("tr2"),N=0;N<10&&null===o.nextTag("td2").tagContents().innerCapture(r.totalPrice_prefix);)o=o.nextTag("tr2"),N+=1;y=(o=o.nextTag("td2").nextTag("td2").nextTag("td2").innerCapture(/([\d,]+\s+[A-z]+)\s*/,1)).innerCapture(/([\d,]+)\s/,1),b=o.innerCapture(/([\d,]+)\s([A-z]+)\s*/,2),f=m.next(r.seatType).innerCapture(r.seatType,1),ASSERT(g)&&(z[g.toString()]={name:g,seats:{},seatingType:f,ticketNumber:null,totalPrice:y,priceCurrency:b}),o=m.next(r.flightSummary).nextTag("table2").nextTag("tr2").nextTag("tr2");do{s=o.nextTag("td2").tagContents().innerCapture(/(.*)\n/,1),x=(h=o.nextTag("td2").nextTag("td2").tagContents()).innerCapture(/(.{3})/,1),h=h.innerCapture(/(.*)\n(.*)/,2),v=(c=o.nextTag("td2").nextTag("td2").nextTag("td2").tagContents()).innerCapture(/(.{3})/,1),c=c.innerCapture(/(.*)\n(.*)/,2),T=s+" "+(A=o.nextTag("td2").nextTag("td2").nextTag("td2").nextTag("td2").tagContents()).innerCapture(/(.*)\n/,1),T=getFuzzyDate(p.getDetachedSpan(T).firstDate()),C=s+" "+A.innerCapture(/(.*)\n(.*)/,2),C=getFuzzyDate(p.getDetachedSpan(C).firstDate()),l=(A=A.nextTag("td2").tagContents()).innerCapture(/(.{2})/,1),u=A.innerCapture(/(.*)\n(.*)/,2),ASSERT(l,u,h,T,c,C)&&S.push({reservationId:n,airlineName:d,airlineCode:l,flightNumber:u,departureAirport:h,departureCode:x,departureTime:T,arrivalAirport:c,arrivalCode:v,arrivalTime:C,passengers:z}),o=o.nextTag("tr2")}while(null===o.nextTag("td2").tagContents().innerCapture(r.flightExit));for(var F=[],k=0;k<S.length;k++)for(var D=S[k],P=Object.keys(D.passengers),E=0;E<P.length;E++){var I=D.passengers[P[E]],M={"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineName:D.airlineName,airlineCode:D.airlineCode,flightNumber:D.flightNumber,departureAirportFuzzy:D.departureAirport,departureAirportCode:D.departureCode,departureTime:D.departureTime,arrivalAirportFuzzy:D.arrivalAirport,arrivalAirportCode:D.arrivalCode,arrivalTime:D.arrivalTime},underName:{"@type":"http://schema.org/Person",name:I.name},checkinUrl:i,reservationId:D.reservationId,reservationStatus:"http://schema.org/ReservationConfirmed",totalPrice:I.totalPrice,priceCurrency:I.priceCurrency,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:a,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:I.seats[D.flightNumber],seatingType:I.seatingType}}};valid(I.membershipNumber,I.programName)&&(M.programMembershipUsed={"@type":"http://schema.org/ProgramMembership",membershipNumber:I.membershipNumber,programName:I.programName}),F.push(M)}if(F.length)return F}}).call();