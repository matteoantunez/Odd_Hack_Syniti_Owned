new ReverseTemplateList([new ReverseTemplate("rezserver.com-car-en",function(e){return/Your (?:[AC]AA|Travel.com)\s.*?Car (?:Itinerary|Cancellation)/.test(e.subject)},function(e){if(!/Your (?:[AC]AA|Travel.com)\s.*?Car (?:Itinerary|Cancellation)/.test(e.subject))return CONTINUE;var t="en_US",r={reservationIdPrefix:"Confirmation #:",reservationStatusPrefix:"Booking Status:",underNamePrefix:"Driver Name:",providerNamePrefix:"Rental Partner:",carBrandRegExp:/(.+) or similar/,pickUpDetailsPrefix:"Pick-up Details:",dropOffDetailsPrefix:"Drop-Off Details:",modifyReservationUrlPrefix:"Change Your Reservation"},a=Scanner.fromMessage(e);a.setLocale(t);var n,i,o,s,p,g,m,u,d,c=a.getSpan();return n=c.next(r.reservationIdPrefix).nextAnyTag("td").tagContents(),i=c.next(r.reservationStatusPrefix).nextAnyTag("td").tagContents(),o=c.next(r.underNamePrefix).nextAnyTag("td").tagContents(),s=c.next(r.providerNamePrefix).nextAnyTag("td").tagContents(),p=c.next(r.carBrandRegExp).parentAnyTag("td").tagContents().innerCapture(r.carBrandRegExp,1),[g,m]=c.next(r.pickUpDetailsPrefix).nextAnyTag("td").tagContents().toString().split(/\n/),g=a.getDetachedSpan(g),m=a.getDetachedSpan(m),[u,d]=c.next(r.dropOffDetailsPrefix).nextAnyTag("td").tagContents().toString().split(/\n/),u=a.getDetachedSpan(u),d=a.getDetachedSpan(d),c.next(r.modifyReservationUrlPrefix).nextLink(),ASSERT(m||pickUpLocationName,g)?[{"@context":"http://schema.org","@type":"http://schema.org/RentalCarReservation",reservationStatus:"http://schema.org/Reservation"+i,reservationId:n,underName:{"@type":"http://schema.org/Person",name:o},provider:{"@type":"http://schema.org/Organization",name:s},reservationFor:{"@type":"http://schema.org/Car",brand:{"@type":"http://schema.org/Organization",name:p}},pickupTime:g,pickupLocation:{"@type":"http://schema.org/Place",address:m},dropoffTime:u,dropoffLocation:{"@type":"http://schema.org/Place",address:d}}]:void 0},"SG1a3f2ab1"),new ReverseTemplate("rezserver.com-flight-confirmation-en",function(e){return/Your (?:[AC]AA|Travel\.com).*?\sFlight Itinerary/.test(e.subject)},function(e){if(!/Your (?:[AC]AA|Travel\.com).*?\sFlight Itinerary/.test(e.subject))return CONTINUE;var t="en_US",r={reservationIdPrefix:"Airline Confirmation:",reservationStatusPrefix:"Booking Status:",flightsHeaderRegExp:/Your Trip from .+ to .+/,legsHeaderRegExp:/(?:(?:Departing|Returning) )?Flight:/,hasMoreLegsRegExp:/Connection at .+ \([A-Z]{3}\)/,airlineNameRegExp:/(.+?)(?:\s?\(.+?\))?\s-/,flightNumberRegExp:/Flight\s(\d+)/,passengerNameSuffix:"Passenger and Ticket Information",passengerNameRegExp:/(.+) - Passenger and Ticket Information/,ticketNumberRegExp:/Ticket number: (\d+)/},a=Scanner.fromMessage(e);a.setLocale(t);for(var n=a.getSpan(),i=[],o=[],s=[],p=n.next(r.reservationIdPrefix).nextAnyTag("td").tagContents(),g=n.next(r.reservationStatusPrefix).nextAnyTag("td").tagContents(),m=n.next(r.flightsHeaderRegExp).next(r.legsHeaderRegExp);m.exists();){var u=m.parentAnyTag("td").tagContents().innerDate(),d=!1;do{var c=(m=m.nextTag("table3")).allInnerTags("td3").map(function(e){return e.tagContents()}).filter(function(e){return e.toString().length>0});if(c&&c.length){var l=a.getDetachedSpan(u+" "+c[1]),x=a.getDetachedSpan(u+" "+c[6]);i.push({airlineName:c[9].innerCapture(r.airlineNameRegExp,1),flightNumber:c[9].innerCapture(r.flightNumberRegExp,1),departureAirport:c[2],departureAirportCode:c[3],departureDateTime:l,arrivalAirport:c[7],arrivalAirportCode:c[8],arrivalDateTime:x})}(d=m.next(r.hasMoreLegsRegExp).exists())&&(m=m.next(r.hasMoreLegsRegExp))}while(d);m=m.next(r.legsHeaderRegExp)}for(m=n.next(r.passengerNameSuffix);m.exists();)o.push({name:m.parentAnyTag("td").tagContents().innerCapture(r.passengerNameRegExp,1),ticketNumber:m.nextAnyTag("td").tagContents().innerCapture(r.ticketNumberRegExp,1)}),m=m.next(r.passengerNameSuffix);return 0===o.length&&o.push({}),i.forEach(function(e){o.forEach(function(t){ASSERT(e.airlineCode||e.airlineName,e.flightNumber,e.departureAirport,e.departureDateTime),s.push({"@context":"http://schema.org","@type":"http://schema.org/FlightReservation",reservationFor:{"@type":"http://apple.com/FuzzyFlight",airlineCode:e.airlineCode,airlineName:e.airlineName,flightNumber:e.flightNumber,departureAirportFuzzy:e.departureAirport,departureAirportCode:e.departureAirportCode,departureTime:e.departureDateTime,arrivalAirportFuzzy:e.arrivalAirport,arrivalAirportCode:e.arrivalAirportCode,arrivalTime:e.arrivalDateTime},underName:{"@type":"http://schema.org/Person",name:t.name},reservationId:p,reservationStatus:"http://schema.org/Reservation"+g,reservedTicket:{"@type":"http://schema.org/Ticket",ticketNumber:t.ticketNumber,ticketedSeat:{"@type":"http://schema.org/Seat",seatNumber:t.seat,seatingType:null}}})})}),s},"SG63b68910")]);