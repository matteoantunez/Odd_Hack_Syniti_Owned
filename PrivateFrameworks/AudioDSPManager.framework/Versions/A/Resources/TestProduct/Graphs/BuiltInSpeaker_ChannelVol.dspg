; =========================================================================
; standard client DSPgraph
; =========================================================================

graphName "BuiltInSpeaker_ChannelVol"

; -------------------------------------------------------------------------
; Definitions
; -------------------------------------------------------------------------

[def sampleRateIn 44100]
[def numChannelsIn 2]

; -------------------------------------------------------------------------
; Graph Ins and Outs
; -------------------------------------------------------------------------

in in
out out

; -------------------------------------------------------------------------
; Boxes and AUs
; -------------------------------------------------------------------------

box split split 1 2
box leftGain dbgn 1 1
box rightGain dbgn 1 1
box leftBalance dbgn 1 1
box rightBalance dbgn 1 1
box join join 2 1

box AUSpeakerProtection (aufx atsp appl) 1 1

; -------------------------------------------------------------------------
; DSP Graph topology
; -------------------------------------------------------------------------

wire in split ([sampleRateIn] [numChannelsIn])

wire (split 0) leftGain ([sampleRateIn] 1)
wire leftGain leftBalance ([sampleRateIn] 1)
wire leftBalance (join 0) ([sampleRateIn] 1)

wire (split 1) rightGain ([sampleRateIn] 1)
wire rightGain rightBalance ([sampleRateIn] 1)
wire rightBalance (join 1) ([sampleRateIn] 1)

wire join AUSpeakerProtection ([sampleRateIn] [numChannelsIn])

; -------------------------------------------------------------------------
; Graph outputs
; -------------------------------------------------------------------------

wire AUSpeakerProtection out ([sampleRateIn] [numChannelsIn])

; -------------------------------------------------------------------------
; Graph params
; -------------------------------------------------------------------------

param vol1 0
param vol2 0
wireGraphParam vol1 (leftGain 0)
wireGraphParam vol2 (rightGain 0)

param mut1 0
param mut2 0
wireGraphParam mut1 (leftGain 1)
wireGraphParam mut2 (rightGain 1)

param lbal 0
wireGraphParam lbal (leftBalance 0)
param rbal 0
wireGraphParam rbal (rightBalance 0)
